/* showtime_desktop.c generated by valac 0.42.2, the Vala compiler
 * generated from showtime_desktop.vala, do not modify */



#include <glib.h>
#include <glib-object.h>
#include <stdlib.h>
#include <string.h>
#include <gtk/gtk.h>
#include <gio/gio.h>
#include <gdk/gdk.h>
#include <pango/pango.h>
#include <cairo.h>
#include <float.h>
#include <math.h>
#include <glib/gi18n-lib.h>
#include <gobject/gvaluecollector.h>


#define SHOW_TIME_TYPE_SHOW_TIMEAPPEARANCE (show_time_show_timeappearance_get_type ())
#define SHOW_TIME_SHOW_TIMEAPPEARANCE(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), SHOW_TIME_TYPE_SHOW_TIMEAPPEARANCE, ShowTimeShowTimeappearance))
#define SHOW_TIME_SHOW_TIMEAPPEARANCE_CLASS(klass) (G_TYPE_CHECK_CLASS_CAST ((klass), SHOW_TIME_TYPE_SHOW_TIMEAPPEARANCE, ShowTimeShowTimeappearanceClass))
#define SHOW_TIME_IS_SHOW_TIMEAPPEARANCE(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), SHOW_TIME_TYPE_SHOW_TIMEAPPEARANCE))
#define SHOW_TIME_IS_SHOW_TIMEAPPEARANCE_CLASS(klass) (G_TYPE_CHECK_CLASS_TYPE ((klass), SHOW_TIME_TYPE_SHOW_TIMEAPPEARANCE))
#define SHOW_TIME_SHOW_TIMEAPPEARANCE_GET_CLASS(obj) (G_TYPE_INSTANCE_GET_CLASS ((obj), SHOW_TIME_TYPE_SHOW_TIMEAPPEARANCE, ShowTimeShowTimeappearanceClass))

typedef struct _ShowTimeShowTimeappearance ShowTimeShowTimeappearance;
typedef struct _ShowTimeShowTimeappearanceClass ShowTimeShowTimeappearanceClass;
typedef struct _ShowTimeShowTimeappearancePrivate ShowTimeShowTimeappearancePrivate;
#define _g_free0(var) (var = (g_free (var), NULL))
#define __vala_PangoFontDescription_free0(var) ((var == NULL) ? NULL : (var = (_vala_PangoFontDescription_free (var), NULL)))
#define _g_object_unref0(var) ((var == NULL) ? NULL : (var = (g_object_unref (var), NULL)))
#define _g_regex_unref0(var) ((var == NULL) ? NULL : (var = (g_regex_unref (var), NULL)))
#define _g_error_free0(var) ((var == NULL) ? NULL : (var = (g_error_free (var), NULL)))
typedef struct _ShowTimeParamSpecShowTimeappearance ShowTimeParamSpecShowTimeappearance;

#define SHOW_TIME_TYPE_TIME_WINDOW (show_time_time_window_get_type ())
#define SHOW_TIME_TIME_WINDOW(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), SHOW_TIME_TYPE_TIME_WINDOW, ShowTimeTimeWindow))
#define SHOW_TIME_TIME_WINDOW_CLASS(klass) (G_TYPE_CHECK_CLASS_CAST ((klass), SHOW_TIME_TYPE_TIME_WINDOW, ShowTimeTimeWindowClass))
#define SHOW_TIME_IS_TIME_WINDOW(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), SHOW_TIME_TYPE_TIME_WINDOW))
#define SHOW_TIME_IS_TIME_WINDOW_CLASS(klass) (G_TYPE_CHECK_CLASS_TYPE ((klass), SHOW_TIME_TYPE_TIME_WINDOW))
#define SHOW_TIME_TIME_WINDOW_GET_CLASS(obj) (G_TYPE_INSTANCE_GET_CLASS ((obj), SHOW_TIME_TYPE_TIME_WINDOW, ShowTimeTimeWindowClass))

typedef struct _ShowTimeTimeWindow ShowTimeTimeWindow;
typedef struct _ShowTimeTimeWindowClass ShowTimeTimeWindowClass;
typedef struct _ShowTimeTimeWindowPrivate ShowTimeTimeWindowPrivate;
enum  {
	SHOW_TIME_TIME_WINDOW_0_PROPERTY,
	SHOW_TIME_TIME_WINDOW_NUM_PROPERTIES
};
static GParamSpec* show_time_time_window_properties[SHOW_TIME_TIME_WINDOW_NUM_PROPERTIES];
#define _show_time_show_timeappearance_unref0(var) ((var == NULL) ? NULL : (var = (show_time_show_timeappearance_unref (var), NULL)))
#define _g_thread_unref0(var) ((var == NULL) ? NULL : (var = (g_thread_unref (var), NULL)))
#define _g_string_free0(var) ((var == NULL) ? NULL : (var = (g_string_free (var, TRUE), NULL)))
#define _g_date_time_unref0(var) ((var == NULL) ? NULL : (var = (g_date_time_unref (var), NULL)))

struct _ShowTimeShowTimeappearance {
	GTypeInstance parent_instance;
	volatile int ref_count;
	ShowTimeShowTimeappearancePrivate * priv;
};

struct _ShowTimeShowTimeappearanceClass {
	GTypeClass parent_class;
	void (*finalize) (ShowTimeShowTimeappearance *self);
};

struct _ShowTimeParamSpecShowTimeappearance {
	GParamSpec parent_instance;
};

struct _ShowTimeTimeWindow {
	GtkWindow parent_instance;
	ShowTimeTimeWindowPrivate * priv;
};

struct _ShowTimeTimeWindowClass {
	GtkWindowClass parent_class;
};

struct _ShowTimeTimeWindowPrivate {
	gint next_time;
	gboolean twelvehrs;
	gchar* dateformat;
	ShowTimeShowTimeappearance* appearance;
	gboolean bypass;
};


extern gchar* show_time_timefontcolor;
gchar* show_time_timefontcolor = NULL;
extern gchar* show_time_datefontcolor;
gchar* show_time_datefontcolor = NULL;
extern gint show_time_linespacing;
gint show_time_linespacing = 0;
extern GtkLabel* show_time_timelabel;
GtkLabel* show_time_timelabel = NULL;
extern GtkLabel* show_time_datelabel;
GtkLabel* show_time_datelabel = NULL;
extern GSettings* show_time_showtime_settings;
GSettings* show_time_showtime_settings = NULL;
static gpointer show_time_show_timeappearance_parent_class = NULL;
static gint ShowTimeTimeWindow_private_offset;
static gpointer show_time_time_window_parent_class = NULL;

gpointer show_time_show_timeappearance_ref (gpointer instance);
void show_time_show_timeappearance_unref (gpointer instance);
GParamSpec* show_time_param_spec_show_timeappearance (const gchar* name,
                                                      const gchar* nick,
                                                      const gchar* blurb,
                                                      GType object_type,
                                                      GParamFlags flags);
void show_time_value_set_show_timeappearance (GValue* value,
                                              gpointer v_object);
void show_time_value_take_show_timeappearance (GValue* value,
                                               gpointer v_object);
gpointer show_time_value_get_show_timeappearance (const GValue* value);
GType show_time_show_timeappearance_get_type (void) G_GNUC_CONST;
void show_time_show_timeappearance_get_appearance (ShowTimeShowTimeappearance* self,
                                                   GdkScreen* screen);
static void _vala_PangoFontDescription_free (PangoFontDescription* self);
void show_time_show_timeappearance_get_spacing (ShowTimeShowTimeappearance* self,
                                                GdkScreen* screen);
void show_time_show_timeappearance_get_hexcolor (ShowTimeShowTimeappearance* self,
                                                 const gchar* currtime,
                                                 const gchar* currdate);
ShowTimeShowTimeappearance* show_time_show_timeappearance_new (void);
ShowTimeShowTimeappearance* show_time_show_timeappearance_construct (GType object_type);
static void show_time_show_timeappearance_finalize (ShowTimeShowTimeappearance * obj);
GType show_time_time_window_get_type (void) G_GNUC_CONST;
ShowTimeTimeWindow* show_time_time_window_new (void);
ShowTimeTimeWindow* show_time_time_window_construct (GType object_type);
static gchar* show_time_time_window_get_dateformat (ShowTimeTimeWindow* self);
static void _gtk_main_quit_gtk_widget_destroy (GtkWidget* _sender,
                                        gpointer self);
static void show_time_time_window_update_appearance (ShowTimeTimeWindow* self);
static void _show_time_time_window_update_appearance_g_settings_changed (GSettings* _sender,
                                                                  const gchar* key,
                                                                  gpointer self);
static void show_time_time_window_toggle_draggable (ShowTimeTimeWindow* self);
static void _show_time_time_window_toggle_draggable_g_settings_changed (GSettings* _sender,
                                                                 const gchar* key,
                                                                 gpointer self);
static gboolean show_time_time_window_on_draw (ShowTimeTimeWindow* self,
                                        GtkWidget* da,
                                        cairo_t* ctx);
static gboolean _show_time_time_window_on_draw_gtk_widget_draw (GtkWidget* _sender,
                                                         cairo_t* cr,
                                                         gpointer self);
void show_time_time_window_set_windowposition (ShowTimeTimeWindow* self);
static gboolean show_time_time_window_setcondition (ShowTimeTimeWindow* self);
static gboolean _show_time_time_window_setcondition_gtk_widget_configure_event (GtkWidget* _sender,
                                                                         GdkEventConfigure* event,
                                                                         gpointer self);
static void _show_time_time_window_set_windowposition_g_settings_changed (GSettings* _sender,
                                                                   const gchar* key,
                                                                   gpointer self);
static gboolean show_time_time_window_run_time (ShowTimeTimeWindow* self);
static gpointer _show_time_time_window_run_time_gthread_func (gpointer self);
static gboolean show_time_time_window_get_leftalign (ShowTimeTimeWindow* self);
static gint* show_time_time_window_get_windowsize (ShowTimeTimeWindow* self,
                                            int* result_length1);
static gint* show_time_time_window_get_default_right (ShowTimeTimeWindow* self,
                                               int* result_length1);
static gint* show_time_time_window_check_res (ShowTimeTimeWindow* self,
                                       int* result_length1);
static gint show_time_time_window_get_stringindex (ShowTimeTimeWindow* self,
                                            gchar** arr,
                                            int arr_length1,
                                            const gchar* lookfor);
static gchar* show_time_time_window_fix_mins (ShowTimeTimeWindow* self,
                                       gint minutes);
static gchar* show_time_time_window_get_localtime (ShowTimeTimeWindow* self,
                                            GDateTime* newtime);
static gchar* show_time_time_window_read_dateformat (ShowTimeTimeWindow* self);
static void show_time_time_window_update_interface (ShowTimeTimeWindow* self);
static gboolean show_time_time_window_check_onapplet (ShowTimeTimeWindow* self);
static gint show_time_time_window_convert_remainder_topositive (ShowTimeTimeWindow* self,
                                                         gdouble subj,
                                                         gdouble rem);
static gint* show_time_time_window_calibrate_time (ShowTimeTimeWindow* self,
                                            int* result_length1);
static gboolean ____lambda4_ (ShowTimeTimeWindow* self);
static gboolean _____lambda4__gsource_func (gpointer self);
static void show_time_time_window_finalize (GObject * obj);
void show_time_main (gchar** args,
                     int args_length1);
static void _vala_array_destroy (gpointer array,
                          gint array_length,
                          GDestroyNotify destroy_func);
static void _vala_array_free (gpointer array,
                       gint array_length,
                       GDestroyNotify destroy_func);
static gint _vala_array_length (gpointer array);


static void
_vala_PangoFontDescription_free (PangoFontDescription* self)
{
	g_boxed_free (pango_font_description_get_type (), self);
}


static gpointer
_g_object_ref0 (gpointer self)
{
	return self ? g_object_ref (self) : NULL;
}


void
show_time_show_timeappearance_get_appearance (ShowTimeShowTimeappearance* self,
                                              GdkScreen* screen)
{
	GSettings* _tmp0_;
	gchar* _tmp1_;
	GSettings* _tmp2_;
	gchar* _tmp3_;
	gchar* timeprops = NULL;
	GSettings* _tmp4_;
	gchar* _tmp5_;
	gchar* dateprops = NULL;
	GSettings* _tmp6_;
	gchar* _tmp7_;
	PangoFontDescription* timefont = NULL;
	PangoFontDescription* _tmp8_;
	PangoFontDescription* _tmp9_;
	PangoFontDescription* _tmp10_;
	PangoFontDescription* _tmp11_;
	PangoFontDescription* datefont = NULL;
	PangoFontDescription* _tmp12_;
	PangoFontDescription* _tmp13_;
	PangoFontDescription* _tmp14_;
	PangoFontDescription* _tmp15_;
	PangoContext* t = NULL;
	GtkLabel* _tmp16_;
	PangoContext* _tmp17_;
	PangoContext* _tmp18_;
	PangoContext* d = NULL;
	GtkLabel* _tmp19_;
	PangoContext* _tmp20_;
	PangoContext* _tmp21_;
	GtkLabel* _tmp22_;
	g_return_if_fail (self != NULL);
	g_return_if_fail (screen != NULL);
	_tmp0_ = show_time_showtime_settings;
	_tmp1_ = g_settings_get_string (_tmp0_, "timefontcolor");
	_g_free0 (show_time_timefontcolor);
	show_time_timefontcolor = _tmp1_;
	_tmp2_ = show_time_showtime_settings;
	_tmp3_ = g_settings_get_string (_tmp2_, "datefontcolor");
	_g_free0 (show_time_datefontcolor);
	show_time_datefontcolor = _tmp3_;
	_tmp4_ = show_time_showtime_settings;
	_tmp5_ = g_settings_get_string (_tmp4_, "timefont");
	timeprops = _tmp5_;
	_tmp6_ = show_time_showtime_settings;
	_tmp7_ = g_settings_get_string (_tmp6_, "datefont");
	dateprops = _tmp7_;
	_tmp8_ = pango_font_description_new ();
	_tmp9_ = _tmp8_;
	_tmp10_ = pango_font_description_from_string (timeprops);
	_tmp11_ = _tmp10_;
	__vala_PangoFontDescription_free0 (_tmp9_);
	timefont = _tmp11_;
	_tmp12_ = pango_font_description_new ();
	_tmp13_ = _tmp12_;
	_tmp14_ = pango_font_description_from_string (dateprops);
	_tmp15_ = _tmp14_;
	__vala_PangoFontDescription_free0 (_tmp13_);
	datefont = _tmp15_;
	_tmp16_ = show_time_timelabel;
	_tmp17_ = gtk_widget_get_pango_context ((GtkWidget*) _tmp16_);
	_tmp18_ = _g_object_ref0 (_tmp17_);
	t = _tmp18_;
	_tmp19_ = show_time_datelabel;
	_tmp20_ = gtk_widget_get_pango_context ((GtkWidget*) _tmp19_);
	_tmp21_ = _g_object_ref0 (_tmp20_);
	d = _tmp21_;
	pango_context_set_font_description (t, timefont);
	pango_context_set_font_description (d, datefont);
	_tmp22_ = show_time_timelabel;
	gtk_widget_set_margin_end ((GtkWidget*) _tmp22_, 10);
	show_time_show_timeappearance_get_spacing (self, screen);
	_g_object_unref0 (d);
	_g_object_unref0 (t);
	__vala_PangoFontDescription_free0 (datefont);
	__vala_PangoFontDescription_free0 (timefont);
	_g_free0 (dateprops);
	_g_free0 (timeprops);
}


static gchar*
string_replace (const gchar* self,
                const gchar* old,
                const gchar* replacement)
{
	gchar* result = NULL;
	gboolean _tmp0_ = FALSE;
	gboolean _tmp1_ = FALSE;
	GError * _inner_error_ = NULL;
	g_return_val_if_fail (self != NULL, NULL);
	g_return_val_if_fail (old != NULL, NULL);
	g_return_val_if_fail (replacement != NULL, NULL);
	if ((*((gchar*) self)) == '\0') {
		_tmp1_ = TRUE;
	} else {
		_tmp1_ = (*((gchar*) old)) == '\0';
	}
	if (_tmp1_) {
		_tmp0_ = TRUE;
	} else {
		_tmp0_ = g_strcmp0 (old, replacement) == 0;
	}
	if (_tmp0_) {
		gchar* _tmp2_;
		_tmp2_ = g_strdup (self);
		result = _tmp2_;
		return result;
	}
	{
		GRegex* regex = NULL;
		gchar* _tmp3_;
		gchar* _tmp4_;
		GRegex* _tmp5_;
		GRegex* _tmp6_;
		gchar* _tmp7_ = NULL;
		GRegex* _tmp8_;
		gchar* _tmp9_;
		gchar* _tmp10_;
		_tmp3_ = g_regex_escape_string (old, -1);
		_tmp4_ = _tmp3_;
		_tmp5_ = g_regex_new (_tmp4_, 0, 0, &_inner_error_);
		_tmp6_ = _tmp5_;
		_g_free0 (_tmp4_);
		regex = _tmp6_;
		if (G_UNLIKELY (_inner_error_ != NULL)) {
			if (_inner_error_->domain == G_REGEX_ERROR) {
				goto __catch0_g_regex_error;
			}
			g_critical ("file %s: line %d: unexpected error: %s (%s, %d)", __FILE__, __LINE__, _inner_error_->message, g_quark_to_string (_inner_error_->domain), _inner_error_->code);
			g_clear_error (&_inner_error_);
			return NULL;
		}
		_tmp8_ = regex;
		_tmp9_ = g_regex_replace_literal (_tmp8_, self, (gssize) -1, 0, replacement, 0, &_inner_error_);
		_tmp7_ = _tmp9_;
		if (G_UNLIKELY (_inner_error_ != NULL)) {
			_g_regex_unref0 (regex);
			if (_inner_error_->domain == G_REGEX_ERROR) {
				goto __catch0_g_regex_error;
			}
			_g_regex_unref0 (regex);
			g_critical ("file %s: line %d: unexpected error: %s (%s, %d)", __FILE__, __LINE__, _inner_error_->message, g_quark_to_string (_inner_error_->domain), _inner_error_->code);
			g_clear_error (&_inner_error_);
			return NULL;
		}
		_tmp10_ = _tmp7_;
		_tmp7_ = NULL;
		result = _tmp10_;
		_g_free0 (_tmp7_);
		_g_regex_unref0 (regex);
		return result;
	}
	goto __finally0;
	__catch0_g_regex_error:
	{
		GError* e = NULL;
		e = _inner_error_;
		_inner_error_ = NULL;
		g_assert_not_reached ();
		_g_error_free0 (e);
	}
	__finally0:
	if (G_UNLIKELY (_inner_error_ != NULL)) {
		g_critical ("file %s: line %d: uncaught error: %s (%s, %d)", __FILE__, __LINE__, _inner_error_->message, g_quark_to_string (_inner_error_->domain), _inner_error_->code);
		g_clear_error (&_inner_error_);
		return NULL;
	}
}


void
show_time_show_timeappearance_get_spacing (ShowTimeShowTimeappearance* self,
                                           GdkScreen* screen)
{
	gchar* linespacing_css = NULL;
	gint _tmp0_;
	gchar* _tmp1_;
	gchar* _tmp2_;
	gchar* _tmp3_;
	gchar* _tmp4_;
	GtkCssProvider* css_provider = NULL;
	GtkCssProvider* _tmp5_;
	GtkLabel* _tmp6_;
	GtkStyleContext* _tmp7_;
	GError * _inner_error_ = NULL;
	g_return_if_fail (self != NULL);
	g_return_if_fail (screen != NULL);
	_tmp0_ = show_time_linespacing;
	_tmp1_ = g_strdup_printf ("%i", _tmp0_);
	_tmp2_ = _tmp1_;
	_tmp3_ = string_replace ("\n" \
"            .linespacing {\n" \
"              margin-bottom: <bspac>px;\n" \
"            }\n" \
"            ", "<bspac>", _tmp2_);
	_tmp4_ = _tmp3_;
	_g_free0 (_tmp2_);
	linespacing_css = _tmp4_;
	_tmp5_ = gtk_css_provider_new ();
	css_provider = _tmp5_;
	_tmp6_ = show_time_timelabel;
	_tmp7_ = gtk_widget_get_style_context ((GtkWidget*) _tmp6_);
	gtk_style_context_remove_class (_tmp7_, "linespacing");
	{
		GtkLabel* _tmp8_;
		GtkStyleContext* _tmp9_;
		gtk_css_provider_load_from_data (css_provider, linespacing_css, (gssize) -1, &_inner_error_);
		if (G_UNLIKELY (_inner_error_ != NULL)) {
			goto __catch1_g_error;
		}
		gtk_style_context_add_provider_for_screen (screen, (GtkStyleProvider*) css_provider, (guint) GTK_STYLE_PROVIDER_PRIORITY_USER);
		_tmp8_ = show_time_timelabel;
		_tmp9_ = gtk_widget_get_style_context ((GtkWidget*) _tmp8_);
		gtk_style_context_add_class (_tmp9_, "linespacing");
	}
	goto __finally1;
	__catch1_g_error:
	{
		GError* e = NULL;
		e = _inner_error_;
		_inner_error_ = NULL;
		g_print ("Error loading css data\n");
		_g_error_free0 (e);
	}
	__finally1:
	if (G_UNLIKELY (_inner_error_ != NULL)) {
		_g_object_unref0 (css_provider);
		_g_free0 (linespacing_css);
		g_critical ("file %s: line %d: uncaught error: %s (%s, %d)", __FILE__, __LINE__, _inner_error_->message, g_quark_to_string (_inner_error_->domain), _inner_error_->code);
		g_clear_error (&_inner_error_);
		return;
	}
	_g_object_unref0 (css_provider);
	_g_free0 (linespacing_css);
}


void
show_time_show_timeappearance_get_hexcolor (ShowTimeShowTimeappearance* self,
                                            const gchar* currtime,
                                            const gchar* currdate)
{
	GtkLabel* _tmp0_;
	const gchar* _tmp1_;
	gchar* _tmp2_;
	gchar* _tmp3_;
	gchar* _tmp4_;
	gchar* _tmp5_;
	gchar* _tmp6_;
	gchar* _tmp7_;
	gchar* _tmp8_;
	gchar* _tmp9_;
	GtkLabel* _tmp10_;
	const gchar* _tmp11_;
	gchar* _tmp12_;
	gchar* _tmp13_;
	gchar* _tmp14_;
	gchar* _tmp15_;
	gchar* _tmp16_;
	gchar* _tmp17_;
	gchar* _tmp18_;
	gchar* _tmp19_;
	g_return_if_fail (self != NULL);
	g_return_if_fail (currtime != NULL);
	g_return_if_fail (currdate != NULL);
	_tmp0_ = show_time_timelabel;
	_tmp1_ = show_time_timefontcolor;
	_tmp2_ = g_strconcat ("<span foreground=\"", _tmp1_, NULL);
	_tmp3_ = _tmp2_;
	_tmp4_ = g_strconcat (_tmp3_, "\">", NULL);
	_tmp5_ = _tmp4_;
	_tmp6_ = g_strconcat (_tmp5_, currtime, NULL);
	_tmp7_ = _tmp6_;
	_tmp8_ = g_strconcat (_tmp7_, "</span>", NULL);
	_tmp9_ = _tmp8_;
	gtk_label_set_markup (_tmp0_, _tmp9_);
	_g_free0 (_tmp9_);
	_g_free0 (_tmp7_);
	_g_free0 (_tmp5_);
	_g_free0 (_tmp3_);
	_tmp10_ = show_time_datelabel;
	_tmp11_ = show_time_datefontcolor;
	_tmp12_ = g_strconcat ("<span foreground=\"", _tmp11_, NULL);
	_tmp13_ = _tmp12_;
	_tmp14_ = g_strconcat (_tmp13_, "\">", NULL);
	_tmp15_ = _tmp14_;
	_tmp16_ = g_strconcat (_tmp15_, currdate, NULL);
	_tmp17_ = _tmp16_;
	_tmp18_ = g_strconcat (_tmp17_, "</span>", NULL);
	_tmp19_ = _tmp18_;
	gtk_label_set_markup (_tmp10_, _tmp19_);
	_g_free0 (_tmp19_);
	_g_free0 (_tmp17_);
	_g_free0 (_tmp15_);
	_g_free0 (_tmp13_);
}


ShowTimeShowTimeappearance*
show_time_show_timeappearance_construct (GType object_type)
{
	ShowTimeShowTimeappearance* self = NULL;
	self = (ShowTimeShowTimeappearance*) g_type_create_instance (object_type);
	return self;
}


ShowTimeShowTimeappearance*
show_time_show_timeappearance_new (void)
{
	return show_time_show_timeappearance_construct (SHOW_TIME_TYPE_SHOW_TIMEAPPEARANCE);
}


static void
show_time_value_show_timeappearance_init (GValue* value)
{
	value->data[0].v_pointer = NULL;
}


static void
show_time_value_show_timeappearance_free_value (GValue* value)
{
	if (value->data[0].v_pointer) {
		show_time_show_timeappearance_unref (value->data[0].v_pointer);
	}
}


static void
show_time_value_show_timeappearance_copy_value (const GValue* src_value,
                                                GValue* dest_value)
{
	if (src_value->data[0].v_pointer) {
		dest_value->data[0].v_pointer = show_time_show_timeappearance_ref (src_value->data[0].v_pointer);
	} else {
		dest_value->data[0].v_pointer = NULL;
	}
}


static gpointer
show_time_value_show_timeappearance_peek_pointer (const GValue* value)
{
	return value->data[0].v_pointer;
}


static gchar*
show_time_value_show_timeappearance_collect_value (GValue* value,
                                                   guint n_collect_values,
                                                   GTypeCValue* collect_values,
                                                   guint collect_flags)
{
	if (collect_values[0].v_pointer) {
		ShowTimeShowTimeappearance * object;
		object = collect_values[0].v_pointer;
		if (object->parent_instance.g_class == NULL) {
			return g_strconcat ("invalid unclassed object pointer for value type `", G_VALUE_TYPE_NAME (value), "'", NULL);
		} else if (!g_value_type_compatible (G_TYPE_FROM_INSTANCE (object), G_VALUE_TYPE (value))) {
			return g_strconcat ("invalid object type `", g_type_name (G_TYPE_FROM_INSTANCE (object)), "' for value type `", G_VALUE_TYPE_NAME (value), "'", NULL);
		}
		value->data[0].v_pointer = show_time_show_timeappearance_ref (object);
	} else {
		value->data[0].v_pointer = NULL;
	}
	return NULL;
}


static gchar*
show_time_value_show_timeappearance_lcopy_value (const GValue* value,
                                                 guint n_collect_values,
                                                 GTypeCValue* collect_values,
                                                 guint collect_flags)
{
	ShowTimeShowTimeappearance ** object_p;
	object_p = collect_values[0].v_pointer;
	if (!object_p) {
		return g_strdup_printf ("value location for `%s' passed as NULL", G_VALUE_TYPE_NAME (value));
	}
	if (!value->data[0].v_pointer) {
		*object_p = NULL;
	} else if (collect_flags & G_VALUE_NOCOPY_CONTENTS) {
		*object_p = value->data[0].v_pointer;
	} else {
		*object_p = show_time_show_timeappearance_ref (value->data[0].v_pointer);
	}
	return NULL;
}


GParamSpec*
show_time_param_spec_show_timeappearance (const gchar* name,
                                          const gchar* nick,
                                          const gchar* blurb,
                                          GType object_type,
                                          GParamFlags flags)
{
	ShowTimeParamSpecShowTimeappearance* spec;
	g_return_val_if_fail (g_type_is_a (object_type, SHOW_TIME_TYPE_SHOW_TIMEAPPEARANCE), NULL);
	spec = g_param_spec_internal (G_TYPE_PARAM_OBJECT, name, nick, blurb, flags);
	G_PARAM_SPEC (spec)->value_type = object_type;
	return G_PARAM_SPEC (spec);
}


gpointer
show_time_value_get_show_timeappearance (const GValue* value)
{
	g_return_val_if_fail (G_TYPE_CHECK_VALUE_TYPE (value, SHOW_TIME_TYPE_SHOW_TIMEAPPEARANCE), NULL);
	return value->data[0].v_pointer;
}


void
show_time_value_set_show_timeappearance (GValue* value,
                                         gpointer v_object)
{
	ShowTimeShowTimeappearance * old;
	g_return_if_fail (G_TYPE_CHECK_VALUE_TYPE (value, SHOW_TIME_TYPE_SHOW_TIMEAPPEARANCE));
	old = value->data[0].v_pointer;
	if (v_object) {
		g_return_if_fail (G_TYPE_CHECK_INSTANCE_TYPE (v_object, SHOW_TIME_TYPE_SHOW_TIMEAPPEARANCE));
		g_return_if_fail (g_value_type_compatible (G_TYPE_FROM_INSTANCE (v_object), G_VALUE_TYPE (value)));
		value->data[0].v_pointer = v_object;
		show_time_show_timeappearance_ref (value->data[0].v_pointer);
	} else {
		value->data[0].v_pointer = NULL;
	}
	if (old) {
		show_time_show_timeappearance_unref (old);
	}
}


void
show_time_value_take_show_timeappearance (GValue* value,
                                          gpointer v_object)
{
	ShowTimeShowTimeappearance * old;
	g_return_if_fail (G_TYPE_CHECK_VALUE_TYPE (value, SHOW_TIME_TYPE_SHOW_TIMEAPPEARANCE));
	old = value->data[0].v_pointer;
	if (v_object) {
		g_return_if_fail (G_TYPE_CHECK_INSTANCE_TYPE (v_object, SHOW_TIME_TYPE_SHOW_TIMEAPPEARANCE));
		g_return_if_fail (g_value_type_compatible (G_TYPE_FROM_INSTANCE (v_object), G_VALUE_TYPE (value)));
		value->data[0].v_pointer = v_object;
	} else {
		value->data[0].v_pointer = NULL;
	}
	if (old) {
		show_time_show_timeappearance_unref (old);
	}
}


static void
show_time_show_timeappearance_class_init (ShowTimeShowTimeappearanceClass * klass)
{
	show_time_show_timeappearance_parent_class = g_type_class_peek_parent (klass);
	((ShowTimeShowTimeappearanceClass *) klass)->finalize = show_time_show_timeappearance_finalize;
}


static void
show_time_show_timeappearance_instance_init (ShowTimeShowTimeappearance * self)
{
	self->ref_count = 1;
}


static void
show_time_show_timeappearance_finalize (ShowTimeShowTimeappearance * obj)
{
	ShowTimeShowTimeappearance * self;
	self = G_TYPE_CHECK_INSTANCE_CAST (obj, SHOW_TIME_TYPE_SHOW_TIMEAPPEARANCE, ShowTimeShowTimeappearance);
	g_signal_handlers_destroy (self);
}


GType
show_time_show_timeappearance_get_type (void)
{
	static volatile gsize show_time_show_timeappearance_type_id__volatile = 0;
	if (g_once_init_enter (&show_time_show_timeappearance_type_id__volatile)) {
		static const GTypeValueTable g_define_type_value_table = { show_time_value_show_timeappearance_init, show_time_value_show_timeappearance_free_value, show_time_value_show_timeappearance_copy_value, show_time_value_show_timeappearance_peek_pointer, "p", show_time_value_show_timeappearance_collect_value, "p", show_time_value_show_timeappearance_lcopy_value };
		static const GTypeInfo g_define_type_info = { sizeof (ShowTimeShowTimeappearanceClass), (GBaseInitFunc) NULL, (GBaseFinalizeFunc) NULL, (GClassInitFunc) show_time_show_timeappearance_class_init, (GClassFinalizeFunc) NULL, NULL, sizeof (ShowTimeShowTimeappearance), 0, (GInstanceInitFunc) show_time_show_timeappearance_instance_init, &g_define_type_value_table };
		static const GTypeFundamentalInfo g_define_type_fundamental_info = { (G_TYPE_FLAG_CLASSED | G_TYPE_FLAG_INSTANTIATABLE | G_TYPE_FLAG_DERIVABLE | G_TYPE_FLAG_DEEP_DERIVABLE) };
		GType show_time_show_timeappearance_type_id;
		show_time_show_timeappearance_type_id = g_type_register_fundamental (g_type_fundamental_next (), "ShowTimeShowTimeappearance", &g_define_type_info, &g_define_type_fundamental_info, 0);
		g_once_init_leave (&show_time_show_timeappearance_type_id__volatile, show_time_show_timeappearance_type_id);
	}
	return show_time_show_timeappearance_type_id__volatile;
}


gpointer
show_time_show_timeappearance_ref (gpointer instance)
{
	ShowTimeShowTimeappearance * self;
	self = instance;
	g_atomic_int_inc (&self->ref_count);
	return instance;
}


void
show_time_show_timeappearance_unref (gpointer instance)
{
	ShowTimeShowTimeappearance * self;
	self = instance;
	if (g_atomic_int_dec_and_test (&self->ref_count)) {
		SHOW_TIME_SHOW_TIMEAPPEARANCE_GET_CLASS (self)->finalize (self);
		g_type_free_instance ((GTypeInstance *) self);
	}
}


static inline gpointer
show_time_time_window_get_instance_private (ShowTimeTimeWindow* self)
{
	return G_STRUCT_MEMBER_P (self, ShowTimeTimeWindow_private_offset);
}


static void
_gtk_main_quit_gtk_widget_destroy (GtkWidget* _sender,
                                   gpointer self)
{
	gtk_main_quit ();
}


static void
_show_time_time_window_update_appearance_g_settings_changed (GSettings* _sender,
                                                             const gchar* key,
                                                             gpointer self)
{
	show_time_time_window_update_appearance ((ShowTimeTimeWindow*) self);
}


static void
_show_time_time_window_toggle_draggable_g_settings_changed (GSettings* _sender,
                                                            const gchar* key,
                                                            gpointer self)
{
	show_time_time_window_toggle_draggable ((ShowTimeTimeWindow*) self);
}


static gboolean
_show_time_time_window_on_draw_gtk_widget_draw (GtkWidget* _sender,
                                                cairo_t* cr,
                                                gpointer self)
{
	gboolean result;
	result = show_time_time_window_on_draw ((ShowTimeTimeWindow*) self, _sender, cr);
	return result;
}


static gboolean
_show_time_time_window_setcondition_gtk_widget_configure_event (GtkWidget* _sender,
                                                                GdkEventConfigure* event,
                                                                gpointer self)
{
	gboolean result;
	result = show_time_time_window_setcondition ((ShowTimeTimeWindow*) self);
	return result;
}


static void
_show_time_time_window_set_windowposition_g_settings_changed (GSettings* _sender,
                                                              const gchar* key,
                                                              gpointer self)
{
	show_time_time_window_set_windowposition ((ShowTimeTimeWindow*) self);
}


static gpointer
_show_time_time_window_run_time_gthread_func (gpointer self)
{
	gpointer result;
	result = (gpointer) ((gintptr) show_time_time_window_run_time ((ShowTimeTimeWindow*) self));
	g_object_unref (self);
	return result;
}


ShowTimeTimeWindow*
show_time_time_window_construct (GType object_type)
{
	ShowTimeTimeWindow * self = NULL;
	GSettings* _tmp0_;
	gchar* _tmp1_;
	ShowTimeShowTimeappearance* _tmp2_;
	GdkScreen* _tmp3_;
	GtkGrid* maingrid = NULL;
	GtkGrid* _tmp4_;
	GtkLabel* _tmp5_;
	GtkLabel* _tmp6_;
	GtkGrid* _tmp7_;
	GtkLabel* _tmp8_;
	GtkGrid* _tmp9_;
	GtkLabel* _tmp10_;
	GtkGrid* _tmp11_;
	gchar** bind = NULL;
	gchar* _tmp12_;
	gchar* _tmp13_;
	gchar* _tmp14_;
	gchar* _tmp15_;
	gchar* _tmp16_;
	gchar* _tmp17_;
	gchar* _tmp18_;
	gchar* _tmp19_;
	gchar* _tmp20_;
	gchar* _tmp21_;
	gchar** _tmp22_;
	gint bind_length1;
	gint _bind_size_;
	gchar** _tmp23_;
	gint _tmp23__length1;
	GSettings* _tmp28_;
	ShowTimeShowTimeappearance* _tmp29_;
	GdkScreen* _tmp30_;
	GdkScreen* _tmp31_;
	GdkVisual* visual = NULL;
	GdkScreen* _tmp32_;
	GdkScreen* _tmp33_;
	GdkVisual* _tmp34_;
	GdkVisual* _tmp35_;
	GSettings* _tmp36_;
	GThread* _tmp37_;
	GThread* _tmp38_;
	self = (ShowTimeTimeWindow*) g_object_new (object_type, NULL);
	self->priv->bypass = FALSE;
	_tmp0_ = g_settings_new ("org.ubuntubudgie.plugins.budgie-showtime");
	_g_object_unref0 (show_time_showtime_settings);
	show_time_showtime_settings = _tmp0_;
	_tmp1_ = show_time_time_window_get_dateformat (self);
	_g_free0 (self->priv->dateformat);
	self->priv->dateformat = _tmp1_;
	_tmp2_ = show_time_show_timeappearance_new ();
	_show_time_show_timeappearance_unref0 (self->priv->appearance);
	self->priv->appearance = _tmp2_;
	gtk_window_set_title ((GtkWindow*) self, "Showtime");
	gtk_window_set_type_hint ((GtkWindow*) self, GDK_WINDOW_TYPE_HINT_DESKTOP);
	gtk_window_set_resizable ((GtkWindow*) self, FALSE);
	g_signal_connect ((GtkWidget*) self, "destroy", (GCallback) _gtk_main_quit_gtk_widget_destroy, NULL);
	gtk_window_set_decorated ((GtkWindow*) self, FALSE);
	_tmp3_ = gtk_window_get_screen ((GtkWindow*) self);
	gtk_window_set_screen ((GtkWindow*) self, _tmp3_);
	_tmp4_ = (GtkGrid*) gtk_grid_new ();
	g_object_ref_sink (_tmp4_);
	maingrid = _tmp4_;
	_tmp5_ = (GtkLabel*) gtk_label_new ("");
	g_object_ref_sink (_tmp5_);
	_g_object_unref0 (show_time_timelabel);
	show_time_timelabel = _tmp5_;
	_tmp6_ = (GtkLabel*) gtk_label_new ("");
	g_object_ref_sink (_tmp6_);
	_g_object_unref0 (show_time_datelabel);
	show_time_datelabel = _tmp6_;
	_tmp7_ = maingrid;
	_tmp8_ = show_time_timelabel;
	gtk_grid_attach (_tmp7_, (GtkWidget*) _tmp8_, 0, 0, 1, 1);
	_tmp9_ = maingrid;
	_tmp10_ = show_time_datelabel;
	gtk_grid_attach (_tmp9_, (GtkWidget*) _tmp10_, 0, 1, 1, 1);
	_tmp11_ = maingrid;
	gtk_container_add ((GtkContainer*) self, (GtkWidget*) _tmp11_);
	_tmp12_ = g_strdup ("leftalign");
	_tmp13_ = g_strdup ("twelvehrs");
	_tmp14_ = g_strdup ("xposition");
	_tmp15_ = g_strdup ("yposition");
	_tmp16_ = g_strdup ("linespacing");
	_tmp17_ = g_strdup ("timefontcolor");
	_tmp18_ = g_strdup ("linespacing");
	_tmp19_ = g_strdup ("datefontcolor");
	_tmp20_ = g_strdup ("timefont");
	_tmp21_ = g_strdup ("datefont");
	_tmp22_ = g_new0 (gchar*, 10 + 1);
	_tmp22_[0] = _tmp12_;
	_tmp22_[1] = _tmp13_;
	_tmp22_[2] = _tmp14_;
	_tmp22_[3] = _tmp15_;
	_tmp22_[4] = _tmp16_;
	_tmp22_[5] = _tmp17_;
	_tmp22_[6] = _tmp18_;
	_tmp22_[7] = _tmp19_;
	_tmp22_[8] = _tmp20_;
	_tmp22_[9] = _tmp21_;
	bind = _tmp22_;
	bind_length1 = 10;
	_bind_size_ = bind_length1;
	_tmp23_ = bind;
	_tmp23__length1 = bind_length1;
	{
		gchar** s_collection = NULL;
		gint s_collection_length1 = 0;
		gint _s_collection_size_ = 0;
		gint s_it = 0;
		s_collection = _tmp23_;
		s_collection_length1 = _tmp23__length1;
		for (s_it = 0; s_it < _tmp23__length1; s_it = s_it + 1) {
			gchar* _tmp24_;
			gchar* s = NULL;
			_tmp24_ = g_strdup (s_collection[s_it]);
			s = _tmp24_;
			{
				GSettings* _tmp25_;
				const gchar* _tmp26_;
				gchar* _tmp27_;
				_tmp25_ = show_time_showtime_settings;
				_tmp26_ = s;
				_tmp27_ = g_strconcat ("changed::", _tmp26_, NULL);
				g_signal_connect_object (_tmp25_, _tmp27_, (GCallback) _show_time_time_window_update_appearance_g_settings_changed, self, 0);
				_g_free0 (_tmp27_);
				_g_free0 (s);
			}
		}
	}
	_tmp28_ = show_time_showtime_settings;
	g_signal_connect_object (_tmp28_, "changed::draggable", (GCallback) _show_time_time_window_toggle_draggable_g_settings_changed, self, 0);
	show_time_time_window_update_appearance (self);
	_tmp29_ = self->priv->appearance;
	_tmp30_ = gtk_window_get_screen ((GtkWindow*) self);
	_tmp31_ = _tmp30_;
	show_time_show_timeappearance_get_appearance (_tmp29_, _tmp31_);
	gtk_widget_set_app_paintable ((GtkWidget*) self, TRUE);
	_tmp32_ = gtk_window_get_screen ((GtkWindow*) self);
	_tmp33_ = _tmp32_;
	_tmp34_ = gdk_screen_get_rgba_visual (_tmp33_);
	_tmp35_ = _g_object_ref0 (_tmp34_);
	visual = _tmp35_;
	gtk_widget_set_visual ((GtkWidget*) self, visual);
	g_signal_connect_object ((GtkWidget*) self, "draw", (GCallback) _show_time_time_window_on_draw_gtk_widget_draw, self, 0);
	gtk_widget_show_all ((GtkWidget*) self);
	show_time_time_window_set_windowposition (self);
	g_signal_connect_object ((GtkWidget*) self, "configure-event", (GCallback) _show_time_time_window_setcondition_gtk_widget_configure_event, self, 0);
	_tmp36_ = show_time_showtime_settings;
	g_signal_connect_object (_tmp36_, "changed::autoposition", (GCallback) _show_time_time_window_set_windowposition_g_settings_changed, self, 0);
	_tmp37_ = g_thread_new ("oldtimer", _show_time_time_window_run_time_gthread_func, g_object_ref (self));
	_tmp38_ = _tmp37_;
	_g_thread_unref0 (_tmp38_);
	_g_object_unref0 (visual);
	bind = (_vala_array_free (bind, bind_length1, (GDestroyNotify) g_free), NULL);
	_g_object_unref0 (maingrid);
	return self;
}


ShowTimeTimeWindow*
show_time_time_window_new (void)
{
	return show_time_time_window_construct (SHOW_TIME_TYPE_TIME_WINDOW);
}


static gboolean
show_time_time_window_setcondition (ShowTimeTimeWindow* self)
{
	gboolean result = FALSE;
	gboolean _tmp0_;
	gboolean drag = FALSE;
	GSettings* _tmp1_;
	gboolean _tmp2_ = FALSE;
	gboolean _tmp3_;
	g_return_val_if_fail (self != NULL, FALSE);
	_tmp0_ = self->priv->bypass;
	self->priv->bypass = !_tmp0_;
	_tmp1_ = show_time_showtime_settings;
	drag = g_settings_get_boolean (_tmp1_, "draggable");
	_tmp3_ = self->priv->bypass;
	if (!_tmp3_) {
		gboolean _tmp4_;
		_tmp4_ = drag;
		_tmp2_ = !_tmp4_;
	} else {
		_tmp2_ = FALSE;
	}
	if (_tmp2_) {
		show_time_time_window_set_windowposition (self);
	}
	result = FALSE;
	return result;
}


static gboolean
show_time_time_window_get_leftalign (ShowTimeTimeWindow* self)
{
	gboolean result = FALSE;
	GSettings* _tmp0_;
	g_return_val_if_fail (self != NULL, FALSE);
	_tmp0_ = show_time_showtime_settings;
	result = g_settings_get_boolean (_tmp0_, "leftalign");
	return result;
}


static gint*
show_time_time_window_get_windowsize (ShowTimeTimeWindow* self,
                                      int* result_length1)
{
	gint* result = NULL;
	gint width = 0;
	gint height = 0;
	gint _tmp0_ = 0;
	gint _tmp1_ = 0;
	gint* _tmp2_;
	gint* _tmp3_;
	gint _tmp3__length1;
	g_return_val_if_fail (self != NULL, NULL);
	gtk_window_get_size ((GtkWindow*) self, &_tmp0_, &_tmp1_);
	width = _tmp0_;
	height = _tmp1_;
	_tmp2_ = g_new0 (gint, 2);
	_tmp2_[0] = width;
	_tmp2_[1] = height;
	_tmp3_ = _tmp2_;
	_tmp3__length1 = 2;
	if (result_length1) {
		*result_length1 = _tmp3__length1;
	}
	result = _tmp3_;
	return result;
}


static gboolean
string_contains (const gchar* self,
                 const gchar* needle)
{
	gboolean result = FALSE;
	gchar* _tmp0_;
	g_return_val_if_fail (self != NULL, FALSE);
	g_return_val_if_fail (needle != NULL, FALSE);
	_tmp0_ = strstr ((gchar*) self, (gchar*) needle);
	result = _tmp0_ != NULL;
	return result;
}


void
show_time_time_window_set_windowposition (ShowTimeTimeWindow* self)
{
	gint setx = 0;
	gint sety = 0;
	gchar* anchor = NULL;
	gboolean autopostition = FALSE;
	GSettings* _tmp0_;
	gboolean _tmp1_;
	gint* winsize = NULL;
	gint _tmp13_;
	gint* _tmp14_;
	gint winsize_length1;
	gint _winsize_size_;
	gint usedx = 0;
	gint _tmp15_;
	gint usedy = 0;
	gint _tmp16_;
	const gchar* _tmp17_;
	const gchar* _tmp21_;
	gint _tmp25_;
	gint _tmp26_;
	g_return_if_fail (self != NULL);
	_tmp0_ = show_time_showtime_settings;
	autopostition = g_settings_get_boolean (_tmp0_, "autoposition");
	_tmp1_ = autopostition;
	if (_tmp1_) {
		gint* newpos = NULL;
		gint _tmp2_;
		gint* _tmp3_;
		gint newpos_length1;
		gint _newpos_size_;
		gint* _tmp4_;
		gint _tmp4__length1;
		gint _tmp5_;
		gint* _tmp6_;
		gint _tmp6__length1;
		gint _tmp7_;
		gchar* _tmp8_;
		_tmp3_ = show_time_time_window_get_default_right (self, &_tmp2_);
		newpos = _tmp3_;
		newpos_length1 = _tmp2_;
		_newpos_size_ = newpos_length1;
		_tmp4_ = newpos;
		_tmp4__length1 = newpos_length1;
		_tmp5_ = _tmp4_[0];
		setx = _tmp5_;
		_tmp6_ = newpos;
		_tmp6__length1 = newpos_length1;
		_tmp7_ = _tmp6_[1];
		sety = _tmp7_;
		_tmp8_ = g_strdup ("se");
		_g_free0 (anchor);
		anchor = _tmp8_;
		newpos = (g_free (newpos), NULL);
	} else {
		GSettings* _tmp9_;
		gchar* _tmp10_;
		GSettings* _tmp11_;
		GSettings* _tmp12_;
		_tmp9_ = show_time_showtime_settings;
		_tmp10_ = g_settings_get_string (_tmp9_, "anchor");
		_g_free0 (anchor);
		anchor = _tmp10_;
		_tmp11_ = show_time_showtime_settings;
		setx = g_settings_get_int (_tmp11_, "xposition");
		_tmp12_ = show_time_showtime_settings;
		sety = g_settings_get_int (_tmp12_, "yposition");
	}
	_tmp14_ = show_time_time_window_get_windowsize (self, &_tmp13_);
	winsize = _tmp14_;
	winsize_length1 = _tmp13_;
	_winsize_size_ = winsize_length1;
	_tmp15_ = setx;
	usedx = _tmp15_;
	_tmp16_ = sety;
	usedy = _tmp16_;
	_tmp17_ = anchor;
	if (string_contains (_tmp17_, "e")) {
		gint _tmp18_;
		gint* _tmp19_;
		gint _tmp19__length1;
		gint _tmp20_;
		_tmp18_ = setx;
		_tmp19_ = winsize;
		_tmp19__length1 = winsize_length1;
		_tmp20_ = _tmp19_[0];
		usedx = _tmp18_ - _tmp20_;
	}
	_tmp21_ = anchor;
	if (string_contains (_tmp21_, "s")) {
		gint _tmp22_;
		gint* _tmp23_;
		gint _tmp23__length1;
		gint _tmp24_;
		_tmp22_ = sety;
		_tmp23_ = winsize;
		_tmp23__length1 = winsize_length1;
		_tmp24_ = _tmp23_[1];
		usedy = _tmp22_ - _tmp24_;
	}
	_tmp25_ = usedx;
	_tmp26_ = usedy;
	gtk_window_move ((GtkWindow*) self, _tmp25_, _tmp26_);
	winsize = (g_free (winsize), NULL);
	_g_free0 (anchor);
}


static gint*
show_time_time_window_get_default_right (ShowTimeTimeWindow* self,
                                         int* result_length1)
{
	gint* result = NULL;
	gint* screendata = NULL;
	gint _tmp0_;
	gint* _tmp1_;
	gint screendata_length1;
	gint _screendata_size_;
	gint x = 0;
	gint _tmp2_;
	gint _tmp3_;
	gint y = 0;
	gint _tmp4_;
	gint _tmp5_;
	gint* _tmp6_;
	gint* _tmp7_;
	gint _tmp7__length1;
	g_return_val_if_fail (self != NULL, NULL);
	_tmp1_ = show_time_time_window_check_res (self, &_tmp0_);
	screendata = _tmp1_;
	screendata_length1 = _tmp0_;
	_screendata_size_ = screendata_length1;
	_tmp2_ = screendata[0];
	_tmp3_ = screendata[2];
	x = (_tmp2_ + _tmp3_) - 150;
	_tmp4_ = screendata[1];
	_tmp5_ = screendata[3];
	y = (_tmp4_ + _tmp5_) - 150;
	_tmp6_ = g_new0 (gint, 2);
	_tmp6_[0] = x;
	_tmp6_[1] = y;
	_tmp7_ = _tmp6_;
	_tmp7__length1 = 2;
	if (result_length1) {
		*result_length1 = _tmp7__length1;
	}
	result = _tmp7_;
	screendata = (g_free (screendata), NULL);
	return result;
}


static gint*
show_time_time_window_check_res (ShowTimeTimeWindow* self,
                                 int* result_length1)
{
	gint* result = NULL;
	GdkMonitor* prim = NULL;
	GdkDisplay* _tmp0_;
	GdkMonitor* _tmp1_;
	GdkMonitor* _tmp2_;
	GdkRectangle geo = {0};
	GdkRectangle _tmp3_ = {0};
	gint width = 0;
	GdkRectangle _tmp4_;
	gint _tmp5_;
	gint height = 0;
	GdkRectangle _tmp6_;
	gint _tmp7_;
	gint screen_xpos = 0;
	GdkRectangle _tmp8_;
	gint _tmp9_;
	gint screen_ypos = 0;
	GdkRectangle _tmp10_;
	gint _tmp11_;
	gint* _tmp12_;
	gint* _tmp13_;
	gint _tmp13__length1;
	g_return_val_if_fail (self != NULL, NULL);
	_tmp0_ = gdk_display_get_default ();
	_tmp1_ = gdk_display_get_primary_monitor (_tmp0_);
	_tmp2_ = _g_object_ref0 (_tmp1_);
	prim = _tmp2_;
	gdk_monitor_get_geometry (prim, &_tmp3_);
	geo = _tmp3_;
	_tmp4_ = geo;
	_tmp5_ = _tmp4_.width;
	width = _tmp5_;
	_tmp6_ = geo;
	_tmp7_ = _tmp6_.height;
	height = _tmp7_;
	_tmp8_ = geo;
	_tmp9_ = _tmp8_.x;
	screen_xpos = _tmp9_;
	_tmp10_ = geo;
	_tmp11_ = _tmp10_.y;
	screen_ypos = _tmp11_;
	_tmp12_ = g_new0 (gint, 4);
	_tmp12_[0] = width;
	_tmp12_[1] = height;
	_tmp12_[2] = screen_xpos;
	_tmp12_[3] = screen_ypos;
	_tmp13_ = _tmp12_;
	_tmp13__length1 = 4;
	if (result_length1) {
		*result_length1 = _tmp13__length1;
	}
	result = _tmp13_;
	_g_object_unref0 (prim);
	return result;
}


static gboolean
show_time_time_window_on_draw (ShowTimeTimeWindow* self,
                               GtkWidget* da,
                               cairo_t* ctx)
{
	gboolean result = FALSE;
	g_return_val_if_fail (self != NULL, FALSE);
	g_return_val_if_fail (da != NULL, FALSE);
	g_return_val_if_fail (ctx != NULL, FALSE);
	cairo_set_source_rgba (ctx, (gdouble) 0, (gdouble) 0, (gdouble) 0, (gdouble) 0);
	cairo_set_operator (ctx, CAIRO_OPERATOR_SOURCE);
	cairo_paint (ctx);
	cairo_set_operator (ctx, CAIRO_OPERATOR_OVER);
	result = FALSE;
	return result;
}


static gint
show_time_time_window_get_stringindex (ShowTimeTimeWindow* self,
                                       gchar** arr,
                                       int arr_length1,
                                       const gchar* lookfor)
{
	gint result = 0;
	g_return_val_if_fail (self != NULL, 0);
	g_return_val_if_fail (lookfor != NULL, 0);
	{
		gint i = 0;
		i = 0;
		{
			gboolean _tmp0_ = FALSE;
			_tmp0_ = TRUE;
			while (TRUE) {
				gint _tmp2_;
				gint _tmp3_;
				const gchar* _tmp4_;
				if (!_tmp0_) {
					gint _tmp1_;
					_tmp1_ = i;
					i = _tmp1_ + 1;
				}
				_tmp0_ = FALSE;
				_tmp2_ = i;
				if (!(_tmp2_ < arr_length1)) {
					break;
				}
				_tmp3_ = i;
				_tmp4_ = arr[_tmp3_];
				if (g_strcmp0 (lookfor, _tmp4_) == 0) {
					result = i;
					return result;
				}
			}
		}
	}
	result = -1;
	return result;
}


static gchar*
show_time_time_window_fix_mins (ShowTimeTimeWindow* self,
                                gint minutes)
{
	gchar* result = NULL;
	gchar* minsdisplay = NULL;
	gchar* _tmp0_;
	const gchar* _tmp1_;
	gint _tmp2_;
	gint _tmp3_;
	g_return_val_if_fail (self != NULL, NULL);
	_tmp0_ = g_strdup_printf ("%i", minutes);
	minsdisplay = _tmp0_;
	_tmp1_ = minsdisplay;
	_tmp2_ = strlen (_tmp1_);
	_tmp3_ = _tmp2_;
	if (_tmp3_ == 1) {
		const gchar* _tmp4_;
		gchar* _tmp5_;
		_tmp4_ = minsdisplay;
		_tmp5_ = g_strconcat ("0", _tmp4_, NULL);
		result = _tmp5_;
		_g_free0 (minsdisplay);
		return result;
	}
	result = minsdisplay;
	return result;
}


static const gchar*
string_to_string (const gchar* self)
{
	const gchar* result = NULL;
	g_return_val_if_fail (self != NULL, NULL);
	result = self;
	return result;
}


static gchar*
show_time_time_window_get_localtime (ShowTimeTimeWindow* self,
                                     GDateTime* newtime)
{
	gchar* result = NULL;
	gint mins = 0;
	gint hrs = 0;
	gint newhrs = 0;
	gint _tmp0_;
	gchar* add = NULL;
	gchar* _tmp1_;
	gchar* showmins = NULL;
	gint _tmp2_;
	gchar* _tmp3_;
	gboolean _tmp4_;
	gchar* hrs_display = NULL;
	gint _tmp22_;
	gchar* _tmp23_;
	const gchar* _tmp24_;
	const gchar* _tmp25_;
	const gchar* _tmp26_;
	const gchar* _tmp27_;
	const gchar* _tmp28_;
	const gchar* _tmp29_;
	gchar* _tmp30_;
	g_return_val_if_fail (self != NULL, NULL);
	g_return_val_if_fail (newtime != NULL, NULL);
	mins = g_date_time_get_minute (newtime);
	hrs = g_date_time_get_hour (newtime);
	_tmp0_ = hrs;
	newhrs = _tmp0_;
	_tmp1_ = g_strdup ("");
	add = _tmp1_;
	_tmp2_ = mins;
	_tmp3_ = show_time_time_window_fix_mins (self, _tmp2_);
	showmins = _tmp3_;
	_tmp4_ = self->priv->twelvehrs;
	if (_tmp4_) {
		gchar* _tmp5_;
		gint _tmp6_;
		gint _tmp10_;
		gint _tmp11_;
		gint _tmp13_;
		gchar* _tmp14_;
		gchar* _tmp15_;
		const gchar* _tmp16_;
		const gchar* _tmp17_;
		const gchar* _tmp18_;
		const gchar* _tmp19_;
		gchar* _tmp20_;
		gchar* _tmp21_;
		_tmp5_ = g_strconcat (" ", _ ("AM"), NULL);
		_g_free0 (add);
		add = _tmp5_;
		_tmp6_ = hrs;
		if (_tmp6_ > 12) {
			gint _tmp7_;
			_tmp7_ = hrs;
			newhrs = _tmp7_ - 12;
		} else {
			gint _tmp8_;
			_tmp8_ = hrs;
			if (_tmp8_ < 1) {
				gint _tmp9_;
				_tmp9_ = hrs;
				newhrs = _tmp9_ + 12;
			}
		}
		_tmp10_ = hrs;
		_tmp11_ = _tmp10_;
		if ((12 <= _tmp11_) && (_tmp11_ < 24)) {
			gchar* _tmp12_;
			_tmp12_ = g_strconcat (" ", _ ("PM"), NULL);
			_g_free0 (add);
			add = _tmp12_;
		}
		_tmp13_ = newhrs;
		_tmp14_ = g_strdup_printf ("%i", _tmp13_);
		_tmp15_ = _tmp14_;
		_tmp16_ = showmins;
		_tmp17_ = string_to_string (_tmp16_);
		_tmp18_ = add;
		_tmp19_ = string_to_string (_tmp18_);
		_tmp20_ = g_strconcat (_tmp15_, ":", _tmp17_, _tmp19_, NULL);
		_tmp21_ = _tmp20_;
		_g_free0 (_tmp15_);
		result = _tmp21_;
		_g_free0 (showmins);
		_g_free0 (add);
		return result;
	}
	_tmp22_ = newhrs;
	_tmp23_ = show_time_time_window_fix_mins (self, _tmp22_);
	hrs_display = _tmp23_;
	_tmp24_ = hrs_display;
	_tmp25_ = string_to_string (_tmp24_);
	_tmp26_ = showmins;
	_tmp27_ = string_to_string (_tmp26_);
	_tmp28_ = add;
	_tmp29_ = string_to_string (_tmp28_);
	_tmp30_ = g_strconcat (_tmp25_, ":", _tmp27_, _tmp29_, NULL);
	result = _tmp30_;
	_g_free0 (hrs_display);
	_g_free0 (showmins);
	_g_free0 (add);
	return result;
}


static gchar*
show_time_time_window_get_dateformat (ShowTimeTimeWindow* self)
{
	gchar* result = NULL;
	gchar* date_fmt = NULL;
	GSettings* _tmp0_;
	gchar* _tmp1_;
	const gchar* _tmp2_;
	g_return_val_if_fail (self != NULL, NULL);
	_tmp0_ = show_time_showtime_settings;
	_tmp1_ = g_settings_get_string (_tmp0_, "dateformat");
	date_fmt = _tmp1_;
	_tmp2_ = date_fmt;
	if (g_strcmp0 (_tmp2_, "") == 0) {
		gchar* _tmp3_;
		_tmp3_ = show_time_time_window_read_dateformat (self);
		result = _tmp3_;
		_g_free0 (date_fmt);
		return result;
	}
	result = date_fmt;
	return result;
}


static gchar*
show_time_time_window_read_dateformat (ShowTimeTimeWindow* self)
{
	gchar* result = NULL;
	gchar** date_data = NULL;
	gchar* _tmp0_;
	gchar* _tmp1_;
	gchar* _tmp2_;
	gchar* _tmp3_;
	gchar* _tmp4_;
	gchar* _tmp5_;
	gchar* _tmp6_;
	gchar* _tmp7_;
	gchar* _tmp8_;
	gchar* _tmp9_;
	gchar* _tmp10_;
	gchar* _tmp11_;
	gchar* _tmp12_;
	gchar* _tmp13_;
	gchar* _tmp14_;
	gchar* _tmp15_;
	gchar* _tmp16_;
	gchar* _tmp17_;
	gchar** _tmp18_;
	gint date_data_length1;
	gint _date_data_size_;
	gchar** full_data = NULL;
	gchar* _tmp19_;
	gchar* _tmp20_;
	gchar* _tmp21_;
	gchar** _tmp22_;
	gint full_data_length1;
	gint _full_data_size_;
	gchar* cmd = NULL;
	gchar* _tmp23_;
	gchar* output = NULL;
	gchar* _tmp24_;
	gchar* match = NULL;
	gchar* _tmp25_;
	GError * _inner_error_ = NULL;
	g_return_val_if_fail (self != NULL, NULL);
	_tmp0_ = g_strdup ("%a");
	_tmp1_ = g_strdup ("%A");
	_tmp2_ = g_strdup ("%-a");
	_tmp3_ = g_strdup ("%-A");
	_tmp4_ = g_strdup ("%_a");
	_tmp5_ = g_strdup ("%_A");
	_tmp6_ = g_strdup ("%e");
	_tmp7_ = g_strdup ("%-e");
	_tmp8_ = g_strdup ("%_e");
	_tmp9_ = g_strdup ("%d");
	_tmp10_ = g_strdup ("%-d");
	_tmp11_ = g_strdup ("%_d");
	_tmp12_ = g_strdup ("%b");
	_tmp13_ = g_strdup ("%-b");
	_tmp14_ = g_strdup ("%_b");
	_tmp15_ = g_strdup ("%h");
	_tmp16_ = g_strdup ("%-h");
	_tmp17_ = g_strdup ("%_h");
	_tmp18_ = g_new0 (gchar*, 18 + 1);
	_tmp18_[0] = _tmp0_;
	_tmp18_[1] = _tmp1_;
	_tmp18_[2] = _tmp2_;
	_tmp18_[3] = _tmp3_;
	_tmp18_[4] = _tmp4_;
	_tmp18_[5] = _tmp5_;
	_tmp18_[6] = _tmp6_;
	_tmp18_[7] = _tmp7_;
	_tmp18_[8] = _tmp8_;
	_tmp18_[9] = _tmp9_;
	_tmp18_[10] = _tmp10_;
	_tmp18_[11] = _tmp11_;
	_tmp18_[12] = _tmp12_;
	_tmp18_[13] = _tmp13_;
	_tmp18_[14] = _tmp14_;
	_tmp18_[15] = _tmp15_;
	_tmp18_[16] = _tmp16_;
	_tmp18_[17] = _tmp17_;
	date_data = _tmp18_;
	date_data_length1 = 18;
	_date_data_size_ = date_data_length1;
	_tmp19_ = g_strdup ("%A");
	_tmp20_ = g_strdup ("%e");
	_tmp21_ = g_strdup ("%B");
	_tmp22_ = g_new0 (gchar*, 3 + 1);
	_tmp22_[0] = _tmp19_;
	_tmp22_[1] = _tmp20_;
	_tmp22_[2] = _tmp21_;
	full_data = _tmp22_;
	full_data_length1 = 3;
	_full_data_size_ = full_data_length1;
	_tmp23_ = g_strdup ("locale date_fmt");
	cmd = _tmp23_;
	_tmp24_ = g_strdup ("");
	output = _tmp24_;
	_tmp25_ = g_strdup ("");
	match = _tmp25_;
	{
		GString* builder = NULL;
		GString* _tmp26_;
		gchar* _tmp27_ = NULL;
		gchar** output_data = NULL;
		const gchar* _tmp28_;
		gchar** _tmp29_;
		gchar** _tmp30_;
		gint output_data_length1;
		gint _output_data_size_;
		gchar** _tmp31_;
		gint _tmp31__length1;
		const gchar* _tmp44_;
		gchar* _tmp45_;
		_tmp26_ = g_string_new ("");
		builder = _tmp26_;
		g_spawn_command_line_sync (cmd, &_tmp27_, NULL, NULL, &_inner_error_);
		_g_free0 (output);
		output = _tmp27_;
		if (G_UNLIKELY (_inner_error_ != NULL)) {
			_g_string_free0 (builder);
			goto __catch2_g_error;
		}
		_tmp28_ = output;
		_tmp30_ = _tmp29_ = g_strsplit (_tmp28_, " ", 0);
		output_data = _tmp30_;
		output_data_length1 = _vala_array_length (_tmp29_);
		_output_data_size_ = output_data_length1;
		_tmp31_ = output_data;
		_tmp31__length1 = output_data_length1;
		{
			gchar** s_collection = NULL;
			gint s_collection_length1 = 0;
			gint _s_collection_size_ = 0;
			gint s_it = 0;
			s_collection = _tmp31_;
			s_collection_length1 = _tmp31__length1;
			for (s_it = 0; s_it < _tmp31__length1; s_it = s_it + 1) {
				gchar* _tmp32_;
				gchar* s = NULL;
				_tmp32_ = g_strdup (s_collection[s_it]);
				s = _tmp32_;
				{
					gint index = 0;
					const gchar* _tmp33_;
					gchar* _tmp34_;
					gchar* _tmp35_;
					gint _tmp36_;
					gint _tmp37_;
					_tmp33_ = s;
					_tmp34_ = string_replace (_tmp33_, ",", "");
					_tmp35_ = _tmp34_;
					_tmp36_ = show_time_time_window_get_stringindex (self, date_data, date_data_length1, _tmp35_);
					_g_free0 (_tmp35_);
					index = _tmp36_;
					_tmp37_ = index;
					if (_tmp37_ != -1) {
						gint corr = 0;
						gint _tmp38_;
						gint _tmp39_;
						const gchar* _tmp40_;
						gchar* _tmp41_;
						const gchar* _tmp42_;
						GString* _tmp43_;
						_tmp38_ = index;
						corr = (gint) (_tmp38_ / 6);
						_tmp39_ = corr;
						_tmp40_ = full_data[_tmp39_];
						_tmp41_ = g_strdup (_tmp40_);
						_g_free0 (match);
						match = _tmp41_;
						_tmp42_ = match;
						_tmp43_ = g_string_append (builder, _tmp42_);
						g_string_append (_tmp43_, " ");
					}
					_g_free0 (s);
				}
			}
		}
		_tmp44_ = builder->str;
		_tmp45_ = g_strdup (_tmp44_);
		result = _tmp45_;
		output_data = (_vala_array_free (output_data, output_data_length1, (GDestroyNotify) g_free), NULL);
		_g_string_free0 (builder);
		_g_free0 (match);
		_g_free0 (output);
		_g_free0 (cmd);
		full_data = (_vala_array_free (full_data, full_data_length1, (GDestroyNotify) g_free), NULL);
		date_data = (_vala_array_free (date_data, date_data_length1, (GDestroyNotify) g_free), NULL);
		return result;
	}
	goto __finally2;
	__catch2_g_error:
	{
		GError* e = NULL;
		gchar* _tmp46_;
		e = _inner_error_;
		_inner_error_ = NULL;
		_tmp46_ = g_strdup ("");
		result = _tmp46_;
		_g_error_free0 (e);
		_g_free0 (match);
		_g_free0 (output);
		_g_free0 (cmd);
		full_data = (_vala_array_free (full_data, full_data_length1, (GDestroyNotify) g_free), NULL);
		date_data = (_vala_array_free (date_data, date_data_length1, (GDestroyNotify) g_free), NULL);
		return result;
	}
	__finally2:
	_g_free0 (match);
	_g_free0 (output);
	_g_free0 (cmd);
	full_data = (_vala_array_free (full_data, full_data_length1, (GDestroyNotify) g_free), NULL);
	date_data = (_vala_array_free (date_data, date_data_length1, (GDestroyNotify) g_free), NULL);
	g_critical ("file %s: line %d: uncaught error: %s (%s, %d)", __FILE__, __LINE__, _inner_error_->message, g_quark_to_string (_inner_error_->domain), _inner_error_->code);
	g_clear_error (&_inner_error_);
	return NULL;
}


static void
show_time_time_window_toggle_draggable (ShowTimeTimeWindow* self)
{
	gboolean draggable = FALSE;
	GSettings* _tmp0_;
	gboolean _tmp1_;
	g_return_if_fail (self != NULL);
	_tmp0_ = show_time_showtime_settings;
	draggable = g_settings_get_boolean (_tmp0_, "draggable");
	_tmp1_ = draggable;
	if (_tmp1_) {
		gtk_window_set_type_hint ((GtkWindow*) self, GDK_WINDOW_TYPE_HINT_NORMAL);
	} else {
		gtk_window_set_type_hint ((GtkWindow*) self, GDK_WINDOW_TYPE_HINT_DESKTOP);
	}
}


static void
show_time_time_window_update_appearance (ShowTimeTimeWindow* self)
{
	gint al = 0;
	GtkLabel* _tmp0_;
	gint _tmp1_;
	GtkLabel* _tmp2_;
	gint _tmp3_;
	GSettings* _tmp4_;
	GSettings* _tmp5_;
	ShowTimeShowTimeappearance* _tmp6_;
	GdkScreen* _tmp7_;
	GdkScreen* _tmp8_;
	g_return_if_fail (self != NULL);
	al = 1;
	if (show_time_time_window_get_leftalign (self)) {
		al = 0;
	}
	_tmp0_ = show_time_timelabel;
	_tmp1_ = al;
	gtk_label_set_xalign (_tmp0_, (gfloat) _tmp1_);
	_tmp2_ = show_time_datelabel;
	_tmp3_ = al;
	gtk_label_set_xalign (_tmp2_, (gfloat) _tmp3_);
	_tmp4_ = show_time_showtime_settings;
	show_time_linespacing = g_settings_get_int (_tmp4_, "linespacing");
	_tmp5_ = show_time_showtime_settings;
	self->priv->twelvehrs = g_settings_get_boolean (_tmp5_, "twelvehrs");
	_tmp6_ = self->priv->appearance;
	_tmp7_ = gtk_window_get_screen ((GtkWindow*) self);
	_tmp8_ = _tmp7_;
	show_time_show_timeappearance_get_appearance (_tmp6_, _tmp8_);
	show_time_time_window_update_interface (self);
}


static void
show_time_time_window_update_interface (ShowTimeTimeWindow* self)
{
	GDateTime* now = NULL;
	GDateTime* _tmp0_;
	gchar* datestring = NULL;
	const gchar* _tmp1_;
	gchar* _tmp2_;
	ShowTimeShowTimeappearance* _tmp3_;
	gchar* _tmp4_;
	gchar* _tmp5_;
	g_return_if_fail (self != NULL);
	_tmp0_ = g_date_time_new_now_local ();
	now = _tmp0_;
	_tmp1_ = self->priv->dateformat;
	_tmp2_ = g_date_time_format (now, _tmp1_);
	datestring = _tmp2_;
	_tmp3_ = self->priv->appearance;
	_tmp4_ = show_time_time_window_get_localtime (self, now);
	_tmp5_ = _tmp4_;
	show_time_show_timeappearance_get_hexcolor (_tmp3_, _tmp5_, datestring);
	_g_free0 (_tmp5_);
	_g_free0 (datestring);
	_g_date_time_unref0 (now);
}


static gboolean
show_time_time_window_check_onapplet (ShowTimeTimeWindow* self)
{
	gboolean result = FALSE;
	gchar* cmd = NULL;
	gchar* _tmp0_;
	gchar* output = NULL;
	gboolean check = FALSE;
	const gchar* _tmp5_;
	GError * _inner_error_ = NULL;
	g_return_val_if_fail (self != NULL, FALSE);
	_tmp0_ = g_strdup ("dconf dump /com/solus-project/budgie-panel/applets/");
	cmd = _tmp0_;
	{
		const gchar* _tmp1_;
		gchar* _tmp2_ = NULL;
		_tmp1_ = cmd;
		g_spawn_command_line_sync (_tmp1_, &_tmp2_, NULL, NULL, &_inner_error_);
		_g_free0 (output);
		output = _tmp2_;
		if (G_UNLIKELY (_inner_error_ != NULL)) {
			gboolean _tmp3_ = FALSE;
			if (_inner_error_->domain == G_SPAWN_ERROR) {
				goto __catch3_g_spawn_error;
			}
			_g_free0 (output);
			_g_free0 (cmd);
			g_critical ("file %s: line %d: unexpected error: %s (%s, %d)", __FILE__, __LINE__, _inner_error_->message, g_quark_to_string (_inner_error_->domain), _inner_error_->code);
			g_clear_error (&_inner_error_);
			return _tmp3_;
		}
	}
	goto __finally3;
	__catch3_g_spawn_error:
	{
		GError* e = NULL;
		e = _inner_error_;
		_inner_error_ = NULL;
		result = TRUE;
		_g_error_free0 (e);
		_g_free0 (output);
		_g_free0 (cmd);
		return result;
	}
	__finally3:
	if (G_UNLIKELY (_inner_error_ != NULL)) {
		gboolean _tmp4_ = FALSE;
		_g_free0 (output);
		_g_free0 (cmd);
		g_critical ("file %s: line %d: uncaught error: %s (%s, %d)", __FILE__, __LINE__, _inner_error_->message, g_quark_to_string (_inner_error_->domain), _inner_error_->code);
		g_clear_error (&_inner_error_);
		return _tmp4_;
	}
	_tmp5_ = output;
	check = string_contains (_tmp5_, "ShowTime");
	result = check;
	_g_free0 (output);
	_g_free0 (cmd);
	return result;
}


static gint
show_time_time_window_convert_remainder_topositive (ShowTimeTimeWindow* self,
                                                    gdouble subj,
                                                    gdouble rem)
{
	gint result = 0;
	g_return_val_if_fail (self != NULL, 0);
	if (rem < ((gdouble) 0)) {
		result = (gint) (subj + rem);
		return result;
	}
	result = (gint) rem;
	return result;
}


static gint*
show_time_time_window_calibrate_time (ShowTimeTimeWindow* self,
                                      int* result_length1)
{
	gint* result = NULL;
	GDateTime* curr_time = NULL;
	GDateTime* _tmp0_;
	gint curr_sec = 0;
	gint curr_remaining = 0;
	gint remaining_cycles = 0;
	gint* _tmp1_;
	gint* _tmp2_;
	gint _tmp2__length1;
	g_return_val_if_fail (self != NULL, NULL);
	_tmp0_ = g_date_time_new_now_local ();
	curr_time = _tmp0_;
	curr_sec = g_date_time_get_second (curr_time);
	curr_remaining = show_time_time_window_convert_remainder_topositive (self, (gdouble) 6, remainder (60 - ((gdouble) curr_sec), (gdouble) 6));
	remaining_cycles = (gint) ((60 - curr_sec) / 6);
	_tmp1_ = g_new0 (gint, 2);
	_tmp1_[0] = curr_remaining;
	_tmp1_[1] = remaining_cycles;
	_tmp2_ = _tmp1_;
	_tmp2__length1 = 2;
	if (result_length1) {
		*result_length1 = _tmp2__length1;
	}
	result = _tmp2_;
	_g_date_time_unref0 (curr_time);
	return result;
}


static gboolean
____lambda4_ (ShowTimeTimeWindow* self)
{
	gboolean result = FALSE;
	show_time_time_window_update_interface (self);
	result = FALSE;
	return result;
}


static gboolean
_____lambda4__gsource_func (gpointer self)
{
	gboolean result;
	result = ____lambda4_ ((ShowTimeTimeWindow*) self);
	return result;
}


static gboolean
show_time_time_window_run_time (ShowTimeTimeWindow* self)
{
	gboolean result = FALSE;
	gint _tmp0_;
	gint* _tmp1_;
	gint* _tmp2_;
	gint _tmp2__length1;
	gint* calibrated_loopdata = NULL;
	gint _tmp3_;
	gint* _tmp4_;
	gint calibrated_loopdata_length1;
	gint _calibrated_loopdata_size_;
	gint loopcycle = 0;
	g_return_val_if_fail (self != NULL, FALSE);
	show_time_time_window_update_interface (self);
	_tmp1_ = show_time_time_window_calibrate_time (self, &_tmp0_);
	_tmp2_ = _tmp1_;
	_tmp2__length1 = _tmp0_;
	_tmp2_ = (g_free (_tmp2_), NULL);
	_tmp4_ = show_time_time_window_calibrate_time (self, &_tmp3_);
	calibrated_loopdata = _tmp4_;
	calibrated_loopdata_length1 = _tmp3_;
	_calibrated_loopdata_size_ = calibrated_loopdata_length1;
	loopcycle = 0;
	while (TRUE) {
		gint _tmp5_;
		gint _tmp8_;
		gint* _tmp9_;
		gint _tmp9__length1;
		gint _tmp10_;
		gint _tmp13_;
		gint _tmp14_;
		if (!show_time_time_window_check_onapplet (self)) {
			gtk_main_quit ();
			break;
		}
		_tmp5_ = loopcycle;
		if (_tmp5_ == 0) {
			gint* _tmp6_;
			gint _tmp6__length1;
			gint _tmp7_;
			_tmp6_ = calibrated_loopdata;
			_tmp6__length1 = calibrated_loopdata_length1;
			_tmp7_ = _tmp6_[0];
			self->priv->next_time = _tmp7_;
		}
		_tmp8_ = loopcycle;
		_tmp9_ = calibrated_loopdata;
		_tmp9__length1 = calibrated_loopdata_length1;
		_tmp10_ = _tmp9_[1];
		if (_tmp8_ >= _tmp10_) {
			gint _tmp11_;
			gint* _tmp12_;
			_tmp12_ = show_time_time_window_calibrate_time (self, &_tmp11_);
			calibrated_loopdata = (g_free (calibrated_loopdata), NULL);
			calibrated_loopdata = _tmp12_;
			calibrated_loopdata_length1 = _tmp11_;
			_calibrated_loopdata_size_ = calibrated_loopdata_length1;
			loopcycle = 0;
			g_idle_add_full (G_PRIORITY_DEFAULT_IDLE, _____lambda4__gsource_func, g_object_ref (self), g_object_unref);
		}
		_tmp13_ = loopcycle;
		loopcycle = _tmp13_ + 1;
		_tmp14_ = self->priv->next_time;
		g_usleep ((gulong) (_tmp14_ * 1000000));
		self->priv->next_time = 6;
	}
	result = FALSE;
	calibrated_loopdata = (g_free (calibrated_loopdata), NULL);
	return result;
}


static void
show_time_time_window_class_init (ShowTimeTimeWindowClass * klass)
{
	show_time_time_window_parent_class = g_type_class_peek_parent (klass);
	g_type_class_adjust_private_offset (klass, &ShowTimeTimeWindow_private_offset);
	G_OBJECT_CLASS (klass)->finalize = show_time_time_window_finalize;
}


static void
show_time_time_window_instance_init (ShowTimeTimeWindow * self)
{
	self->priv = show_time_time_window_get_instance_private (self);
}


static void
show_time_time_window_finalize (GObject * obj)
{
	ShowTimeTimeWindow * self;
	self = G_TYPE_CHECK_INSTANCE_CAST (obj, SHOW_TIME_TYPE_TIME_WINDOW, ShowTimeTimeWindow);
	_g_free0 (self->priv->dateformat);
	_show_time_show_timeappearance_unref0 (self->priv->appearance);
	G_OBJECT_CLASS (show_time_time_window_parent_class)->finalize (obj);
}


GType
show_time_time_window_get_type (void)
{
	static volatile gsize show_time_time_window_type_id__volatile = 0;
	if (g_once_init_enter (&show_time_time_window_type_id__volatile)) {
		static const GTypeInfo g_define_type_info = { sizeof (ShowTimeTimeWindowClass), (GBaseInitFunc) NULL, (GBaseFinalizeFunc) NULL, (GClassInitFunc) show_time_time_window_class_init, (GClassFinalizeFunc) NULL, NULL, sizeof (ShowTimeTimeWindow), 0, (GInstanceInitFunc) show_time_time_window_instance_init, NULL };
		GType show_time_time_window_type_id;
		show_time_time_window_type_id = g_type_register_static (gtk_window_get_type (), "ShowTimeTimeWindow", &g_define_type_info, 0);
		ShowTimeTimeWindow_private_offset = g_type_add_instance_private (show_time_time_window_type_id, sizeof (ShowTimeTimeWindowPrivate));
		g_once_init_leave (&show_time_time_window_type_id__volatile, show_time_time_window_type_id);
	}
	return show_time_time_window_type_id__volatile;
}


void
show_time_main (gchar** args,
                int args_length1)
{
	ShowTimeTimeWindow* _tmp0_;
	ShowTimeTimeWindow* _tmp1_;
	gtk_init (&args_length1, &args);
	_tmp0_ = show_time_time_window_new ();
	g_object_ref_sink (_tmp0_);
	_tmp1_ = _tmp0_;
	_g_object_unref0 (_tmp1_);
	gtk_main ();
}


int
main (int argc,
      char ** argv)
{
	show_time_main (argv, argc);
	return 0;
}


static void
_vala_array_destroy (gpointer array,
                     gint array_length,
                     GDestroyNotify destroy_func)
{
	if ((array != NULL) && (destroy_func != NULL)) {
		int i;
		for (i = 0; i < array_length; i = i + 1) {
			if (((gpointer*) array)[i] != NULL) {
				destroy_func (((gpointer*) array)[i]);
			}
		}
	}
}


static void
_vala_array_free (gpointer array,
                  gint array_length,
                  GDestroyNotify destroy_func)
{
	_vala_array_destroy (array, array_length, destroy_func);
	g_free (array);
}


static gint
_vala_array_length (gpointer array)
{
	int length;
	length = 0;
	if (array) {
		while (((gpointer*) array)[length]) {
			length++;
		}
	}
	return length;
}



