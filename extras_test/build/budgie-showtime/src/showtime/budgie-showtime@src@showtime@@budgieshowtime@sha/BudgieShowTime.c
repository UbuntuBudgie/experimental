/* BudgieShowTime.c generated by valac 0.42.2, the Vala compiler
 * generated from BudgieShowTime.vala, do not modify */



#include <glib.h>
#include <glib-object.h>
#include <stdlib.h>
#include <string.h>
#include <gtk/gtk.h>
#include <gio/gio.h>
#include <glib/gi18n-lib.h>
#include <gdk/gdk.h>
#include <float.h>
#include <math.h>
#include <libpeas/peas.h>
#include <plugin.h>
#include <locale.h>
#include <config.h>


#define BUDGIE_SHOW_TIME_APPLET_TYPE_BUDGIE_SHOW_TIME_SETTINGS (budgie_show_time_applet_budgie_show_time_settings_get_type ())
#define BUDGIE_SHOW_TIME_APPLET_BUDGIE_SHOW_TIME_SETTINGS(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), BUDGIE_SHOW_TIME_APPLET_TYPE_BUDGIE_SHOW_TIME_SETTINGS, BudgieShowTimeAppletBudgieShowTimeSettings))
#define BUDGIE_SHOW_TIME_APPLET_BUDGIE_SHOW_TIME_SETTINGS_CLASS(klass) (G_TYPE_CHECK_CLASS_CAST ((klass), BUDGIE_SHOW_TIME_APPLET_TYPE_BUDGIE_SHOW_TIME_SETTINGS, BudgieShowTimeAppletBudgieShowTimeSettingsClass))
#define BUDGIE_SHOW_TIME_APPLET_IS_BUDGIE_SHOW_TIME_SETTINGS(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), BUDGIE_SHOW_TIME_APPLET_TYPE_BUDGIE_SHOW_TIME_SETTINGS))
#define BUDGIE_SHOW_TIME_APPLET_IS_BUDGIE_SHOW_TIME_SETTINGS_CLASS(klass) (G_TYPE_CHECK_CLASS_TYPE ((klass), BUDGIE_SHOW_TIME_APPLET_TYPE_BUDGIE_SHOW_TIME_SETTINGS))
#define BUDGIE_SHOW_TIME_APPLET_BUDGIE_SHOW_TIME_SETTINGS_GET_CLASS(obj) (G_TYPE_INSTANCE_GET_CLASS ((obj), BUDGIE_SHOW_TIME_APPLET_TYPE_BUDGIE_SHOW_TIME_SETTINGS, BudgieShowTimeAppletBudgieShowTimeSettingsClass))

typedef struct _BudgieShowTimeAppletBudgieShowTimeSettings BudgieShowTimeAppletBudgieShowTimeSettings;
typedef struct _BudgieShowTimeAppletBudgieShowTimeSettingsClass BudgieShowTimeAppletBudgieShowTimeSettingsClass;
typedef struct _BudgieShowTimeAppletBudgieShowTimeSettingsPrivate BudgieShowTimeAppletBudgieShowTimeSettingsPrivate;
enum  {
	BUDGIE_SHOW_TIME_APPLET_BUDGIE_SHOW_TIME_SETTINGS_0_PROPERTY,
	BUDGIE_SHOW_TIME_APPLET_BUDGIE_SHOW_TIME_SETTINGS_NUM_PROPERTIES
};
static GParamSpec* budgie_show_time_applet_budgie_show_time_settings_properties[BUDGIE_SHOW_TIME_APPLET_BUDGIE_SHOW_TIME_SETTINGS_NUM_PROPERTIES];
#define _g_object_unref0(var) ((var == NULL) ? NULL : (var = (g_object_unref (var), NULL)))
#define _g_free0(var) (var = (g_free (var), NULL))
#define _g_error_free0(var) ((var == NULL) ? NULL : (var = (g_error_free (var), NULL)))

#define BUDGIE_SHOW_TIME_APPLET_TYPE_PLUGIN (budgie_show_time_applet_plugin_get_type ())
#define BUDGIE_SHOW_TIME_APPLET_PLUGIN(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), BUDGIE_SHOW_TIME_APPLET_TYPE_PLUGIN, BudgieShowTimeAppletPlugin))
#define BUDGIE_SHOW_TIME_APPLET_PLUGIN_CLASS(klass) (G_TYPE_CHECK_CLASS_CAST ((klass), BUDGIE_SHOW_TIME_APPLET_TYPE_PLUGIN, BudgieShowTimeAppletPluginClass))
#define BUDGIE_SHOW_TIME_APPLET_IS_PLUGIN(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), BUDGIE_SHOW_TIME_APPLET_TYPE_PLUGIN))
#define BUDGIE_SHOW_TIME_APPLET_IS_PLUGIN_CLASS(klass) (G_TYPE_CHECK_CLASS_TYPE ((klass), BUDGIE_SHOW_TIME_APPLET_TYPE_PLUGIN))
#define BUDGIE_SHOW_TIME_APPLET_PLUGIN_GET_CLASS(obj) (G_TYPE_INSTANCE_GET_CLASS ((obj), BUDGIE_SHOW_TIME_APPLET_TYPE_PLUGIN, BudgieShowTimeAppletPluginClass))

typedef struct _BudgieShowTimeAppletPlugin BudgieShowTimeAppletPlugin;
typedef struct _BudgieShowTimeAppletPluginClass BudgieShowTimeAppletPluginClass;
typedef struct _BudgieShowTimeAppletPluginPrivate BudgieShowTimeAppletPluginPrivate;
enum  {
	BUDGIE_SHOW_TIME_APPLET_PLUGIN_0_PROPERTY,
	BUDGIE_SHOW_TIME_APPLET_PLUGIN_NUM_PROPERTIES
};
static GParamSpec* budgie_show_time_applet_plugin_properties[BUDGIE_SHOW_TIME_APPLET_PLUGIN_NUM_PROPERTIES];

#define BUDGIE_SHOW_TIME_APPLET_TYPE_APPLET (budgie_show_time_applet_applet_get_type ())
#define BUDGIE_SHOW_TIME_APPLET_APPLET(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), BUDGIE_SHOW_TIME_APPLET_TYPE_APPLET, BudgieShowTimeAppletApplet))
#define BUDGIE_SHOW_TIME_APPLET_APPLET_CLASS(klass) (G_TYPE_CHECK_CLASS_CAST ((klass), BUDGIE_SHOW_TIME_APPLET_TYPE_APPLET, BudgieShowTimeAppletAppletClass))
#define BUDGIE_SHOW_TIME_APPLET_IS_APPLET(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), BUDGIE_SHOW_TIME_APPLET_TYPE_APPLET))
#define BUDGIE_SHOW_TIME_APPLET_IS_APPLET_CLASS(klass) (G_TYPE_CHECK_CLASS_TYPE ((klass), BUDGIE_SHOW_TIME_APPLET_TYPE_APPLET))
#define BUDGIE_SHOW_TIME_APPLET_APPLET_GET_CLASS(obj) (G_TYPE_INSTANCE_GET_CLASS ((obj), BUDGIE_SHOW_TIME_APPLET_TYPE_APPLET, BudgieShowTimeAppletAppletClass))

typedef struct _BudgieShowTimeAppletApplet BudgieShowTimeAppletApplet;
typedef struct _BudgieShowTimeAppletAppletClass BudgieShowTimeAppletAppletClass;
#define __vala_PeasPluginInfo_free0(var) ((var == NULL) ? NULL : (var = (_vala_PeasPluginInfo_free (var), NULL)))
typedef struct _BudgieShowTimeAppletAppletPrivate BudgieShowTimeAppletAppletPrivate;
enum  {
	BUDGIE_SHOW_TIME_APPLET_APPLET_0_PROPERTY,
	BUDGIE_SHOW_TIME_APPLET_APPLET_UUID_PROPERTY,
	BUDGIE_SHOW_TIME_APPLET_APPLET_NUM_PROPERTIES
};
static GParamSpec* budgie_show_time_applet_applet_properties[BUDGIE_SHOW_TIME_APPLET_APPLET_NUM_PROPERTIES];

struct _BudgieShowTimeAppletBudgieShowTimeSettings {
	GtkGrid parent_instance;
	BudgieShowTimeAppletBudgieShowTimeSettingsPrivate * priv;
};

struct _BudgieShowTimeAppletBudgieShowTimeSettingsClass {
	GtkGridClass parent_class;
};

struct _BudgieShowTimeAppletBudgieShowTimeSettingsPrivate {
	GSettings* settings;
	GtkButton* dragbutton;
	GtkCheckButton* leftalign;
	GtkCheckButton* twelve_hrs;
	GtkFontButton* timefontbutton;
	GtkFontButton* datefontbutton;
	GtkColorButton* timecolor;
	GtkColorButton* datecolor;
	GtkSpinButton* linespacing;
	GSettings* showtime_settings;
	GtkLabel* draghint;
	gchar* dragposition;
	gchar* fixposition;
};

struct _BudgieShowTimeAppletPlugin {
	PeasExtensionBase parent_instance;
	BudgieShowTimeAppletPluginPrivate * priv;
};

struct _BudgieShowTimeAppletPluginClass {
	PeasExtensionBaseClass parent_class;
};

struct _BudgieShowTimeAppletApplet {
	BudgieApplet parent_instance;
	BudgieShowTimeAppletAppletPrivate * priv;
};

struct _BudgieShowTimeAppletAppletClass {
	BudgieAppletClass parent_class;
};

struct _BudgieShowTimeAppletAppletPrivate {
	gchar* _uuid;
};


extern gchar* budgie_show_time_applet_moduledir;
gchar* budgie_show_time_applet_moduledir = NULL;
static gint BudgieShowTimeAppletBudgieShowTimeSettings_private_offset;
static gpointer budgie_show_time_applet_budgie_show_time_settings_parent_class = NULL;
static GType budgie_show_time_applet_budgie_show_time_settings_type_id = 0;
static gpointer budgie_show_time_applet_plugin_parent_class = NULL;
static BudgiePluginIface * budgie_show_time_applet_plugin_budgie_plugin_parent_iface = NULL;
static GType budgie_show_time_applet_plugin_type_id = 0;
static gint BudgieShowTimeAppletApplet_private_offset;
static gpointer budgie_show_time_applet_applet_parent_class = NULL;
static GType budgie_show_time_applet_applet_type_id = 0;

GType budgie_show_time_applet_budgie_show_time_settings_get_type (void) G_GNUC_CONST;
BudgieShowTimeAppletBudgieShowTimeSettings* budgie_show_time_applet_budgie_show_time_settings_new (GSettings* settings);
BudgieShowTimeAppletBudgieShowTimeSettings* budgie_show_time_applet_budgie_show_time_settings_construct (GType object_type,
                                                                                                         GSettings* settings);
static void budgie_show_time_applet_budgie_show_time_settings_set_initialvals (BudgieShowTimeAppletBudgieShowTimeSettings* self);
static void budgie_show_time_applet_budgie_show_time_settings_connect_widgets (BudgieShowTimeAppletBudgieShowTimeSettings* self);
static void budgie_show_time_applet_budgie_show_time_settings_set_newlinespacing (BudgieShowTimeAppletBudgieShowTimeSettings* self,
                                                                           GtkSpinButton* button,
                                                                           const gchar* setting);
static void budgie_show_time_applet_budgie_show_time_settings_set_initiallinespacing (BudgieShowTimeAppletBudgieShowTimeSettings* self,
                                                                               GtkSpinButton* button,
                                                                               const gchar* setting);
static void budgie_show_time_applet_budgie_show_time_settings_set_initialdrag (BudgieShowTimeAppletBudgieShowTimeSettings* self);
static void budgie_show_time_applet_budgie_show_time_settings_set_initialcolor (BudgieShowTimeAppletBudgieShowTimeSettings* self,
                                                                         GtkColorButton* button,
                                                                         const gchar* setting);
static void budgie_show_time_applet_budgie_show_time_settings_set_initialcheck (BudgieShowTimeAppletBudgieShowTimeSettings* self,
                                                                         GtkCheckButton* button,
                                                                         const gchar* setting);
static void budgie_show_time_applet_budgie_show_time_settings_set_initialfont (BudgieShowTimeAppletBudgieShowTimeSettings* self,
                                                                        GtkFontButton* button,
                                                                        const gchar* setting);
static void __lambda4_ (BudgieShowTimeAppletBudgieShowTimeSettings* self);
static void ___lambda4__gtk_spin_button_value_changed (GtkSpinButton* _sender,
                                                gpointer self);
static void budgie_show_time_applet_budgie_show_time_settings_toggle_drag (BudgieShowTimeAppletBudgieShowTimeSettings* self);
static void _budgie_show_time_applet_budgie_show_time_settings_toggle_drag_gtk_button_clicked (GtkButton* _sender,
                                                                                        gpointer self);
static void __lambda5_ (BudgieShowTimeAppletBudgieShowTimeSettings* self);
static void budgie_show_time_applet_budgie_show_time_settings_set_hexcolor (BudgieShowTimeAppletBudgieShowTimeSettings* self,
                                                                     GtkColorButton* button,
                                                                     const gchar* setting);
static void ___lambda5__gtk_color_button_color_set (GtkColorButton* _sender,
                                             gpointer self);
static void __lambda6_ (BudgieShowTimeAppletBudgieShowTimeSettings* self);
static void ___lambda6__gtk_color_button_color_set (GtkColorButton* _sender,
                                             gpointer self);
static void __lambda7_ (BudgieShowTimeAppletBudgieShowTimeSettings* self);
static void budgie_show_time_applet_budgie_show_time_settings_set_newfont (BudgieShowTimeAppletBudgieShowTimeSettings* self,
                                                                    GtkFontButton* button,
                                                                    const gchar* newfont);
static void ___lambda7__gtk_font_button_font_set (GtkFontButton* _sender,
                                           gpointer self);
static void __lambda8_ (BudgieShowTimeAppletBudgieShowTimeSettings* self);
static void ___lambda8__gtk_font_button_font_set (GtkFontButton* _sender,
                                           gpointer self);
static void __lambda9_ (BudgieShowTimeAppletBudgieShowTimeSettings* self);
static void budgie_show_time_applet_budgie_show_time_settings_toggle_value (BudgieShowTimeAppletBudgieShowTimeSettings* self,
                                                                     GtkCheckButton* button,
                                                                     const gchar* setting);
static void ___lambda9__gtk_toggle_button_toggled (GtkToggleButton* _sender,
                                            gpointer self);
static void __lambda10_ (BudgieShowTimeAppletBudgieShowTimeSettings* self);
static void ___lambda10__gtk_toggle_button_toggled (GtkToggleButton* _sender,
                                             gpointer self);
static void budgie_show_time_applet_budgie_show_time_settings_finalize (GObject * obj);
GType budgie_show_time_applet_plugin_get_type (void) G_GNUC_CONST;
static BudgieApplet* budgie_show_time_applet_plugin_real_get_panel_widget (BudgiePlugin* base,
                                                                    const gchar* uuid);
static PeasPluginInfo* _vala_PeasPluginInfo_copy (PeasPluginInfo* self);
BudgieShowTimeAppletApplet* budgie_show_time_applet_applet_new (void);
BudgieShowTimeAppletApplet* budgie_show_time_applet_applet_construct (GType object_type);
GType budgie_show_time_applet_applet_get_type (void) G_GNUC_CONST;
static void _vala_PeasPluginInfo_free (PeasPluginInfo* self);
BudgieShowTimeAppletPlugin* budgie_show_time_applet_plugin_new (void);
BudgieShowTimeAppletPlugin* budgie_show_time_applet_plugin_construct (GType object_type);
static gboolean budgie_show_time_applet_applet_real_supports_settings (BudgieApplet* base);
static GtkWidget* budgie_show_time_applet_applet_real_get_settings_ui (BudgieApplet* base);
const gchar* budgie_show_time_applet_applet_get_uuid (BudgieShowTimeAppletApplet* self);
static void budgie_show_time_applet_applet_open_window (BudgieShowTimeAppletApplet* self,
                                                 const gchar* path);
static gboolean budgie_show_time_applet_applet_check_onwindow (BudgieShowTimeAppletApplet* self,
                                                        const gchar* path);
void budgie_show_time_applet_applet_initialiseLocaleLanguageSupport (BudgieShowTimeAppletApplet* self);
void budgie_show_time_applet_applet_set_uuid (BudgieShowTimeAppletApplet* self,
                                              const gchar* value);
static void budgie_show_time_applet_applet_finalize (GObject * obj);
static void _vala_budgie_show_time_applet_applet_get_property (GObject * object,
                                                        guint property_id,
                                                        GValue * value,
                                                        GParamSpec * pspec);
static void _vala_budgie_show_time_applet_applet_set_property (GObject * object,
                                                        guint property_id,
                                                        const GValue * value,
                                                        GParamSpec * pspec);
void peas_register_types (GTypeModule* module);
GType budgie_show_time_applet_budgie_show_time_settings_register_type (GTypeModule * module);
GType budgie_show_time_applet_plugin_register_type (GTypeModule * module);
GType budgie_show_time_applet_applet_register_type (GTypeModule * module);
static void _vala_array_destroy (gpointer array,
                          gint array_length,
                          GDestroyNotify destroy_func);
static void _vala_array_free (gpointer array,
                       gint array_length,
                       GDestroyNotify destroy_func);


static inline gpointer
budgie_show_time_applet_budgie_show_time_settings_get_instance_private (BudgieShowTimeAppletBudgieShowTimeSettings* self)
{
	return G_STRUCT_MEMBER_P (self, BudgieShowTimeAppletBudgieShowTimeSettings_private_offset);
}


static gpointer
_g_object_ref0 (gpointer self)
{
	return self ? g_object_ref (self) : NULL;
}


BudgieShowTimeAppletBudgieShowTimeSettings*
budgie_show_time_applet_budgie_show_time_settings_construct (GType object_type,
                                                             GSettings* settings)
{
	BudgieShowTimeAppletBudgieShowTimeSettings * self = NULL;
	GSettings* _tmp0_;
	gchar* _tmp1_;
	gchar* _tmp2_;
	gchar* stsettings_css = NULL;
	gchar* _tmp3_;
	gchar* dragtext = NULL;
	gchar* _tmp4_;
	GSettings* _tmp5_;
	GdkScreen* screen = NULL;
	GdkScreen* _tmp6_;
	GdkScreen* _tmp7_;
	GtkLabel* position_header = NULL;
	GtkLabel* _tmp8_;
	GtkBox* dragbox = NULL;
	GtkBox* _tmp9_;
	GtkButton* _tmp10_;
	GtkButton* _tmp11_;
	GtkButton* _tmp12_;
	GtkButton* _tmp13_;
	GtkButton* _tmp14_;
	GtkLabel* _tmp15_;
	GtkLabel* _tmp16_;
	GtkLabel* _tmp17_;
	GtkLabel* time_header = NULL;
	GtkLabel* _tmp18_;
	GtkBox* timebox = NULL;
	GtkBox* _tmp19_;
	GtkFontButton* _tmp20_;
	GtkFontButton* _tmp21_;
	GtkColorButton* _tmp22_;
	GtkColorButton* _tmp23_;
	GtkLabel* spacelabel3 = NULL;
	GtkLabel* _tmp24_;
	GtkLabel* date_header = NULL;
	GtkLabel* _tmp25_;
	GtkBox* datebox = NULL;
	GtkBox* _tmp26_;
	GtkFontButton* _tmp27_;
	GtkFontButton* _tmp28_;
	GtkColorButton* _tmp29_;
	GtkColorButton* _tmp30_;
	GtkLabel* spacelabel5 = NULL;
	GtkLabel* _tmp31_;
	GtkLabel* general_header = NULL;
	GtkLabel* _tmp32_;
	GtkCheckButton* _tmp33_;
	GtkCheckButton* _tmp34_;
	GtkCheckButton* _tmp35_;
	GtkCheckButton* _tmp36_;
	GtkLabel* spacelabel6 = NULL;
	GtkLabel* _tmp37_;
	GtkBox* linespacebox = NULL;
	GtkBox* _tmp38_;
	GtkSpinButton* _tmp39_;
	GtkSpinButton* _tmp40_;
	GtkLabel* spinlabel = NULL;
	GtkLabel* _tmp41_;
	GtkCssProvider* css_provider = NULL;
	GtkCssProvider* _tmp42_;
	GtkLabel** boldones = NULL;
	GtkLabel* _tmp43_;
	GtkLabel* _tmp44_;
	GtkLabel* _tmp45_;
	GtkLabel* _tmp46_;
	GtkLabel** _tmp47_;
	gint boldones_length1;
	gint _boldones_size_;
	GtkLabel** _tmp48_;
	gint _tmp48__length1;
	GError * _inner_error_ = NULL;
	self = (BudgieShowTimeAppletBudgieShowTimeSettings*) g_object_new (object_type, NULL);
	_tmp0_ = _g_object_ref0 (settings);
	_g_object_unref0 (self->priv->settings);
	self->priv->settings = _tmp0_;
	_tmp1_ = g_strdup (_ ("Drag position"));
	_g_free0 (self->priv->dragposition);
	self->priv->dragposition = _tmp1_;
	_tmp2_ = g_strdup (_ ("Save position"));
	_g_free0 (self->priv->fixposition);
	self->priv->fixposition = _tmp2_;
	_tmp3_ = g_strdup (".st_header {font-weight: bold;}");
	stsettings_css = _tmp3_;
	_tmp4_ = g_strdup (_ ("Enable Super + drag to set time position. Click ´Save position´ to sav" \
"e."));
	dragtext = _tmp4_;
	_tmp5_ = g_settings_new ("org.ubuntubudgie.plugins.budgie-showtime");
	_g_object_unref0 (self->priv->showtime_settings);
	self->priv->showtime_settings = _tmp5_;
	_tmp6_ = gtk_widget_get_screen ((GtkWidget*) self);
	_tmp7_ = _g_object_ref0 (_tmp6_);
	screen = _tmp7_;
	gtk_grid_set_row_spacing ((GtkGrid*) self, (guint) 10);
	_tmp8_ = (GtkLabel*) gtk_label_new (_ ("Position"));
	g_object_ref_sink (_tmp8_);
	position_header = _tmp8_;
	gtk_label_set_xalign (position_header, (gfloat) 0);
	gtk_grid_attach ((GtkGrid*) self, (GtkWidget*) position_header, 0, 0, 10, 1);
	_tmp9_ = (GtkBox*) gtk_box_new (GTK_ORIENTATION_HORIZONTAL, 0);
	g_object_ref_sink (_tmp9_);
	dragbox = _tmp9_;
	gtk_grid_attach ((GtkGrid*) self, (GtkWidget*) dragbox, 0, 1, 2, 1);
	_tmp10_ = (GtkButton*) gtk_button_new ();
	g_object_ref_sink (_tmp10_);
	_g_object_unref0 (self->priv->dragbutton);
	self->priv->dragbutton = _tmp10_;
	_tmp11_ = self->priv->dragbutton;
	gtk_widget_set_tooltip_text ((GtkWidget*) _tmp11_, dragtext);
	_tmp12_ = self->priv->dragbutton;
	gtk_button_set_label (_tmp12_, _ ("Drag position"));
	_tmp13_ = self->priv->dragbutton;
	gtk_widget_set_size_request ((GtkWidget*) _tmp13_, 150, 10);
	_tmp14_ = self->priv->dragbutton;
	gtk_box_pack_start (dragbox, (GtkWidget*) _tmp14_, FALSE, FALSE, (guint) 0);
	_tmp15_ = (GtkLabel*) gtk_label_new ("");
	g_object_ref_sink (_tmp15_);
	_g_object_unref0 (self->priv->draghint);
	self->priv->draghint = _tmp15_;
	_tmp16_ = self->priv->draghint;
	gtk_label_set_xalign (_tmp16_, (gfloat) 0.5);
	_tmp17_ = self->priv->draghint;
	gtk_grid_attach ((GtkGrid*) self, (GtkWidget*) _tmp17_, 0, 2, 2, 1);
	_tmp18_ = (GtkLabel*) gtk_label_new (_ ("Time font, size & color"));
	g_object_ref_sink (_tmp18_);
	time_header = _tmp18_;
	gtk_label_set_xalign (time_header, (gfloat) 0);
	gtk_grid_attach ((GtkGrid*) self, (GtkWidget*) time_header, 0, 6, 10, 1);
	_tmp19_ = (GtkBox*) gtk_box_new (GTK_ORIENTATION_HORIZONTAL, 0);
	g_object_ref_sink (_tmp19_);
	timebox = _tmp19_;
	gtk_grid_attach ((GtkGrid*) self, (GtkWidget*) timebox, 0, 7, 10, 1);
	_tmp20_ = (GtkFontButton*) gtk_font_button_new ();
	g_object_ref_sink (_tmp20_);
	_g_object_unref0 (self->priv->timefontbutton);
	self->priv->timefontbutton = _tmp20_;
	_tmp21_ = self->priv->timefontbutton;
	gtk_box_pack_start (timebox, (GtkWidget*) _tmp21_, FALSE, FALSE, (guint) 0);
	_tmp22_ = (GtkColorButton*) gtk_color_button_new ();
	g_object_ref_sink (_tmp22_);
	_g_object_unref0 (self->priv->timecolor);
	self->priv->timecolor = _tmp22_;
	_tmp23_ = self->priv->timecolor;
	gtk_box_pack_start (timebox, (GtkWidget*) _tmp23_, FALSE, FALSE, (guint) 0);
	_tmp24_ = (GtkLabel*) gtk_label_new ("");
	g_object_ref_sink (_tmp24_);
	spacelabel3 = _tmp24_;
	gtk_grid_attach ((GtkGrid*) self, (GtkWidget*) spacelabel3, 1, 8, 1, 1);
	_tmp25_ = (GtkLabel*) gtk_label_new (_ ("Date font, size & color"));
	g_object_ref_sink (_tmp25_);
	date_header = _tmp25_;
	gtk_label_set_xalign (date_header, (gfloat) 0);
	gtk_grid_attach ((GtkGrid*) self, (GtkWidget*) date_header, 0, 10, 10, 1);
	_tmp26_ = (GtkBox*) gtk_box_new (GTK_ORIENTATION_HORIZONTAL, 0);
	g_object_ref_sink (_tmp26_);
	datebox = _tmp26_;
	gtk_grid_attach ((GtkGrid*) self, (GtkWidget*) datebox, 0, 11, 10, 1);
	_tmp27_ = (GtkFontButton*) gtk_font_button_new ();
	g_object_ref_sink (_tmp27_);
	_g_object_unref0 (self->priv->datefontbutton);
	self->priv->datefontbutton = _tmp27_;
	_tmp28_ = self->priv->datefontbutton;
	gtk_box_pack_start (datebox, (GtkWidget*) _tmp28_, FALSE, FALSE, (guint) 0);
	_tmp29_ = (GtkColorButton*) gtk_color_button_new ();
	g_object_ref_sink (_tmp29_);
	_g_object_unref0 (self->priv->datecolor);
	self->priv->datecolor = _tmp29_;
	_tmp30_ = self->priv->datecolor;
	gtk_box_pack_start (datebox, (GtkWidget*) _tmp30_, FALSE, FALSE, (guint) 0);
	_tmp31_ = (GtkLabel*) gtk_label_new ("");
	g_object_ref_sink (_tmp31_);
	spacelabel5 = _tmp31_;
	gtk_grid_attach ((GtkGrid*) self, (GtkWidget*) spacelabel5, 1, 12, 1, 1);
	_tmp32_ = (GtkLabel*) gtk_label_new (_ ("Miscellaneous"));
	g_object_ref_sink (_tmp32_);
	general_header = _tmp32_;
	gtk_label_set_xalign (general_header, (gfloat) 0);
	gtk_grid_attach ((GtkGrid*) self, (GtkWidget*) general_header, 0, 20, 10, 1);
	_tmp33_ = (GtkCheckButton*) gtk_check_button_new_with_label (_ ("Left align text"));
	g_object_ref_sink (_tmp33_);
	_g_object_unref0 (self->priv->leftalign);
	self->priv->leftalign = _tmp33_;
	_tmp34_ = self->priv->leftalign;
	gtk_grid_attach ((GtkGrid*) self, (GtkWidget*) _tmp34_, 0, 21, 10, 1);
	_tmp35_ = (GtkCheckButton*) gtk_check_button_new_with_label (_ ("Use 12hr time format"));
	g_object_ref_sink (_tmp35_);
	_g_object_unref0 (self->priv->twelve_hrs);
	self->priv->twelve_hrs = _tmp35_;
	_tmp36_ = self->priv->twelve_hrs;
	gtk_grid_attach ((GtkGrid*) self, (GtkWidget*) _tmp36_, 0, 22, 10, 1);
	_tmp37_ = (GtkLabel*) gtk_label_new ("");
	g_object_ref_sink (_tmp37_);
	spacelabel6 = _tmp37_;
	gtk_grid_attach ((GtkGrid*) self, (GtkWidget*) spacelabel6, 1, 23, 1, 1);
	_tmp38_ = (GtkBox*) gtk_box_new (GTK_ORIENTATION_HORIZONTAL, 10);
	g_object_ref_sink (_tmp38_);
	linespacebox = _tmp38_;
	gtk_grid_attach ((GtkGrid*) self, (GtkWidget*) linespacebox, 0, 30, 3, 1);
	_tmp39_ = (GtkSpinButton*) gtk_spin_button_new_with_range ((gdouble) -50, (gdouble) 50, (gdouble) 1);
	g_object_ref_sink (_tmp39_);
	_g_object_unref0 (self->priv->linespacing);
	self->priv->linespacing = _tmp39_;
	_tmp40_ = self->priv->linespacing;
	gtk_box_pack_start (linespacebox, (GtkWidget*) _tmp40_, FALSE, FALSE, (guint) 0);
	_tmp41_ = (GtkLabel*) gtk_label_new (_ ("Linespacing"));
	g_object_ref_sink (_tmp41_);
	spinlabel = _tmp41_;
	gtk_box_pack_start (linespacebox, (GtkWidget*) spinlabel, FALSE, FALSE, (guint) 0);
	_tmp42_ = gtk_css_provider_new ();
	css_provider = _tmp42_;
	{
		gtk_css_provider_load_from_data (css_provider, stsettings_css, (gssize) -1, &_inner_error_);
		if (G_UNLIKELY (_inner_error_ != NULL)) {
			goto __catch0_g_error;
		}
		gtk_style_context_add_provider_for_screen (screen, (GtkStyleProvider*) css_provider, (guint) GTK_STYLE_PROVIDER_PRIORITY_USER);
	}
	goto __finally0;
	__catch0_g_error:
	{
		GError* e = NULL;
		e = _inner_error_;
		_inner_error_ = NULL;
		_g_error_free0 (e);
	}
	__finally0:
	if (G_UNLIKELY (_inner_error_ != NULL)) {
		_g_object_unref0 (css_provider);
		_g_object_unref0 (spinlabel);
		_g_object_unref0 (linespacebox);
		_g_object_unref0 (spacelabel6);
		_g_object_unref0 (general_header);
		_g_object_unref0 (spacelabel5);
		_g_object_unref0 (datebox);
		_g_object_unref0 (date_header);
		_g_object_unref0 (spacelabel3);
		_g_object_unref0 (timebox);
		_g_object_unref0 (time_header);
		_g_object_unref0 (dragbox);
		_g_object_unref0 (position_header);
		_g_object_unref0 (screen);
		_g_free0 (dragtext);
		_g_free0 (stsettings_css);
		g_critical ("file %s: line %d: uncaught error: %s (%s, %d)", __FILE__, __LINE__, _inner_error_->message, g_quark_to_string (_inner_error_->domain), _inner_error_->code);
		g_clear_error (&_inner_error_);
		return NULL;
	}
	_tmp43_ = _g_object_ref0 (time_header);
	_tmp44_ = _g_object_ref0 (date_header);
	_tmp45_ = _g_object_ref0 (general_header);
	_tmp46_ = _g_object_ref0 (position_header);
	_tmp47_ = g_new0 (GtkLabel*, 4 + 1);
	_tmp47_[0] = _tmp43_;
	_tmp47_[1] = _tmp44_;
	_tmp47_[2] = _tmp45_;
	_tmp47_[3] = _tmp46_;
	boldones = _tmp47_;
	boldones_length1 = 4;
	_boldones_size_ = boldones_length1;
	_tmp48_ = boldones;
	_tmp48__length1 = boldones_length1;
	{
		GtkLabel** l_collection = NULL;
		gint l_collection_length1 = 0;
		gint _l_collection_size_ = 0;
		gint l_it = 0;
		l_collection = _tmp48_;
		l_collection_length1 = _tmp48__length1;
		for (l_it = 0; l_it < _tmp48__length1; l_it = l_it + 1) {
			GtkLabel* _tmp49_;
			GtkLabel* l = NULL;
			_tmp49_ = _g_object_ref0 (l_collection[l_it]);
			l = _tmp49_;
			{
				GtkLabel* _tmp50_;
				GtkStyleContext* _tmp51_;
				_tmp50_ = l;
				_tmp51_ = gtk_widget_get_style_context ((GtkWidget*) _tmp50_);
				gtk_style_context_add_class (_tmp51_, "st_header");
				_g_object_unref0 (l);
			}
		}
	}
	budgie_show_time_applet_budgie_show_time_settings_set_initialvals (self);
	budgie_show_time_applet_budgie_show_time_settings_connect_widgets (self);
	gtk_widget_show_all ((GtkWidget*) self);
	boldones = (_vala_array_free (boldones, boldones_length1, (GDestroyNotify) g_object_unref), NULL);
	_g_object_unref0 (css_provider);
	_g_object_unref0 (spinlabel);
	_g_object_unref0 (linespacebox);
	_g_object_unref0 (spacelabel6);
	_g_object_unref0 (general_header);
	_g_object_unref0 (spacelabel5);
	_g_object_unref0 (datebox);
	_g_object_unref0 (date_header);
	_g_object_unref0 (spacelabel3);
	_g_object_unref0 (timebox);
	_g_object_unref0 (time_header);
	_g_object_unref0 (dragbox);
	_g_object_unref0 (position_header);
	_g_object_unref0 (screen);
	_g_free0 (dragtext);
	_g_free0 (stsettings_css);
	return self;
}


BudgieShowTimeAppletBudgieShowTimeSettings*
budgie_show_time_applet_budgie_show_time_settings_new (GSettings* settings)
{
	return budgie_show_time_applet_budgie_show_time_settings_construct (BUDGIE_SHOW_TIME_APPLET_TYPE_BUDGIE_SHOW_TIME_SETTINGS, settings);
}


static void
budgie_show_time_applet_budgie_show_time_settings_set_newlinespacing (BudgieShowTimeAppletBudgieShowTimeSettings* self,
                                                                      GtkSpinButton* button,
                                                                      const gchar* setting)
{
	gint newval = 0;
	GSettings* _tmp0_;
	g_return_if_fail (self != NULL);
	g_return_if_fail (button != NULL);
	g_return_if_fail (setting != NULL);
	newval = (gint) gtk_spin_button_get_value (button);
	_tmp0_ = self->priv->showtime_settings;
	g_settings_set_int (_tmp0_, setting, newval);
}


static void
budgie_show_time_applet_budgie_show_time_settings_set_initialvals (BudgieShowTimeAppletBudgieShowTimeSettings* self)
{
	GtkSpinButton* _tmp0_;
	GtkColorButton* _tmp1_;
	GtkColorButton* _tmp2_;
	GtkCheckButton* _tmp3_;
	GtkCheckButton* _tmp4_;
	GtkFontButton* _tmp5_;
	GtkFontButton* _tmp6_;
	g_return_if_fail (self != NULL);
	_tmp0_ = self->priv->linespacing;
	budgie_show_time_applet_budgie_show_time_settings_set_initiallinespacing (self, _tmp0_, "linespacing");
	budgie_show_time_applet_budgie_show_time_settings_set_initialdrag (self);
	_tmp1_ = self->priv->timecolor;
	budgie_show_time_applet_budgie_show_time_settings_set_initialcolor (self, _tmp1_, "timefontcolor");
	_tmp2_ = self->priv->datecolor;
	budgie_show_time_applet_budgie_show_time_settings_set_initialcolor (self, _tmp2_, "datefontcolor");
	_tmp3_ = self->priv->leftalign;
	budgie_show_time_applet_budgie_show_time_settings_set_initialcheck (self, _tmp3_, "leftalign");
	_tmp4_ = self->priv->twelve_hrs;
	budgie_show_time_applet_budgie_show_time_settings_set_initialcheck (self, _tmp4_, "twelvehrs");
	_tmp5_ = self->priv->timefontbutton;
	budgie_show_time_applet_budgie_show_time_settings_set_initialfont (self, _tmp5_, "timefont");
	_tmp6_ = self->priv->datefontbutton;
	budgie_show_time_applet_budgie_show_time_settings_set_initialfont (self, _tmp6_, "datefont");
}


static void
budgie_show_time_applet_budgie_show_time_settings_set_initialfont (BudgieShowTimeAppletBudgieShowTimeSettings* self,
                                                                   GtkFontButton* button,
                                                                   const gchar* setting)
{
	gchar* currval = NULL;
	GSettings* _tmp0_;
	gchar* _tmp1_;
	g_return_if_fail (self != NULL);
	g_return_if_fail (button != NULL);
	g_return_if_fail (setting != NULL);
	_tmp0_ = self->priv->showtime_settings;
	_tmp1_ = g_settings_get_string (_tmp0_, setting);
	currval = _tmp1_;
	gtk_font_chooser_set_font ((GtkFontChooser*) button, currval);
	_g_free0 (currval);
}


static void
budgie_show_time_applet_budgie_show_time_settings_set_initiallinespacing (BudgieShowTimeAppletBudgieShowTimeSettings* self,
                                                                          GtkSpinButton* button,
                                                                          const gchar* setting)
{
	gint currval = 0;
	GSettings* _tmp0_;
	g_return_if_fail (self != NULL);
	g_return_if_fail (button != NULL);
	g_return_if_fail (setting != NULL);
	_tmp0_ = self->priv->showtime_settings;
	currval = g_settings_get_int (_tmp0_, setting);
	gtk_spin_button_set_value (button, (gdouble) currval);
}


static void
budgie_show_time_applet_budgie_show_time_settings_set_initialcheck (BudgieShowTimeAppletBudgieShowTimeSettings* self,
                                                                    GtkCheckButton* button,
                                                                    const gchar* setting)
{
	gboolean currval = FALSE;
	GSettings* _tmp0_;
	g_return_if_fail (self != NULL);
	g_return_if_fail (button != NULL);
	g_return_if_fail (setting != NULL);
	_tmp0_ = self->priv->showtime_settings;
	currval = g_settings_get_boolean (_tmp0_, setting);
	gtk_toggle_button_set_active ((GtkToggleButton*) button, currval);
}


static void
__lambda4_ (BudgieShowTimeAppletBudgieShowTimeSettings* self)
{
	GtkSpinButton* _tmp0_;
	_tmp0_ = self->priv->linespacing;
	budgie_show_time_applet_budgie_show_time_settings_set_newlinespacing (self, _tmp0_, "linespacing");
}


static void
___lambda4__gtk_spin_button_value_changed (GtkSpinButton* _sender,
                                           gpointer self)
{
	__lambda4_ ((BudgieShowTimeAppletBudgieShowTimeSettings*) self);
}


static void
_budgie_show_time_applet_budgie_show_time_settings_toggle_drag_gtk_button_clicked (GtkButton* _sender,
                                                                                   gpointer self)
{
	budgie_show_time_applet_budgie_show_time_settings_toggle_drag ((BudgieShowTimeAppletBudgieShowTimeSettings*) self);
}


static void
__lambda5_ (BudgieShowTimeAppletBudgieShowTimeSettings* self)
{
	GtkColorButton* _tmp0_;
	_tmp0_ = self->priv->timecolor;
	budgie_show_time_applet_budgie_show_time_settings_set_hexcolor (self, _tmp0_, "timefontcolor");
}


static void
___lambda5__gtk_color_button_color_set (GtkColorButton* _sender,
                                        gpointer self)
{
	__lambda5_ ((BudgieShowTimeAppletBudgieShowTimeSettings*) self);
}


static void
__lambda6_ (BudgieShowTimeAppletBudgieShowTimeSettings* self)
{
	GtkColorButton* _tmp0_;
	_tmp0_ = self->priv->datecolor;
	budgie_show_time_applet_budgie_show_time_settings_set_hexcolor (self, _tmp0_, "datefontcolor");
}


static void
___lambda6__gtk_color_button_color_set (GtkColorButton* _sender,
                                        gpointer self)
{
	__lambda6_ ((BudgieShowTimeAppletBudgieShowTimeSettings*) self);
}


static void
__lambda7_ (BudgieShowTimeAppletBudgieShowTimeSettings* self)
{
	GtkFontButton* _tmp0_;
	_tmp0_ = self->priv->timefontbutton;
	budgie_show_time_applet_budgie_show_time_settings_set_newfont (self, _tmp0_, "timefont");
}


static void
___lambda7__gtk_font_button_font_set (GtkFontButton* _sender,
                                      gpointer self)
{
	__lambda7_ ((BudgieShowTimeAppletBudgieShowTimeSettings*) self);
}


static void
__lambda8_ (BudgieShowTimeAppletBudgieShowTimeSettings* self)
{
	GtkFontButton* _tmp0_;
	_tmp0_ = self->priv->datefontbutton;
	budgie_show_time_applet_budgie_show_time_settings_set_newfont (self, _tmp0_, "datefont");
}


static void
___lambda8__gtk_font_button_font_set (GtkFontButton* _sender,
                                      gpointer self)
{
	__lambda8_ ((BudgieShowTimeAppletBudgieShowTimeSettings*) self);
}


static void
__lambda9_ (BudgieShowTimeAppletBudgieShowTimeSettings* self)
{
	GtkCheckButton* _tmp0_;
	_tmp0_ = self->priv->leftalign;
	budgie_show_time_applet_budgie_show_time_settings_toggle_value (self, _tmp0_, "leftalign");
}


static void
___lambda9__gtk_toggle_button_toggled (GtkToggleButton* _sender,
                                       gpointer self)
{
	__lambda9_ ((BudgieShowTimeAppletBudgieShowTimeSettings*) self);
}


static void
__lambda10_ (BudgieShowTimeAppletBudgieShowTimeSettings* self)
{
	GtkCheckButton* _tmp0_;
	_tmp0_ = self->priv->twelve_hrs;
	budgie_show_time_applet_budgie_show_time_settings_toggle_value (self, _tmp0_, "twelvehrs");
}


static void
___lambda10__gtk_toggle_button_toggled (GtkToggleButton* _sender,
                                        gpointer self)
{
	__lambda10_ ((BudgieShowTimeAppletBudgieShowTimeSettings*) self);
}


static void
budgie_show_time_applet_budgie_show_time_settings_connect_widgets (BudgieShowTimeAppletBudgieShowTimeSettings* self)
{
	GtkSpinButton* _tmp0_;
	GtkButton* _tmp1_;
	GtkColorButton* _tmp2_;
	GtkColorButton* _tmp3_;
	GtkFontButton* _tmp4_;
	GtkFontButton* _tmp5_;
	GtkCheckButton* _tmp6_;
	GtkCheckButton* _tmp7_;
	g_return_if_fail (self != NULL);
	_tmp0_ = self->priv->linespacing;
	g_signal_connect_object (_tmp0_, "value-changed", (GCallback) ___lambda4__gtk_spin_button_value_changed, self, 0);
	_tmp1_ = self->priv->dragbutton;
	g_signal_connect_object (_tmp1_, "clicked", (GCallback) _budgie_show_time_applet_budgie_show_time_settings_toggle_drag_gtk_button_clicked, self, 0);
	_tmp2_ = self->priv->timecolor;
	g_signal_connect_object (_tmp2_, "color-set", (GCallback) ___lambda5__gtk_color_button_color_set, self, 0);
	_tmp3_ = self->priv->datecolor;
	g_signal_connect_object (_tmp3_, "color-set", (GCallback) ___lambda6__gtk_color_button_color_set, self, 0);
	_tmp4_ = self->priv->timefontbutton;
	g_signal_connect_object (_tmp4_, "font-set", (GCallback) ___lambda7__gtk_font_button_font_set, self, 0);
	_tmp5_ = self->priv->datefontbutton;
	g_signal_connect_object (_tmp5_, "font-set", (GCallback) ___lambda8__gtk_font_button_font_set, self, 0);
	_tmp6_ = self->priv->leftalign;
	g_signal_connect_object ((GtkToggleButton*) _tmp6_, "toggled", (GCallback) ___lambda9__gtk_toggle_button_toggled, self, 0);
	_tmp7_ = self->priv->twelve_hrs;
	g_signal_connect_object ((GtkToggleButton*) _tmp7_, "toggled", (GCallback) ___lambda10__gtk_toggle_button_toggled, self, 0);
}


static void
budgie_show_time_applet_budgie_show_time_settings_set_hexcolor (BudgieShowTimeAppletBudgieShowTimeSettings* self,
                                                                GtkColorButton* button,
                                                                const gchar* setting)
{
	GdkRGBA c = {0};
	GdkRGBA _tmp0_ = {0};
	gchar* s = NULL;
	GdkRGBA _tmp1_;
	gdouble _tmp2_;
	GdkRGBA _tmp3_;
	gdouble _tmp4_;
	GdkRGBA _tmp5_;
	gdouble _tmp6_;
	gchar* _tmp7_;
	gchar* _tmp8_;
	gchar* _tmp9_;
	gchar* _tmp10_;
	GSettings* _tmp11_;
	g_return_if_fail (self != NULL);
	g_return_if_fail (button != NULL);
	g_return_if_fail (setting != NULL);
	gtk_color_chooser_get_rgba ((GtkColorChooser*) button, &_tmp0_);
	c = _tmp0_;
	_tmp1_ = c;
	_tmp2_ = _tmp1_.red;
	_tmp3_ = c;
	_tmp4_ = _tmp3_.green;
	_tmp5_ = c;
	_tmp6_ = _tmp5_.blue;
	_tmp7_ = g_strdup_printf ("#%02x%02x%02x", (guint) round (_tmp2_ * 255), (guint) round (_tmp4_ * 255), (guint) round (_tmp6_ * 255));
	_tmp8_ = _tmp7_;
	_tmp9_ = g_utf8_strup (_tmp8_, (gssize) -1);
	_tmp10_ = _tmp9_;
	_g_free0 (_tmp8_);
	s = _tmp10_;
	_tmp11_ = self->priv->showtime_settings;
	g_settings_set_string (_tmp11_, setting, s);
	_g_free0 (s);
}


static void
budgie_show_time_applet_budgie_show_time_settings_set_newfont (BudgieShowTimeAppletBudgieShowTimeSettings* self,
                                                               GtkFontButton* button,
                                                               const gchar* newfont)
{
	GSettings* _tmp0_;
	gchar* _tmp1_;
	gchar* _tmp2_;
	g_return_if_fail (self != NULL);
	g_return_if_fail (button != NULL);
	g_return_if_fail (newfont != NULL);
	_tmp0_ = self->priv->showtime_settings;
	_tmp1_ = gtk_font_chooser_get_font ((GtkFontChooser*) button);
	_tmp2_ = _tmp1_;
	g_settings_set_string (_tmp0_, newfont, _tmp2_);
	_g_free0 (_tmp2_);
}


static void
budgie_show_time_applet_budgie_show_time_settings_toggle_value (BudgieShowTimeAppletBudgieShowTimeSettings* self,
                                                                GtkCheckButton* button,
                                                                const gchar* setting)
{
	gboolean newval = FALSE;
	GSettings* _tmp0_;
	g_return_if_fail (self != NULL);
	g_return_if_fail (button != NULL);
	g_return_if_fail (setting != NULL);
	newval = gtk_toggle_button_get_active ((GtkToggleButton*) button);
	_tmp0_ = self->priv->showtime_settings;
	g_settings_set_boolean (_tmp0_, setting, newval);
}


static void
budgie_show_time_applet_budgie_show_time_settings_set_initialcolor (BudgieShowTimeAppletBudgieShowTimeSettings* self,
                                                                    GtkColorButton* button,
                                                                    const gchar* setting)
{
	GdkRGBA currcolor = {0};
	GSettings* _tmp0_;
	gchar* _tmp1_;
	gchar* _tmp2_;
	GdkRGBA _tmp3_;
	g_return_if_fail (self != NULL);
	g_return_if_fail (button != NULL);
	g_return_if_fail (setting != NULL);
	memset (&currcolor, 0, sizeof (GdkRGBA));
	_tmp0_ = self->priv->showtime_settings;
	_tmp1_ = g_settings_get_string (_tmp0_, setting);
	_tmp2_ = _tmp1_;
	gdk_rgba_parse (&currcolor, _tmp2_);
	_g_free0 (_tmp2_);
	_tmp3_ = currcolor;
	gtk_color_chooser_set_rgba ((GtkColorChooser*) button, &_tmp3_);
}


static void
budgie_show_time_applet_budgie_show_time_settings_set_initialdrag (BudgieShowTimeAppletBudgieShowTimeSettings* self)
{
	gboolean curr_draggable = FALSE;
	GSettings* _tmp0_;
	GtkButton* _tmp1_;
	const gchar* _tmp2_;
	gboolean _tmp3_;
	g_return_if_fail (self != NULL);
	_tmp0_ = self->priv->showtime_settings;
	curr_draggable = g_settings_get_boolean (_tmp0_, "draggable");
	_tmp1_ = self->priv->dragbutton;
	_tmp2_ = self->priv->dragposition;
	gtk_button_set_label (_tmp1_, _tmp2_);
	_tmp3_ = curr_draggable;
	if (_tmp3_) {
		GtkButton* _tmp4_;
		const gchar* _tmp5_;
		_tmp4_ = self->priv->dragbutton;
		_tmp5_ = self->priv->fixposition;
		gtk_button_set_label (_tmp4_, _tmp5_);
	}
}


static void
budgie_show_time_applet_budgie_show_time_settings_toggle_drag (BudgieShowTimeAppletBudgieShowTimeSettings* self)
{
	gboolean curr_draggable = FALSE;
	GSettings* _tmp0_;
	GSettings* _tmp1_;
	gboolean _tmp2_;
	gboolean _tmp3_;
	g_return_if_fail (self != NULL);
	_tmp0_ = self->priv->showtime_settings;
	curr_draggable = g_settings_get_boolean (_tmp0_, "draggable");
	_tmp1_ = self->priv->showtime_settings;
	_tmp2_ = curr_draggable;
	g_settings_set_boolean (_tmp1_, "draggable", !_tmp2_);
	_tmp3_ = curr_draggable;
	if (_tmp3_) {
		GtkButton* _tmp4_;
		const gchar* _tmp5_;
		GtkLabel* _tmp6_;
		_tmp4_ = self->priv->dragbutton;
		_tmp5_ = self->priv->dragposition;
		gtk_button_set_label (_tmp4_, _tmp5_);
		_tmp6_ = self->priv->draghint;
		gtk_label_set_text (_tmp6_, "");
	} else {
		GtkButton* _tmp7_;
		const gchar* _tmp8_;
		GtkLabel* _tmp9_;
		_tmp7_ = self->priv->dragbutton;
		_tmp8_ = self->priv->fixposition;
		gtk_button_set_label (_tmp7_, _tmp8_);
		_tmp9_ = self->priv->draghint;
		gtk_label_set_text (_tmp9_, _ ("Super + drag"));
	}
}


static void
budgie_show_time_applet_budgie_show_time_settings_class_init (BudgieShowTimeAppletBudgieShowTimeSettingsClass * klass)
{
	budgie_show_time_applet_budgie_show_time_settings_parent_class = g_type_class_peek_parent (klass);
	g_type_class_adjust_private_offset (klass, &BudgieShowTimeAppletBudgieShowTimeSettings_private_offset);
	G_OBJECT_CLASS (klass)->finalize = budgie_show_time_applet_budgie_show_time_settings_finalize;
}


static void
budgie_show_time_applet_budgie_show_time_settings_instance_init (BudgieShowTimeAppletBudgieShowTimeSettings * self)
{
	self->priv = budgie_show_time_applet_budgie_show_time_settings_get_instance_private (self);
	self->priv->settings = NULL;
}


static void
budgie_show_time_applet_budgie_show_time_settings_finalize (GObject * obj)
{
	BudgieShowTimeAppletBudgieShowTimeSettings * self;
	self = G_TYPE_CHECK_INSTANCE_CAST (obj, BUDGIE_SHOW_TIME_APPLET_TYPE_BUDGIE_SHOW_TIME_SETTINGS, BudgieShowTimeAppletBudgieShowTimeSettings);
	_g_object_unref0 (self->priv->settings);
	_g_object_unref0 (self->priv->dragbutton);
	_g_object_unref0 (self->priv->leftalign);
	_g_object_unref0 (self->priv->twelve_hrs);
	_g_object_unref0 (self->priv->timefontbutton);
	_g_object_unref0 (self->priv->datefontbutton);
	_g_object_unref0 (self->priv->timecolor);
	_g_object_unref0 (self->priv->datecolor);
	_g_object_unref0 (self->priv->linespacing);
	_g_object_unref0 (self->priv->showtime_settings);
	_g_object_unref0 (self->priv->draghint);
	_g_free0 (self->priv->dragposition);
	_g_free0 (self->priv->fixposition);
	G_OBJECT_CLASS (budgie_show_time_applet_budgie_show_time_settings_parent_class)->finalize (obj);
}


GType
budgie_show_time_applet_budgie_show_time_settings_get_type (void)
{
	return budgie_show_time_applet_budgie_show_time_settings_type_id;
}


GType
budgie_show_time_applet_budgie_show_time_settings_register_type (GTypeModule * module)
{
	static const GTypeInfo g_define_type_info = { sizeof (BudgieShowTimeAppletBudgieShowTimeSettingsClass), (GBaseInitFunc) NULL, (GBaseFinalizeFunc) NULL, (GClassInitFunc) budgie_show_time_applet_budgie_show_time_settings_class_init, (GClassFinalizeFunc) NULL, NULL, sizeof (BudgieShowTimeAppletBudgieShowTimeSettings), 0, (GInstanceInitFunc) budgie_show_time_applet_budgie_show_time_settings_instance_init, NULL };
	budgie_show_time_applet_budgie_show_time_settings_type_id = g_type_module_register_type (module, gtk_grid_get_type (), "BudgieShowTimeAppletBudgieShowTimeSettings", &g_define_type_info, 0);
	BudgieShowTimeAppletBudgieShowTimeSettings_private_offset = sizeof (BudgieShowTimeAppletBudgieShowTimeSettingsPrivate);
	return budgie_show_time_applet_budgie_show_time_settings_type_id;
}


static PeasPluginInfo*
_vala_PeasPluginInfo_copy (PeasPluginInfo* self)
{
	return g_boxed_copy (peas_plugin_info_get_type (), self);
}


static gpointer
__vala_PeasPluginInfo_copy0 (gpointer self)
{
	return self ? _vala_PeasPluginInfo_copy (self) : NULL;
}


static void
_vala_PeasPluginInfo_free (PeasPluginInfo* self)
{
	g_boxed_free (peas_plugin_info_get_type (), self);
}


static BudgieApplet*
budgie_show_time_applet_plugin_real_get_panel_widget (BudgiePlugin* base,
                                                      const gchar* uuid)
{
	BudgieShowTimeAppletPlugin * self;
	BudgieApplet* result = NULL;
	PeasPluginInfo* info = NULL;
	PeasPluginInfo* _tmp0_;
	PeasPluginInfo* _tmp1_;
	const gchar* _tmp2_;
	gchar* _tmp3_;
	BudgieShowTimeAppletApplet* _tmp4_;
	self = (BudgieShowTimeAppletPlugin*) base;
	g_return_val_if_fail (uuid != NULL, NULL);
	_tmp0_ = peas_extension_base_get_plugin_info ((PeasExtensionBase*) self);
	_tmp1_ = __vala_PeasPluginInfo_copy0 (_tmp0_);
	info = _tmp1_;
	_tmp2_ = peas_plugin_info_get_module_dir (info);
	_tmp3_ = g_strdup (_tmp2_);
	_g_free0 (budgie_show_time_applet_moduledir);
	budgie_show_time_applet_moduledir = _tmp3_;
	_tmp4_ = budgie_show_time_applet_applet_new ();
	g_object_ref_sink (_tmp4_);
	result = (BudgieApplet*) _tmp4_;
	__vala_PeasPluginInfo_free0 (info);
	return result;
}


BudgieShowTimeAppletPlugin*
budgie_show_time_applet_plugin_construct (GType object_type)
{
	BudgieShowTimeAppletPlugin * self = NULL;
	self = (BudgieShowTimeAppletPlugin*) g_object_new (object_type, NULL);
	return self;
}


BudgieShowTimeAppletPlugin*
budgie_show_time_applet_plugin_new (void)
{
	return budgie_show_time_applet_plugin_construct (BUDGIE_SHOW_TIME_APPLET_TYPE_PLUGIN);
}


static void
budgie_show_time_applet_plugin_class_init (BudgieShowTimeAppletPluginClass * klass)
{
	budgie_show_time_applet_plugin_parent_class = g_type_class_peek_parent (klass);
}


static void
budgie_show_time_applet_plugin_budgie_plugin_interface_init (BudgiePluginIface * iface)
{
	budgie_show_time_applet_plugin_budgie_plugin_parent_iface = g_type_interface_peek_parent (iface);
	iface->get_panel_widget = (BudgieApplet* (*) (BudgiePlugin *, const gchar*)) budgie_show_time_applet_plugin_real_get_panel_widget;
}


static void
budgie_show_time_applet_plugin_instance_init (BudgieShowTimeAppletPlugin * self)
{
}


GType
budgie_show_time_applet_plugin_get_type (void)
{
	return budgie_show_time_applet_plugin_type_id;
}


GType
budgie_show_time_applet_plugin_register_type (GTypeModule * module)
{
	static const GTypeInfo g_define_type_info = { sizeof (BudgieShowTimeAppletPluginClass), (GBaseInitFunc) NULL, (GBaseFinalizeFunc) NULL, (GClassInitFunc) budgie_show_time_applet_plugin_class_init, (GClassFinalizeFunc) NULL, NULL, sizeof (BudgieShowTimeAppletPlugin), 0, (GInstanceInitFunc) budgie_show_time_applet_plugin_instance_init, NULL };
	static const GInterfaceInfo budgie_plugin_info = { (GInterfaceInitFunc) budgie_show_time_applet_plugin_budgie_plugin_interface_init, (GInterfaceFinalizeFunc) NULL, NULL};
	budgie_show_time_applet_plugin_type_id = g_type_module_register_type (module, peas_extension_base_get_type (), "BudgieShowTimeAppletPlugin", &g_define_type_info, 0);
	g_type_module_add_interface (module, budgie_show_time_applet_plugin_type_id, budgie_plugin_get_type (), &budgie_plugin_info);
	return budgie_show_time_applet_plugin_type_id;
}


static inline gpointer
budgie_show_time_applet_applet_get_instance_private (BudgieShowTimeAppletApplet* self)
{
	return G_STRUCT_MEMBER_P (self, BudgieShowTimeAppletApplet_private_offset);
}


static gboolean
budgie_show_time_applet_applet_real_supports_settings (BudgieApplet* base)
{
	BudgieShowTimeAppletApplet * self;
	gboolean result = FALSE;
	self = (BudgieShowTimeAppletApplet*) base;
	result = TRUE;
	return result;
}


static GtkWidget*
budgie_show_time_applet_applet_real_get_settings_ui (BudgieApplet* base)
{
	BudgieShowTimeAppletApplet * self;
	GtkWidget* result = NULL;
	const gchar* _tmp0_;
	GSettings* _tmp1_;
	GSettings* _tmp2_;
	BudgieShowTimeAppletBudgieShowTimeSettings* _tmp3_;
	GtkWidget* _tmp4_;
	self = (BudgieShowTimeAppletApplet*) base;
	_tmp0_ = self->priv->_uuid;
	_tmp1_ = budgie_applet_get_applet_settings ((BudgieApplet*) self, _tmp0_);
	_tmp2_ = _tmp1_;
	_tmp3_ = budgie_show_time_applet_budgie_show_time_settings_new (_tmp2_);
	g_object_ref_sink (_tmp3_);
	_tmp4_ = (GtkWidget*) _tmp3_;
	_g_object_unref0 (_tmp2_);
	result = _tmp4_;
	return result;
}


static void
budgie_show_time_applet_applet_open_window (BudgieShowTimeAppletApplet* self,
                                            const gchar* path)
{
	gboolean win_exists = FALSE;
	gboolean _tmp0_;
	GError * _inner_error_ = NULL;
	g_return_if_fail (self != NULL);
	g_return_if_fail (path != NULL);
	win_exists = budgie_show_time_applet_applet_check_onwindow (self, path);
	_tmp0_ = win_exists;
	if (!_tmp0_) {
		{
			g_spawn_command_line_async (path, &_inner_error_);
			if (G_UNLIKELY (_inner_error_ != NULL)) {
				if (_inner_error_->domain == G_SPAWN_ERROR) {
					goto __catch1_g_spawn_error;
				}
				g_critical ("file %s: line %d: unexpected error: %s (%s, %d)", __FILE__, __LINE__, _inner_error_->message, g_quark_to_string (_inner_error_->domain), _inner_error_->code);
				g_clear_error (&_inner_error_);
				return;
			}
		}
		goto __finally1;
		__catch1_g_spawn_error:
		{
			GError* e = NULL;
			e = _inner_error_;
			_inner_error_ = NULL;
			_g_error_free0 (e);
		}
		__finally1:
		if (G_UNLIKELY (_inner_error_ != NULL)) {
			g_critical ("file %s: line %d: uncaught error: %s (%s, %d)", __FILE__, __LINE__, _inner_error_->message, g_quark_to_string (_inner_error_->domain), _inner_error_->code);
			g_clear_error (&_inner_error_);
			return;
		}
	}
}


static gboolean
budgie_show_time_applet_applet_check_onwindow (BudgieShowTimeAppletApplet* self,
                                               const gchar* path)
{
	gboolean result = FALSE;
	gchar* cmd_check = NULL;
	gchar* _tmp0_;
	gchar* output = NULL;
	GError * _inner_error_ = NULL;
	g_return_val_if_fail (self != NULL, FALSE);
	g_return_val_if_fail (path != NULL, FALSE);
	_tmp0_ = g_strconcat ("pgrep -f ", path, NULL);
	cmd_check = _tmp0_;
	{
		gchar* _tmp1_ = NULL;
		g_spawn_command_line_sync (cmd_check, &_tmp1_, NULL, NULL, &_inner_error_);
		_g_free0 (output);
		output = _tmp1_;
		if (G_UNLIKELY (_inner_error_ != NULL)) {
			gboolean _tmp2_ = FALSE;
			if (_inner_error_->domain == G_SPAWN_ERROR) {
				goto __catch2_g_spawn_error;
			}
			_g_free0 (output);
			_g_free0 (cmd_check);
			g_critical ("file %s: line %d: unexpected error: %s (%s, %d)", __FILE__, __LINE__, _inner_error_->message, g_quark_to_string (_inner_error_->domain), _inner_error_->code);
			g_clear_error (&_inner_error_);
			return _tmp2_;
		}
		if (g_strcmp0 (output, "") == 0) {
			result = FALSE;
			_g_free0 (output);
			_g_free0 (cmd_check);
			return result;
		}
	}
	goto __finally2;
	__catch2_g_spawn_error:
	{
		GError* e = NULL;
		e = _inner_error_;
		_inner_error_ = NULL;
		result = FALSE;
		_g_error_free0 (e);
		_g_free0 (output);
		_g_free0 (cmd_check);
		return result;
	}
	__finally2:
	if (G_UNLIKELY (_inner_error_ != NULL)) {
		gboolean _tmp3_ = FALSE;
		_g_free0 (output);
		_g_free0 (cmd_check);
		g_critical ("file %s: line %d: uncaught error: %s (%s, %d)", __FILE__, __LINE__, _inner_error_->message, g_quark_to_string (_inner_error_->domain), _inner_error_->code);
		g_clear_error (&_inner_error_);
		return _tmp3_;
	}
	result = TRUE;
	_g_free0 (output);
	_g_free0 (cmd_check);
	return result;
}


BudgieShowTimeAppletApplet*
budgie_show_time_applet_applet_construct (GType object_type)
{
	BudgieShowTimeAppletApplet * self = NULL;
	const gchar* _tmp0_;
	gchar* _tmp1_;
	gchar* _tmp2_;
	self = (BudgieShowTimeAppletApplet*) g_object_new (object_type, NULL);
	_tmp0_ = budgie_show_time_applet_moduledir;
	_tmp1_ = g_strconcat (_tmp0_, "/showtime_desktop", NULL);
	_tmp2_ = _tmp1_;
	budgie_show_time_applet_applet_open_window (self, _tmp2_);
	_g_free0 (_tmp2_);
	budgie_show_time_applet_applet_initialiseLocaleLanguageSupport (self);
	return self;
}


BudgieShowTimeAppletApplet*
budgie_show_time_applet_applet_new (void)
{
	return budgie_show_time_applet_applet_construct (BUDGIE_SHOW_TIME_APPLET_TYPE_APPLET);
}


void
budgie_show_time_applet_applet_initialiseLocaleLanguageSupport (BudgieShowTimeAppletApplet* self)
{
	g_return_if_fail (self != NULL);
	setlocale (LC_ALL, "");
	bindtextdomain (GETTEXT_PACKAGE, PACKAGE_LOCALEDIR);
	bind_textdomain_codeset (GETTEXT_PACKAGE, "UTF-8");
	textdomain (GETTEXT_PACKAGE);
}


const gchar*
budgie_show_time_applet_applet_get_uuid (BudgieShowTimeAppletApplet* self)
{
	const gchar* result;
	const gchar* _tmp0_;
	g_return_val_if_fail (self != NULL, NULL);
	_tmp0_ = self->priv->_uuid;
	result = _tmp0_;
	return result;
}


void
budgie_show_time_applet_applet_set_uuid (BudgieShowTimeAppletApplet* self,
                                         const gchar* value)
{
	g_return_if_fail (self != NULL);
	if (g_strcmp0 (value, budgie_show_time_applet_applet_get_uuid (self)) != 0) {
		gchar* _tmp0_;
		_tmp0_ = g_strdup (value);
		_g_free0 (self->priv->_uuid);
		self->priv->_uuid = _tmp0_;
		g_object_notify_by_pspec ((GObject *) self, budgie_show_time_applet_applet_properties[BUDGIE_SHOW_TIME_APPLET_APPLET_UUID_PROPERTY]);
	}
}


static void
budgie_show_time_applet_applet_class_init (BudgieShowTimeAppletAppletClass * klass)
{
	budgie_show_time_applet_applet_parent_class = g_type_class_peek_parent (klass);
	g_type_class_adjust_private_offset (klass, &BudgieShowTimeAppletApplet_private_offset);
	((BudgieAppletClass *) klass)->supports_settings = (gboolean (*) (BudgieApplet *)) budgie_show_time_applet_applet_real_supports_settings;
	((BudgieAppletClass *) klass)->get_settings_ui = (GtkWidget* (*) (BudgieApplet *)) budgie_show_time_applet_applet_real_get_settings_ui;
	G_OBJECT_CLASS (klass)->get_property = _vala_budgie_show_time_applet_applet_get_property;
	G_OBJECT_CLASS (klass)->set_property = _vala_budgie_show_time_applet_applet_set_property;
	G_OBJECT_CLASS (klass)->finalize = budgie_show_time_applet_applet_finalize;
	g_object_class_install_property (G_OBJECT_CLASS (klass), BUDGIE_SHOW_TIME_APPLET_APPLET_UUID_PROPERTY, budgie_show_time_applet_applet_properties[BUDGIE_SHOW_TIME_APPLET_APPLET_UUID_PROPERTY] = g_param_spec_string ("uuid", "uuid", "uuid", NULL, G_PARAM_STATIC_STRINGS | G_PARAM_READABLE | G_PARAM_WRITABLE));
}


static void
budgie_show_time_applet_applet_instance_init (BudgieShowTimeAppletApplet * self)
{
	self->priv = budgie_show_time_applet_applet_get_instance_private (self);
}


static void
budgie_show_time_applet_applet_finalize (GObject * obj)
{
	BudgieShowTimeAppletApplet * self;
	self = G_TYPE_CHECK_INSTANCE_CAST (obj, BUDGIE_SHOW_TIME_APPLET_TYPE_APPLET, BudgieShowTimeAppletApplet);
	_g_free0 (self->priv->_uuid);
	G_OBJECT_CLASS (budgie_show_time_applet_applet_parent_class)->finalize (obj);
}


GType
budgie_show_time_applet_applet_get_type (void)
{
	return budgie_show_time_applet_applet_type_id;
}


GType
budgie_show_time_applet_applet_register_type (GTypeModule * module)
{
	static const GTypeInfo g_define_type_info = { sizeof (BudgieShowTimeAppletAppletClass), (GBaseInitFunc) NULL, (GBaseFinalizeFunc) NULL, (GClassInitFunc) budgie_show_time_applet_applet_class_init, (GClassFinalizeFunc) NULL, NULL, sizeof (BudgieShowTimeAppletApplet), 0, (GInstanceInitFunc) budgie_show_time_applet_applet_instance_init, NULL };
	budgie_show_time_applet_applet_type_id = g_type_module_register_type (module, budgie_applet_get_type (), "BudgieShowTimeAppletApplet", &g_define_type_info, 0);
	BudgieShowTimeAppletApplet_private_offset = sizeof (BudgieShowTimeAppletAppletPrivate);
	return budgie_show_time_applet_applet_type_id;
}


static void
_vala_budgie_show_time_applet_applet_get_property (GObject * object,
                                                   guint property_id,
                                                   GValue * value,
                                                   GParamSpec * pspec)
{
	BudgieShowTimeAppletApplet * self;
	self = G_TYPE_CHECK_INSTANCE_CAST (object, BUDGIE_SHOW_TIME_APPLET_TYPE_APPLET, BudgieShowTimeAppletApplet);
	switch (property_id) {
		case BUDGIE_SHOW_TIME_APPLET_APPLET_UUID_PROPERTY:
		g_value_set_string (value, budgie_show_time_applet_applet_get_uuid (self));
		break;
		default:
		G_OBJECT_WARN_INVALID_PROPERTY_ID (object, property_id, pspec);
		break;
	}
}


static void
_vala_budgie_show_time_applet_applet_set_property (GObject * object,
                                                   guint property_id,
                                                   const GValue * value,
                                                   GParamSpec * pspec)
{
	BudgieShowTimeAppletApplet * self;
	self = G_TYPE_CHECK_INSTANCE_CAST (object, BUDGIE_SHOW_TIME_APPLET_TYPE_APPLET, BudgieShowTimeAppletApplet);
	switch (property_id) {
		case BUDGIE_SHOW_TIME_APPLET_APPLET_UUID_PROPERTY:
		budgie_show_time_applet_applet_set_uuid (self, g_value_get_string (value));
		break;
		default:
		G_OBJECT_WARN_INVALID_PROPERTY_ID (object, property_id, pspec);
		break;
	}
}


void
peas_register_types (GTypeModule* module)
{
	PeasObjectModule* objmodule = NULL;
	PeasObjectModule* _tmp0_;
	g_return_if_fail (module != NULL);
	budgie_show_time_applet_budgie_show_time_settings_register_type (module);
	budgie_show_time_applet_plugin_register_type (module);
	budgie_show_time_applet_applet_register_type (module);
	_tmp0_ = _g_object_ref0 (G_TYPE_CHECK_INSTANCE_TYPE (module, peas_object_module_get_type ()) ? ((PeasObjectModule*) module) : NULL);
	objmodule = _tmp0_;
	peas_object_module_register_extension_type (objmodule, budgie_plugin_get_type (), BUDGIE_SHOW_TIME_APPLET_TYPE_PLUGIN);
	_g_object_unref0 (objmodule);
}


static void
_vala_array_destroy (gpointer array,
                     gint array_length,
                     GDestroyNotify destroy_func)
{
	if ((array != NULL) && (destroy_func != NULL)) {
		int i;
		for (i = 0; i < array_length; i = i + 1) {
			if (((gpointer*) array)[i] != NULL) {
				destroy_func (((gpointer*) array)[i]);
			}
		}
	}
}


static void
_vala_array_free (gpointer array,
                  gint array_length,
                  GDestroyNotify destroy_func)
{
	_vala_array_destroy (array, array_length, destroy_func);
	g_free (array);
}



