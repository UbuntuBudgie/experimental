/* previews_creator.c generated by valac 0.40.8, the Vala compiler
 * generated from previews_creator.vala, do not modify */



#include <glib.h>
#include <glib-object.h>
#include <libwnck/libwnck.h>
#include <gdk/gdk.h>
#include <float.h>
#include <math.h>
#include <gdk/gdkx.h>
#include <stdlib.h>
#include <string.h>
#include <gio/gio.h>
#include <gtk/gtk.h>
#include <gdk-pixbuf/gdk-pixbuf.h>

typedef struct _Block1Data Block1Data;
#define _g_free0(var) (var = (g_free (var), NULL))
#define _g_object_unref0(var) ((var == NULL) ? NULL : (var = (g_object_unref (var), NULL)))
#define _g_error_free0(var) ((var == NULL) ? NULL : (var = (g_error_free (var), NULL)))
typedef struct _Block2Data Block2Data;
#define _g_dir_close0(var) ((var == NULL) ? NULL : (var = (g_dir_close (var), NULL)))

struct _Block1Data {
	int _ref_count_;
	gint refresh_cycle;
	gint refresh_active;
};

struct _Block2Data {
	int _ref_count_;
	WnckWindow* w;
};


extern WnckScreen* create_previews_wnck_scr;
WnckScreen* create_previews_wnck_scr = NULL;
extern GdkScreen* create_previews_gdk_scr;
GdkScreen* create_previews_gdk_scr = NULL;
extern gint create_previews_curr_refreshindex;
gint create_previews_curr_refreshindex = 0;
extern gdouble create_previews_threshold;
gdouble create_previews_threshold = 0.0;
extern GdkX11Display* create_previews_gdkdisp;
GdkX11Display* create_previews_gdkdisp = NULL;
extern GList* create_previews_gdk_winlist;
GList* create_previews_gdk_winlist = NULL;
extern gchar* create_previews_previewspath;
gchar* create_previews_previewspath = NULL;
extern gboolean create_previews_idle_state;
gboolean create_previews_idle_state = FALSE;

void create_previews_main (gchar** args,
                           int args_length1);
static Block1Data* block1_data_ref (Block1Data* _data1_);
static void block1_data_unref (void * _userdata_);
void create_previews_update_winlist (void);
static void _create_previews_update_winlist_wnck_screen_window_opened (WnckScreen* _sender,
                                                                WnckWindow* window,
                                                                gpointer self);
static void _create_previews_update_winlist_wnck_screen_window_closed (WnckScreen* _sender,
                                                                WnckWindow* window,
                                                                gpointer self);
void create_previews_update_new (WnckWindow* w);
static void _create_previews_update_new_wnck_screen_window_opened (WnckScreen* _sender,
                                                            WnckWindow* window,
                                                            gpointer self);
static void __lambda5_ (void);
void create_previews_update_preview (WnckWindow* w);
static void ___lambda5__wnck_screen_active_window_changed (WnckScreen* _sender,
                                                    WnckWindow* previous_window,
                                                    gpointer self);
static gboolean __lambda6_ (Block1Data* _data1_);
gboolean create_previews_get_idle (void);
static gboolean ___lambda6__gsource_func (gpointer self);
static void _g_object_unref0_ (gpointer var);
static inline void _g_list_free__g_object_unref0_ (GList* self);
void create_previews_cleanup (void);
static Block2Data* block2_data_ref (Block2Data* _data2_);
static void block2_data_unref (void * _userdata_);
static gboolean ___lambda4_ (Block2Data* _data2_);
static gboolean ____lambda4__gsource_func (gpointer self);
GdkWindow* create_previews_get_gdkmatch_fromwnckwin (WnckWindow* curractive);
gint* create_previews_determine_sizes (GdkPixbuf* pre_shot,
                                       gdouble xsize,
                                       gdouble ysize,
                                       int* result_length1);
gchar** create_previews_get_currpreviews (int* result_length1);
static void _vala_array_add1 (gchar** * array,
                       int* length,
                       int* size,
                       gchar* value);
gboolean create_previews_get_stringindex (const gchar* f,
                                          gchar** existing_xids,
                                          int existing_xids_length1);
static void _vala_array_add2 (gchar** * array,
                       int* length,
                       int* size,
                       gchar* value);
static void _vala_array_destroy (gpointer array,
                          gint array_length,
                          GDestroyNotify destroy_func);
static void _vala_array_free (gpointer array,
                       gint array_length,
                       GDestroyNotify destroy_func);


static Block1Data*
block1_data_ref (Block1Data* _data1_)
{
#line 33 "/home/dad/Downloads/experimental/experimental/newpreviews_test/src/previews_creator.vala"
	g_atomic_int_inc (&_data1_->_ref_count_);
#line 33 "/home/dad/Downloads/experimental/experimental/newpreviews_test/src/previews_creator.vala"
	return _data1_;
#line 118 "previews_creator.c"
}


static void
block1_data_unref (void * _userdata_)
{
	Block1Data* _data1_;
	_data1_ = (Block1Data*) _userdata_;
#line 33 "/home/dad/Downloads/experimental/experimental/newpreviews_test/src/previews_creator.vala"
	if (g_atomic_int_dec_and_test (&_data1_->_ref_count_)) {
#line 33 "/home/dad/Downloads/experimental/experimental/newpreviews_test/src/previews_creator.vala"
		g_slice_free (Block1Data, _data1_);
#line 131 "previews_creator.c"
	}
}


static gpointer
_g_object_ref0 (gpointer self)
{
#line 50 "/home/dad/Downloads/experimental/experimental/newpreviews_test/src/previews_creator.vala"
	return self ? g_object_ref (self) : NULL;
#line 141 "previews_creator.c"
}


static void
_create_previews_update_winlist_wnck_screen_window_opened (WnckScreen* _sender,
                                                           WnckWindow* window,
                                                           gpointer self)
{
#line 55 "/home/dad/Downloads/experimental/experimental/newpreviews_test/src/previews_creator.vala"
	create_previews_update_winlist ();
#line 152 "previews_creator.c"
}


static void
_create_previews_update_winlist_wnck_screen_window_closed (WnckScreen* _sender,
                                                           WnckWindow* window,
                                                           gpointer self)
{
#line 56 "/home/dad/Downloads/experimental/experimental/newpreviews_test/src/previews_creator.vala"
	create_previews_update_winlist ();
#line 163 "previews_creator.c"
}


static void
_create_previews_update_new_wnck_screen_window_opened (WnckScreen* _sender,
                                                       WnckWindow* window,
                                                       gpointer self)
{
#line 58 "/home/dad/Downloads/experimental/experimental/newpreviews_test/src/previews_creator.vala"
	create_previews_update_new (window);
#line 174 "previews_creator.c"
}


static void
__lambda5_ (void)
{
	WnckScreen* _tmp0_;
	WnckWindow* _tmp1_;
#line 61 "/home/dad/Downloads/experimental/experimental/newpreviews_test/src/previews_creator.vala"
	_tmp0_ = create_previews_wnck_scr;
#line 61 "/home/dad/Downloads/experimental/experimental/newpreviews_test/src/previews_creator.vala"
	_tmp1_ = wnck_screen_get_active_window (_tmp0_);
#line 61 "/home/dad/Downloads/experimental/experimental/newpreviews_test/src/previews_creator.vala"
	create_previews_update_preview (_tmp1_);
#line 189 "previews_creator.c"
}


static void
___lambda5__wnck_screen_active_window_changed (WnckScreen* _sender,
                                               WnckWindow* previous_window,
                                               gpointer self)
{
#line 60 "/home/dad/Downloads/experimental/experimental/newpreviews_test/src/previews_creator.vala"
	__lambda5_ ();
#line 200 "previews_creator.c"
}


static gboolean
__lambda6_ (Block1Data* _data1_)
{
	gboolean result = FALSE;
	GdkX11Display* _tmp0_;
#line 67 "/home/dad/Downloads/experimental/experimental/newpreviews_test/src/previews_creator.vala"
	_tmp0_ = create_previews_gdkdisp;
#line 67 "/home/dad/Downloads/experimental/experimental/newpreviews_test/src/previews_creator.vala"
	gdk_x11_display_error_trap_push (_tmp0_);
#line 69 "/home/dad/Downloads/experimental/experimental/newpreviews_test/src/previews_creator.vala"
	if (_data1_->refresh_active == 1) {
#line 215 "previews_creator.c"
		WnckScreen* _tmp1_;
		WnckWindow* _tmp2_;
#line 70 "/home/dad/Downloads/experimental/experimental/newpreviews_test/src/previews_creator.vala"
		_tmp1_ = create_previews_wnck_scr;
#line 70 "/home/dad/Downloads/experimental/experimental/newpreviews_test/src/previews_creator.vala"
		_tmp2_ = wnck_screen_get_active_window (_tmp1_);
#line 70 "/home/dad/Downloads/experimental/experimental/newpreviews_test/src/previews_creator.vala"
		create_previews_update_preview (_tmp2_);
#line 224 "previews_creator.c"
	} else {
#line 72 "/home/dad/Downloads/experimental/experimental/newpreviews_test/src/previews_creator.vala"
		if (_data1_->refresh_active == 5) {
#line 73 "/home/dad/Downloads/experimental/experimental/newpreviews_test/src/previews_creator.vala"
			create_previews_idle_state = create_previews_get_idle ();
#line 74 "/home/dad/Downloads/experimental/experimental/newpreviews_test/src/previews_creator.vala"
			_data1_->refresh_active = 0;
#line 232 "previews_creator.c"
		}
	}
#line 76 "/home/dad/Downloads/experimental/experimental/newpreviews_test/src/previews_creator.vala"
	_data1_->refresh_active = _data1_->refresh_active + 1;
#line 78 "/home/dad/Downloads/experimental/experimental/newpreviews_test/src/previews_creator.vala"
	if (_data1_->refresh_cycle == 1) {
#line 239 "previews_creator.c"
		GList* wnck_winlist = NULL;
		WnckScreen* _tmp3_;
		GList* _tmp4_;
		guint n_wins = 0U;
		GList* _tmp5_;
		gint _tmp6_;
		guint _tmp7_;
		gint current_check = 0;
		GList* _tmp8_;
		gint _tmp21_;
#line 79 "/home/dad/Downloads/experimental/experimental/newpreviews_test/src/previews_creator.vala"
		_tmp3_ = create_previews_wnck_scr;
#line 79 "/home/dad/Downloads/experimental/experimental/newpreviews_test/src/previews_creator.vala"
		_tmp4_ = wnck_screen_get_windows (_tmp3_);
#line 79 "/home/dad/Downloads/experimental/experimental/newpreviews_test/src/previews_creator.vala"
		wnck_winlist = _tmp4_;
#line 80 "/home/dad/Downloads/experimental/experimental/newpreviews_test/src/previews_creator.vala"
		_tmp5_ = wnck_winlist;
#line 80 "/home/dad/Downloads/experimental/experimental/newpreviews_test/src/previews_creator.vala"
		n_wins = g_list_length (_tmp5_);
#line 82 "/home/dad/Downloads/experimental/experimental/newpreviews_test/src/previews_creator.vala"
		_tmp6_ = create_previews_curr_refreshindex;
#line 82 "/home/dad/Downloads/experimental/experimental/newpreviews_test/src/previews_creator.vala"
		_tmp7_ = n_wins;
#line 82 "/home/dad/Downloads/experimental/experimental/newpreviews_test/src/previews_creator.vala"
		if (((guint) _tmp6_) >= _tmp7_) {
#line 83 "/home/dad/Downloads/experimental/experimental/newpreviews_test/src/previews_creator.vala"
			create_previews_curr_refreshindex = 0;
#line 268 "previews_creator.c"
		}
#line 86 "/home/dad/Downloads/experimental/experimental/newpreviews_test/src/previews_creator.vala"
		current_check = 0;
#line 87 "/home/dad/Downloads/experimental/experimental/newpreviews_test/src/previews_creator.vala"
		_tmp8_ = wnck_winlist;
#line 274 "previews_creator.c"
		{
			GList* w_collection = NULL;
			GList* w_it = NULL;
#line 87 "/home/dad/Downloads/experimental/experimental/newpreviews_test/src/previews_creator.vala"
			w_collection = _tmp8_;
#line 87 "/home/dad/Downloads/experimental/experimental/newpreviews_test/src/previews_creator.vala"
			for (w_it = w_collection; w_it != NULL; w_it = w_it->next) {
#line 282 "previews_creator.c"
				WnckWindow* _tmp9_;
				WnckWindow* w = NULL;
#line 87 "/home/dad/Downloads/experimental/experimental/newpreviews_test/src/previews_creator.vala"
				_tmp9_ = _g_object_ref0 ((WnckWindow*) w_it->data);
#line 87 "/home/dad/Downloads/experimental/experimental/newpreviews_test/src/previews_creator.vala"
				w = _tmp9_;
#line 289 "previews_creator.c"
				{
					gboolean valid = FALSE;
					WnckWindow* _tmp10_;
					gboolean active = FALSE;
					WnckWindow* _tmp11_;
					WnckScreen* _tmp12_;
					WnckWindow* _tmp13_;
					gboolean _tmp14_ = FALSE;
					gboolean _tmp15_;
#line 88 "/home/dad/Downloads/experimental/experimental/newpreviews_test/src/previews_creator.vala"
					_tmp10_ = w;
#line 88 "/home/dad/Downloads/experimental/experimental/newpreviews_test/src/previews_creator.vala"
					valid = wnck_window_get_window_type (_tmp10_) == WNCK_WINDOW_NORMAL;
#line 89 "/home/dad/Downloads/experimental/experimental/newpreviews_test/src/previews_creator.vala"
					_tmp11_ = w;
#line 89 "/home/dad/Downloads/experimental/experimental/newpreviews_test/src/previews_creator.vala"
					_tmp12_ = create_previews_wnck_scr;
#line 89 "/home/dad/Downloads/experimental/experimental/newpreviews_test/src/previews_creator.vala"
					_tmp13_ = wnck_screen_get_active_window (_tmp12_);
#line 89 "/home/dad/Downloads/experimental/experimental/newpreviews_test/src/previews_creator.vala"
					active = _tmp11_ == _tmp13_;
#line 90 "/home/dad/Downloads/experimental/experimental/newpreviews_test/src/previews_creator.vala"
					_tmp15_ = valid;
#line 90 "/home/dad/Downloads/experimental/experimental/newpreviews_test/src/previews_creator.vala"
					if (_tmp15_) {
#line 315 "previews_creator.c"
						gboolean _tmp16_;
#line 90 "/home/dad/Downloads/experimental/experimental/newpreviews_test/src/previews_creator.vala"
						_tmp16_ = active;
#line 90 "/home/dad/Downloads/experimental/experimental/newpreviews_test/src/previews_creator.vala"
						_tmp14_ = !_tmp16_;
#line 321 "previews_creator.c"
					} else {
#line 90 "/home/dad/Downloads/experimental/experimental/newpreviews_test/src/previews_creator.vala"
						_tmp14_ = FALSE;
#line 325 "previews_creator.c"
					}
#line 90 "/home/dad/Downloads/experimental/experimental/newpreviews_test/src/previews_creator.vala"
					if (_tmp14_) {
#line 329 "previews_creator.c"
						gint _tmp17_;
						gint _tmp18_;
						gint _tmp20_;
#line 91 "/home/dad/Downloads/experimental/experimental/newpreviews_test/src/previews_creator.vala"
						_tmp17_ = current_check;
#line 91 "/home/dad/Downloads/experimental/experimental/newpreviews_test/src/previews_creator.vala"
						_tmp18_ = create_previews_curr_refreshindex;
#line 91 "/home/dad/Downloads/experimental/experimental/newpreviews_test/src/previews_creator.vala"
						if (_tmp17_ == _tmp18_) {
#line 339 "previews_creator.c"
							WnckWindow* _tmp19_;
#line 92 "/home/dad/Downloads/experimental/experimental/newpreviews_test/src/previews_creator.vala"
							_tmp19_ = w;
#line 92 "/home/dad/Downloads/experimental/experimental/newpreviews_test/src/previews_creator.vala"
							create_previews_update_preview (_tmp19_);
#line 93 "/home/dad/Downloads/experimental/experimental/newpreviews_test/src/previews_creator.vala"
							_g_object_unref0 (w);
#line 93 "/home/dad/Downloads/experimental/experimental/newpreviews_test/src/previews_creator.vala"
							break;
#line 349 "previews_creator.c"
						}
#line 95 "/home/dad/Downloads/experimental/experimental/newpreviews_test/src/previews_creator.vala"
						_tmp20_ = current_check;
#line 95 "/home/dad/Downloads/experimental/experimental/newpreviews_test/src/previews_creator.vala"
						current_check = _tmp20_ + 1;
#line 355 "previews_creator.c"
					}
#line 87 "/home/dad/Downloads/experimental/experimental/newpreviews_test/src/previews_creator.vala"
					_g_object_unref0 (w);
#line 359 "previews_creator.c"
				}
			}
		}
#line 98 "/home/dad/Downloads/experimental/experimental/newpreviews_test/src/previews_creator.vala"
		_tmp21_ = create_previews_curr_refreshindex;
#line 98 "/home/dad/Downloads/experimental/experimental/newpreviews_test/src/previews_creator.vala"
		create_previews_curr_refreshindex = _tmp21_ + 1;
#line 367 "previews_creator.c"
	} else {
#line 100 "/home/dad/Downloads/experimental/experimental/newpreviews_test/src/previews_creator.vala"
		if (_data1_->refresh_cycle == 11) {
#line 101 "/home/dad/Downloads/experimental/experimental/newpreviews_test/src/previews_creator.vala"
			_data1_->refresh_cycle = 0;
#line 373 "previews_creator.c"
		}
	}
#line 103 "/home/dad/Downloads/experimental/experimental/newpreviews_test/src/previews_creator.vala"
	_data1_->refresh_cycle = _data1_->refresh_cycle + 1;
#line 104 "/home/dad/Downloads/experimental/experimental/newpreviews_test/src/previews_creator.vala"
	result = TRUE;
#line 104 "/home/dad/Downloads/experimental/experimental/newpreviews_test/src/previews_creator.vala"
	return result;
#line 382 "previews_creator.c"
}


static gboolean
___lambda6__gsource_func (gpointer self)
{
	gboolean result;
	result = __lambda6_ (self);
#line 66 "/home/dad/Downloads/experimental/experimental/newpreviews_test/src/previews_creator.vala"
	return result;
#line 393 "previews_creator.c"
}


void
create_previews_main (gchar** args,
                      int args_length1)
{
	Block1Data* _data1_;
	gchar* user = NULL;
	const gchar* _tmp0_;
	gchar* _tmp1_;
	gchar* _tmp2_;
	WnckScreen* _tmp5_;
	WnckScreen* _tmp6_;
	GdkScreen* _tmp7_;
	GdkScreen* _tmp8_;
	GdkDisplay* _tmp9_;
	GdkX11Display* _tmp10_;
	WnckScreen* _tmp11_;
	WnckScreen* _tmp12_;
	WnckScreen* _tmp13_;
	WnckScreen* _tmp14_;
	GError * _inner_error_ = NULL;
#line 33 "/home/dad/Downloads/experimental/experimental/newpreviews_test/src/previews_creator.vala"
	_data1_ = g_slice_new0 (Block1Data);
#line 33 "/home/dad/Downloads/experimental/experimental/newpreviews_test/src/previews_creator.vala"
	_data1_->_ref_count_ = 1;
#line 35 "/home/dad/Downloads/experimental/experimental/newpreviews_test/src/previews_creator.vala"
	create_previews_curr_refreshindex = 0;
#line 37 "/home/dad/Downloads/experimental/experimental/newpreviews_test/src/previews_creator.vala"
	create_previews_idle_state = FALSE;
#line 39 "/home/dad/Downloads/experimental/experimental/newpreviews_test/src/previews_creator.vala"
	create_previews_threshold = 260.0 / 160.0;
#line 40 "/home/dad/Downloads/experimental/experimental/newpreviews_test/src/previews_creator.vala"
	_tmp0_ = g_get_user_name ();
#line 40 "/home/dad/Downloads/experimental/experimental/newpreviews_test/src/previews_creator.vala"
	_tmp1_ = g_strdup (_tmp0_);
#line 40 "/home/dad/Downloads/experimental/experimental/newpreviews_test/src/previews_creator.vala"
	user = _tmp1_;
#line 41 "/home/dad/Downloads/experimental/experimental/newpreviews_test/src/previews_creator.vala"
	_tmp2_ = g_strconcat ("/tmp/", user, "_window-previews", NULL);
#line 41 "/home/dad/Downloads/experimental/experimental/newpreviews_test/src/previews_creator.vala"
	_g_free0 (create_previews_previewspath);
#line 41 "/home/dad/Downloads/experimental/experimental/newpreviews_test/src/previews_creator.vala"
	create_previews_previewspath = _tmp2_;
#line 439 "previews_creator.c"
	{
		GFile* file = NULL;
		const gchar* _tmp3_;
		GFile* _tmp4_;
#line 43 "/home/dad/Downloads/experimental/experimental/newpreviews_test/src/previews_creator.vala"
		_tmp3_ = create_previews_previewspath;
#line 43 "/home/dad/Downloads/experimental/experimental/newpreviews_test/src/previews_creator.vala"
		_tmp4_ = g_file_new_for_commandline_arg (_tmp3_);
#line 43 "/home/dad/Downloads/experimental/experimental/newpreviews_test/src/previews_creator.vala"
		file = _tmp4_;
#line 44 "/home/dad/Downloads/experimental/experimental/newpreviews_test/src/previews_creator.vala"
		g_file_make_directory (file, NULL, &_inner_error_);
#line 44 "/home/dad/Downloads/experimental/experimental/newpreviews_test/src/previews_creator.vala"
		if (G_UNLIKELY (_inner_error_ != NULL)) {
#line 44 "/home/dad/Downloads/experimental/experimental/newpreviews_test/src/previews_creator.vala"
			_g_object_unref0 (file);
#line 456 "previews_creator.c"
			goto __catch0_g_error;
		}
#line 42 "/home/dad/Downloads/experimental/experimental/newpreviews_test/src/previews_creator.vala"
		_g_object_unref0 (file);
#line 461 "previews_creator.c"
	}
	goto __finally0;
	__catch0_g_error:
	{
		GError* e = NULL;
#line 42 "/home/dad/Downloads/experimental/experimental/newpreviews_test/src/previews_creator.vala"
		e = _inner_error_;
#line 42 "/home/dad/Downloads/experimental/experimental/newpreviews_test/src/previews_creator.vala"
		_inner_error_ = NULL;
#line 42 "/home/dad/Downloads/experimental/experimental/newpreviews_test/src/previews_creator.vala"
		_g_error_free0 (e);
#line 473 "previews_creator.c"
	}
	__finally0:
#line 42 "/home/dad/Downloads/experimental/experimental/newpreviews_test/src/previews_creator.vala"
	if (G_UNLIKELY (_inner_error_ != NULL)) {
#line 42 "/home/dad/Downloads/experimental/experimental/newpreviews_test/src/previews_creator.vala"
		_g_free0 (user);
#line 42 "/home/dad/Downloads/experimental/experimental/newpreviews_test/src/previews_creator.vala"
		block1_data_unref (_data1_);
#line 42 "/home/dad/Downloads/experimental/experimental/newpreviews_test/src/previews_creator.vala"
		_data1_ = NULL;
#line 42 "/home/dad/Downloads/experimental/experimental/newpreviews_test/src/previews_creator.vala"
		g_critical ("file %s: line %d: uncaught error: %s (%s, %d)", __FILE__, __LINE__, _inner_error_->message, g_quark_to_string (_inner_error_->domain), _inner_error_->code);
#line 42 "/home/dad/Downloads/experimental/experimental/newpreviews_test/src/previews_creator.vala"
		g_clear_error (&_inner_error_);
#line 42 "/home/dad/Downloads/experimental/experimental/newpreviews_test/src/previews_creator.vala"
		return;
#line 490 "previews_creator.c"
	}
#line 48 "/home/dad/Downloads/experimental/experimental/newpreviews_test/src/previews_creator.vala"
	gtk_init (&args_length1, &args);
#line 50 "/home/dad/Downloads/experimental/experimental/newpreviews_test/src/previews_creator.vala"
	_tmp5_ = wnck_screen_get_default ();
#line 50 "/home/dad/Downloads/experimental/experimental/newpreviews_test/src/previews_creator.vala"
	_tmp6_ = _g_object_ref0 (_tmp5_);
#line 50 "/home/dad/Downloads/experimental/experimental/newpreviews_test/src/previews_creator.vala"
	_g_object_unref0 (create_previews_wnck_scr);
#line 50 "/home/dad/Downloads/experimental/experimental/newpreviews_test/src/previews_creator.vala"
	create_previews_wnck_scr = _tmp6_;
#line 51 "/home/dad/Downloads/experimental/experimental/newpreviews_test/src/previews_creator.vala"
	_tmp7_ = gdk_screen_get_default ();
#line 51 "/home/dad/Downloads/experimental/experimental/newpreviews_test/src/previews_creator.vala"
	_tmp8_ = _g_object_ref0 (_tmp7_);
#line 51 "/home/dad/Downloads/experimental/experimental/newpreviews_test/src/previews_creator.vala"
	_g_object_unref0 (create_previews_gdk_scr);
#line 51 "/home/dad/Downloads/experimental/experimental/newpreviews_test/src/previews_creator.vala"
	create_previews_gdk_scr = _tmp8_;
#line 52 "/home/dad/Downloads/experimental/experimental/newpreviews_test/src/previews_creator.vala"
	_tmp9_ = gdk_display_get_default ();
#line 52 "/home/dad/Downloads/experimental/experimental/newpreviews_test/src/previews_creator.vala"
	_tmp10_ = _g_object_ref0 (G_TYPE_CHECK_INSTANCE_CAST (_tmp9_, gdk_x11_display_get_type (), GdkX11Display));
#line 52 "/home/dad/Downloads/experimental/experimental/newpreviews_test/src/previews_creator.vala"
	_g_object_unref0 (create_previews_gdkdisp);
#line 52 "/home/dad/Downloads/experimental/experimental/newpreviews_test/src/previews_creator.vala"
	create_previews_gdkdisp = _tmp10_;
#line 53 "/home/dad/Downloads/experimental/experimental/newpreviews_test/src/previews_creator.vala"
	create_previews_update_winlist ();
#line 55 "/home/dad/Downloads/experimental/experimental/newpreviews_test/src/previews_creator.vala"
	_tmp11_ = create_previews_wnck_scr;
#line 55 "/home/dad/Downloads/experimental/experimental/newpreviews_test/src/previews_creator.vala"
	g_signal_connect (_tmp11_, "window-opened", (GCallback) _create_previews_update_winlist_wnck_screen_window_opened, NULL);
#line 56 "/home/dad/Downloads/experimental/experimental/newpreviews_test/src/previews_creator.vala"
	_tmp12_ = create_previews_wnck_scr;
#line 56 "/home/dad/Downloads/experimental/experimental/newpreviews_test/src/previews_creator.vala"
	g_signal_connect (_tmp12_, "window-closed", (GCallback) _create_previews_update_winlist_wnck_screen_window_closed, NULL);
#line 58 "/home/dad/Downloads/experimental/experimental/newpreviews_test/src/previews_creator.vala"
	_tmp13_ = create_previews_wnck_scr;
#line 58 "/home/dad/Downloads/experimental/experimental/newpreviews_test/src/previews_creator.vala"
	g_signal_connect (_tmp13_, "window-opened", (GCallback) _create_previews_update_new_wnck_screen_window_opened, NULL);
#line 60 "/home/dad/Downloads/experimental/experimental/newpreviews_test/src/previews_creator.vala"
	_tmp14_ = create_previews_wnck_scr;
#line 60 "/home/dad/Downloads/experimental/experimental/newpreviews_test/src/previews_creator.vala"
	g_signal_connect (_tmp14_, "active-window-changed", (GCallback) ___lambda5__wnck_screen_active_window_changed, NULL);
#line 64 "/home/dad/Downloads/experimental/experimental/newpreviews_test/src/previews_creator.vala"
	_data1_->refresh_cycle = 1;
#line 65 "/home/dad/Downloads/experimental/experimental/newpreviews_test/src/previews_creator.vala"
	_data1_->refresh_active = 1;
#line 66 "/home/dad/Downloads/experimental/experimental/newpreviews_test/src/previews_creator.vala"
	g_timeout_add_seconds_full (G_PRIORITY_DEFAULT, (guint) 1, ___lambda6__gsource_func, block1_data_ref (_data1_), block1_data_unref);
#line 106 "/home/dad/Downloads/experimental/experimental/newpreviews_test/src/previews_creator.vala"
	gtk_main ();
#line 33 "/home/dad/Downloads/experimental/experimental/newpreviews_test/src/previews_creator.vala"
	_g_free0 (user);
#line 33 "/home/dad/Downloads/experimental/experimental/newpreviews_test/src/previews_creator.vala"
	block1_data_unref (_data1_);
#line 33 "/home/dad/Downloads/experimental/experimental/newpreviews_test/src/previews_creator.vala"
	_data1_ = NULL;
#line 550 "previews_creator.c"
}


int
main (int argc,
      char ** argv)
{
#line 33 "/home/dad/Downloads/experimental/experimental/newpreviews_test/src/previews_creator.vala"
	create_previews_main (argv, argc);
#line 33 "/home/dad/Downloads/experimental/experimental/newpreviews_test/src/previews_creator.vala"
	return 0;
#line 562 "previews_creator.c"
}


gboolean
create_previews_get_idle (void)
{
	gboolean result = FALSE;
	gchar* cmd = NULL;
	gchar* _tmp0_;
	gchar* output = NULL;
	gint curridle = 0;
	gboolean _tmp6_ = FALSE;
	GError * _inner_error_ = NULL;
#line 111 "/home/dad/Downloads/experimental/experimental/newpreviews_test/src/previews_creator.vala"
	_tmp0_ = g_strdup ("xprintidle");
#line 111 "/home/dad/Downloads/experimental/experimental/newpreviews_test/src/previews_creator.vala"
	cmd = _tmp0_;
#line 113 "/home/dad/Downloads/experimental/experimental/newpreviews_test/src/previews_creator.vala"
	curridle = 0;
#line 582 "previews_creator.c"
	{
		const gchar* _tmp1_;
		gchar* _tmp2_ = NULL;
		const gchar* _tmp4_;
		gint _tmp5_;
#line 115 "/home/dad/Downloads/experimental/experimental/newpreviews_test/src/previews_creator.vala"
		_tmp1_ = cmd;
#line 115 "/home/dad/Downloads/experimental/experimental/newpreviews_test/src/previews_creator.vala"
		g_spawn_command_line_sync (_tmp1_, &_tmp2_, NULL, NULL, &_inner_error_);
#line 115 "/home/dad/Downloads/experimental/experimental/newpreviews_test/src/previews_creator.vala"
		_g_free0 (output);
#line 115 "/home/dad/Downloads/experimental/experimental/newpreviews_test/src/previews_creator.vala"
		output = _tmp2_;
#line 115 "/home/dad/Downloads/experimental/experimental/newpreviews_test/src/previews_creator.vala"
		if (G_UNLIKELY (_inner_error_ != NULL)) {
#line 598 "previews_creator.c"
			gboolean _tmp3_ = FALSE;
#line 115 "/home/dad/Downloads/experimental/experimental/newpreviews_test/src/previews_creator.vala"
			if (_inner_error_->domain == G_SPAWN_ERROR) {
#line 602 "previews_creator.c"
				goto __catch1_g_spawn_error;
			}
#line 115 "/home/dad/Downloads/experimental/experimental/newpreviews_test/src/previews_creator.vala"
			_g_free0 (output);
#line 115 "/home/dad/Downloads/experimental/experimental/newpreviews_test/src/previews_creator.vala"
			_g_free0 (cmd);
#line 115 "/home/dad/Downloads/experimental/experimental/newpreviews_test/src/previews_creator.vala"
			g_critical ("file %s: line %d: unexpected error: %s (%s, %d)", __FILE__, __LINE__, _inner_error_->message, g_quark_to_string (_inner_error_->domain), _inner_error_->code);
#line 115 "/home/dad/Downloads/experimental/experimental/newpreviews_test/src/previews_creator.vala"
			g_clear_error (&_inner_error_);
#line 115 "/home/dad/Downloads/experimental/experimental/newpreviews_test/src/previews_creator.vala"
			return _tmp3_;
#line 615 "previews_creator.c"
		}
#line 116 "/home/dad/Downloads/experimental/experimental/newpreviews_test/src/previews_creator.vala"
		_tmp4_ = output;
#line 116 "/home/dad/Downloads/experimental/experimental/newpreviews_test/src/previews_creator.vala"
		curridle = atoi (_tmp4_) / 1000;
#line 117 "/home/dad/Downloads/experimental/experimental/newpreviews_test/src/previews_creator.vala"
		_tmp5_ = curridle;
#line 117 "/home/dad/Downloads/experimental/experimental/newpreviews_test/src/previews_creator.vala"
		if (_tmp5_ > 90) {
#line 118 "/home/dad/Downloads/experimental/experimental/newpreviews_test/src/previews_creator.vala"
			result = TRUE;
#line 118 "/home/dad/Downloads/experimental/experimental/newpreviews_test/src/previews_creator.vala"
			_g_free0 (output);
#line 118 "/home/dad/Downloads/experimental/experimental/newpreviews_test/src/previews_creator.vala"
			_g_free0 (cmd);
#line 118 "/home/dad/Downloads/experimental/experimental/newpreviews_test/src/previews_creator.vala"
			return result;
#line 633 "previews_creator.c"
		} else {
#line 121 "/home/dad/Downloads/experimental/experimental/newpreviews_test/src/previews_creator.vala"
			result = FALSE;
#line 121 "/home/dad/Downloads/experimental/experimental/newpreviews_test/src/previews_creator.vala"
			_g_free0 (output);
#line 121 "/home/dad/Downloads/experimental/experimental/newpreviews_test/src/previews_creator.vala"
			_g_free0 (cmd);
#line 121 "/home/dad/Downloads/experimental/experimental/newpreviews_test/src/previews_creator.vala"
			return result;
#line 643 "previews_creator.c"
		}
	}
	goto __finally1;
	__catch1_g_spawn_error:
	{
		GError* e = NULL;
#line 114 "/home/dad/Downloads/experimental/experimental/newpreviews_test/src/previews_creator.vala"
		e = _inner_error_;
#line 114 "/home/dad/Downloads/experimental/experimental/newpreviews_test/src/previews_creator.vala"
		_inner_error_ = NULL;
#line 126 "/home/dad/Downloads/experimental/experimental/newpreviews_test/src/previews_creator.vala"
		result = FALSE;
#line 126 "/home/dad/Downloads/experimental/experimental/newpreviews_test/src/previews_creator.vala"
		_g_error_free0 (e);
#line 126 "/home/dad/Downloads/experimental/experimental/newpreviews_test/src/previews_creator.vala"
		_g_free0 (output);
#line 126 "/home/dad/Downloads/experimental/experimental/newpreviews_test/src/previews_creator.vala"
		_g_free0 (cmd);
#line 126 "/home/dad/Downloads/experimental/experimental/newpreviews_test/src/previews_creator.vala"
		return result;
#line 664 "previews_creator.c"
	}
	__finally1:
#line 114 "/home/dad/Downloads/experimental/experimental/newpreviews_test/src/previews_creator.vala"
	_g_free0 (output);
#line 114 "/home/dad/Downloads/experimental/experimental/newpreviews_test/src/previews_creator.vala"
	_g_free0 (cmd);
#line 114 "/home/dad/Downloads/experimental/experimental/newpreviews_test/src/previews_creator.vala"
	g_critical ("file %s: line %d: uncaught error: %s (%s, %d)", __FILE__, __LINE__, _inner_error_->message, g_quark_to_string (_inner_error_->domain), _inner_error_->code);
#line 114 "/home/dad/Downloads/experimental/experimental/newpreviews_test/src/previews_creator.vala"
	g_clear_error (&_inner_error_);
#line 114 "/home/dad/Downloads/experimental/experimental/newpreviews_test/src/previews_creator.vala"
	return _tmp6_;
#line 677 "previews_creator.c"
}


static void
_g_object_unref0_ (gpointer var)
{
#line 132 "/home/dad/Downloads/experimental/experimental/newpreviews_test/src/previews_creator.vala"
	(var == NULL) ? NULL : (var = (g_object_unref (var), NULL));
#line 686 "previews_creator.c"
}


static inline void
_g_list_free__g_object_unref0_ (GList* self)
{
#line 132 "/home/dad/Downloads/experimental/experimental/newpreviews_test/src/previews_creator.vala"
	g_list_free_full (self, (GDestroyNotify) _g_object_unref0_);
#line 695 "previews_creator.c"
}


void
create_previews_update_winlist (void)
{
	GdkScreen* _tmp0_;
	GList* _tmp1_;
#line 132 "/home/dad/Downloads/experimental/experimental/newpreviews_test/src/previews_creator.vala"
	_tmp0_ = create_previews_gdk_scr;
#line 132 "/home/dad/Downloads/experimental/experimental/newpreviews_test/src/previews_creator.vala"
	_tmp1_ = gdk_screen_get_window_stack (_tmp0_);
#line 132 "/home/dad/Downloads/experimental/experimental/newpreviews_test/src/previews_creator.vala"
	(create_previews_gdk_winlist == NULL) ? NULL : (create_previews_gdk_winlist = (_g_list_free__g_object_unref0_ (create_previews_gdk_winlist), NULL));
#line 132 "/home/dad/Downloads/experimental/experimental/newpreviews_test/src/previews_creator.vala"
	create_previews_gdk_winlist = _tmp1_;
#line 133 "/home/dad/Downloads/experimental/experimental/newpreviews_test/src/previews_creator.vala"
	create_previews_cleanup ();
#line 714 "previews_creator.c"
}


static Block2Data*
block2_data_ref (Block2Data* _data2_)
{
#line 136 "/home/dad/Downloads/experimental/experimental/newpreviews_test/src/previews_creator.vala"
	g_atomic_int_inc (&_data2_->_ref_count_);
#line 136 "/home/dad/Downloads/experimental/experimental/newpreviews_test/src/previews_creator.vala"
	return _data2_;
#line 725 "previews_creator.c"
}


static void
block2_data_unref (void * _userdata_)
{
	Block2Data* _data2_;
	_data2_ = (Block2Data*) _userdata_;
#line 136 "/home/dad/Downloads/experimental/experimental/newpreviews_test/src/previews_creator.vala"
	if (g_atomic_int_dec_and_test (&_data2_->_ref_count_)) {
#line 136 "/home/dad/Downloads/experimental/experimental/newpreviews_test/src/previews_creator.vala"
		_g_object_unref0 (_data2_->w);
#line 136 "/home/dad/Downloads/experimental/experimental/newpreviews_test/src/previews_creator.vala"
		g_slice_free (Block2Data, _data2_);
#line 740 "previews_creator.c"
	}
}


static gboolean
___lambda4_ (Block2Data* _data2_)
{
	gboolean result = FALSE;
#line 142 "/home/dad/Downloads/experimental/experimental/newpreviews_test/src/previews_creator.vala"
	create_previews_update_preview (_data2_->w);
#line 143 "/home/dad/Downloads/experimental/experimental/newpreviews_test/src/previews_creator.vala"
	result = FALSE;
#line 143 "/home/dad/Downloads/experimental/experimental/newpreviews_test/src/previews_creator.vala"
	return result;
#line 755 "previews_creator.c"
}


static gboolean
____lambda4__gsource_func (gpointer self)
{
	gboolean result;
	result = ___lambda4_ (self);
#line 141 "/home/dad/Downloads/experimental/experimental/newpreviews_test/src/previews_creator.vala"
	return result;
#line 766 "previews_creator.c"
}


void
create_previews_update_new (WnckWindow* w)
{
	Block2Data* _data2_;
	WnckWindow* _tmp0_;
#line 136 "/home/dad/Downloads/experimental/experimental/newpreviews_test/src/previews_creator.vala"
	g_return_if_fail (w != NULL);
#line 136 "/home/dad/Downloads/experimental/experimental/newpreviews_test/src/previews_creator.vala"
	_data2_ = g_slice_new0 (Block2Data);
#line 136 "/home/dad/Downloads/experimental/experimental/newpreviews_test/src/previews_creator.vala"
	_data2_->_ref_count_ = 1;
#line 136 "/home/dad/Downloads/experimental/experimental/newpreviews_test/src/previews_creator.vala"
	_tmp0_ = _g_object_ref0 (w);
#line 136 "/home/dad/Downloads/experimental/experimental/newpreviews_test/src/previews_creator.vala"
	_g_object_unref0 (_data2_->w);
#line 136 "/home/dad/Downloads/experimental/experimental/newpreviews_test/src/previews_creator.vala"
	_data2_->w = _tmp0_;
#line 139 "/home/dad/Downloads/experimental/experimental/newpreviews_test/src/previews_creator.vala"
	if (wnck_window_get_window_type (_data2_->w) == WNCK_WINDOW_NORMAL) {
#line 140 "/home/dad/Downloads/experimental/experimental/newpreviews_test/src/previews_creator.vala"
		create_previews_update_preview (_data2_->w);
#line 141 "/home/dad/Downloads/experimental/experimental/newpreviews_test/src/previews_creator.vala"
		g_timeout_add_seconds_full (G_PRIORITY_DEFAULT, (guint) 6, ____lambda4__gsource_func, block2_data_ref (_data2_), block2_data_unref);
#line 793 "previews_creator.c"
	}
#line 136 "/home/dad/Downloads/experimental/experimental/newpreviews_test/src/previews_creator.vala"
	block2_data_unref (_data2_);
#line 136 "/home/dad/Downloads/experimental/experimental/newpreviews_test/src/previews_creator.vala"
	_data2_ = NULL;
#line 799 "previews_creator.c"
}


GdkWindow*
create_previews_get_gdkmatch_fromwnckwin (WnckWindow* curractive)
{
	GdkWindow* result = NULL;
	guint curractive_xid = 0U;
	GList* _tmp0_;
#line 148 "/home/dad/Downloads/experimental/experimental/newpreviews_test/src/previews_creator.vala"
	g_return_val_if_fail (curractive != NULL, NULL);
#line 151 "/home/dad/Downloads/experimental/experimental/newpreviews_test/src/previews_creator.vala"
	curractive_xid = (guint) wnck_window_get_xid (curractive);
#line 152 "/home/dad/Downloads/experimental/experimental/newpreviews_test/src/previews_creator.vala"
	_tmp0_ = create_previews_gdk_winlist;
#line 815 "previews_creator.c"
	{
		GList* w_collection = NULL;
		GList* w_it = NULL;
#line 152 "/home/dad/Downloads/experimental/experimental/newpreviews_test/src/previews_creator.vala"
		w_collection = _tmp0_;
#line 152 "/home/dad/Downloads/experimental/experimental/newpreviews_test/src/previews_creator.vala"
		for (w_it = w_collection; w_it != NULL; w_it = w_it->next) {
#line 823 "previews_creator.c"
			GdkWindow* _tmp1_;
			GdkWindow* w = NULL;
#line 152 "/home/dad/Downloads/experimental/experimental/newpreviews_test/src/previews_creator.vala"
			_tmp1_ = _g_object_ref0 ((GdkWindow*) w_it->data);
#line 152 "/home/dad/Downloads/experimental/experimental/newpreviews_test/src/previews_creator.vala"
			w = _tmp1_;
#line 830 "previews_creator.c"
			{
				GdkX11Window* winsubj = NULL;
				GdkWindow* _tmp2_;
				GdkX11Window* _tmp3_;
				guint gdk_xid = 0U;
				GdkX11Window* _tmp4_;
				guint _tmp5_;
				guint _tmp6_;
#line 153 "/home/dad/Downloads/experimental/experimental/newpreviews_test/src/previews_creator.vala"
				_tmp2_ = w;
#line 153 "/home/dad/Downloads/experimental/experimental/newpreviews_test/src/previews_creator.vala"
				_tmp3_ = _g_object_ref0 (G_TYPE_CHECK_INSTANCE_CAST (_tmp2_, gdk_x11_window_get_type (), GdkX11Window));
#line 153 "/home/dad/Downloads/experimental/experimental/newpreviews_test/src/previews_creator.vala"
				winsubj = _tmp3_;
#line 154 "/home/dad/Downloads/experimental/experimental/newpreviews_test/src/previews_creator.vala"
				_tmp4_ = winsubj;
#line 154 "/home/dad/Downloads/experimental/experimental/newpreviews_test/src/previews_creator.vala"
				gdk_xid = (guint) gdk_x11_window_get_xid (_tmp4_);
#line 155 "/home/dad/Downloads/experimental/experimental/newpreviews_test/src/previews_creator.vala"
				_tmp5_ = gdk_xid;
#line 155 "/home/dad/Downloads/experimental/experimental/newpreviews_test/src/previews_creator.vala"
				_tmp6_ = curractive_xid;
#line 155 "/home/dad/Downloads/experimental/experimental/newpreviews_test/src/previews_creator.vala"
				if (_tmp5_ == _tmp6_) {
#line 156 "/home/dad/Downloads/experimental/experimental/newpreviews_test/src/previews_creator.vala"
					result = w;
#line 156 "/home/dad/Downloads/experimental/experimental/newpreviews_test/src/previews_creator.vala"
					_g_object_unref0 (winsubj);
#line 156 "/home/dad/Downloads/experimental/experimental/newpreviews_test/src/previews_creator.vala"
					return result;
#line 861 "previews_creator.c"
				}
#line 152 "/home/dad/Downloads/experimental/experimental/newpreviews_test/src/previews_creator.vala"
				_g_object_unref0 (winsubj);
#line 152 "/home/dad/Downloads/experimental/experimental/newpreviews_test/src/previews_creator.vala"
				_g_object_unref0 (w);
#line 867 "previews_creator.c"
			}
		}
	}
#line 159 "/home/dad/Downloads/experimental/experimental/newpreviews_test/src/previews_creator.vala"
	result = NULL;
#line 159 "/home/dad/Downloads/experimental/experimental/newpreviews_test/src/previews_creator.vala"
	return result;
#line 875 "previews_creator.c"
}


gint*
create_previews_determine_sizes (GdkPixbuf* pre_shot,
                                 gdouble xsize,
                                 gdouble ysize,
                                 int* result_length1)
{
	gint* result = NULL;
	gint targetx = 0;
	gint targety = 0;
	gdouble prop = 0.0;
	gdouble _tmp0_;
	gdouble _tmp1_;
	gint _tmp2_;
	gint _tmp3_;
	gint* _tmp4_;
	gint* _tmp5_;
	gint _tmp5__length1;
#line 162 "/home/dad/Downloads/experimental/experimental/newpreviews_test/src/previews_creator.vala"
	g_return_val_if_fail (pre_shot != NULL, NULL);
#line 166 "/home/dad/Downloads/experimental/experimental/newpreviews_test/src/previews_creator.vala"
	targetx = 0;
#line 167 "/home/dad/Downloads/experimental/experimental/newpreviews_test/src/previews_creator.vala"
	targety = 0;
#line 168 "/home/dad/Downloads/experimental/experimental/newpreviews_test/src/previews_creator.vala"
	prop = (gdouble) (xsize / ysize);
#line 170 "/home/dad/Downloads/experimental/experimental/newpreviews_test/src/previews_creator.vala"
	_tmp0_ = prop;
#line 170 "/home/dad/Downloads/experimental/experimental/newpreviews_test/src/previews_creator.vala"
	_tmp1_ = create_previews_threshold;
#line 170 "/home/dad/Downloads/experimental/experimental/newpreviews_test/src/previews_creator.vala"
	if (_tmp0_ >= _tmp1_) {
#line 171 "/home/dad/Downloads/experimental/experimental/newpreviews_test/src/previews_creator.vala"
		targetx = 260;
#line 172 "/home/dad/Downloads/experimental/experimental/newpreviews_test/src/previews_creator.vala"
		targety = (gint) ((260 / xsize) * ysize);
#line 914 "previews_creator.c"
	} else {
#line 175 "/home/dad/Downloads/experimental/experimental/newpreviews_test/src/previews_creator.vala"
		targety = 160;
#line 176 "/home/dad/Downloads/experimental/experimental/newpreviews_test/src/previews_creator.vala"
		targetx = (gint) ((160 / ysize) * xsize);
#line 920 "previews_creator.c"
	}
#line 178 "/home/dad/Downloads/experimental/experimental/newpreviews_test/src/previews_creator.vala"
	_tmp2_ = targetx;
#line 178 "/home/dad/Downloads/experimental/experimental/newpreviews_test/src/previews_creator.vala"
	_tmp3_ = targety;
#line 178 "/home/dad/Downloads/experimental/experimental/newpreviews_test/src/previews_creator.vala"
	_tmp4_ = g_new0 (gint, 2);
#line 178 "/home/dad/Downloads/experimental/experimental/newpreviews_test/src/previews_creator.vala"
	_tmp4_[0] = _tmp2_;
#line 178 "/home/dad/Downloads/experimental/experimental/newpreviews_test/src/previews_creator.vala"
	_tmp4_[1] = _tmp3_;
#line 178 "/home/dad/Downloads/experimental/experimental/newpreviews_test/src/previews_creator.vala"
	_tmp5_ = _tmp4_;
#line 178 "/home/dad/Downloads/experimental/experimental/newpreviews_test/src/previews_creator.vala"
	_tmp5__length1 = 2;
#line 178 "/home/dad/Downloads/experimental/experimental/newpreviews_test/src/previews_creator.vala"
	if (result_length1) {
#line 178 "/home/dad/Downloads/experimental/experimental/newpreviews_test/src/previews_creator.vala"
		*result_length1 = _tmp5__length1;
#line 940 "previews_creator.c"
	}
#line 178 "/home/dad/Downloads/experimental/experimental/newpreviews_test/src/previews_creator.vala"
	result = _tmp5_;
#line 178 "/home/dad/Downloads/experimental/experimental/newpreviews_test/src/previews_creator.vala"
	return result;
#line 946 "previews_creator.c"
}


void
create_previews_update_preview (WnckWindow* w)
{
	gboolean _tmp0_ = FALSE;
	GError * _inner_error_ = NULL;
#line 189 "/home/dad/Downloads/experimental/experimental/newpreviews_test/src/previews_creator.vala"
	if (w != NULL) {
#line 957 "previews_creator.c"
		gboolean _tmp1_;
#line 189 "/home/dad/Downloads/experimental/experimental/newpreviews_test/src/previews_creator.vala"
		_tmp1_ = create_previews_idle_state;
#line 189 "/home/dad/Downloads/experimental/experimental/newpreviews_test/src/previews_creator.vala"
		_tmp0_ = !_tmp1_;
#line 963 "previews_creator.c"
	} else {
#line 189 "/home/dad/Downloads/experimental/experimental/newpreviews_test/src/previews_creator.vala"
		_tmp0_ = FALSE;
#line 967 "previews_creator.c"
	}
#line 189 "/home/dad/Downloads/experimental/experimental/newpreviews_test/src/previews_creator.vala"
	if (_tmp0_) {
#line 971 "previews_creator.c"
		GdkWindow* gdk_match = NULL;
		GdkWindow* _tmp2_;
		gboolean _tmp3_ = FALSE;
		GdkWindow* _tmp4_;
#line 190 "/home/dad/Downloads/experimental/experimental/newpreviews_test/src/previews_creator.vala"
		_tmp2_ = create_previews_get_gdkmatch_fromwnckwin (w);
#line 190 "/home/dad/Downloads/experimental/experimental/newpreviews_test/src/previews_creator.vala"
		gdk_match = _tmp2_;
#line 193 "/home/dad/Downloads/experimental/experimental/newpreviews_test/src/previews_creator.vala"
		_tmp4_ = gdk_match;
#line 193 "/home/dad/Downloads/experimental/experimental/newpreviews_test/src/previews_creator.vala"
		if (_tmp4_ != NULL) {
#line 194 "/home/dad/Downloads/experimental/experimental/newpreviews_test/src/previews_creator.vala"
			_tmp3_ = wnck_window_get_window_type (w) == WNCK_WINDOW_NORMAL;
#line 986 "previews_creator.c"
		} else {
#line 193 "/home/dad/Downloads/experimental/experimental/newpreviews_test/src/previews_creator.vala"
			_tmp3_ = FALSE;
#line 990 "previews_creator.c"
		}
#line 191 "/home/dad/Downloads/experimental/experimental/newpreviews_test/src/previews_creator.vala"
		if (_tmp3_) {
#line 994 "previews_creator.c"
			gint width = 0;
			GdkWindow* _tmp5_;
			gint height = 0;
			GdkWindow* _tmp6_;
			GdkPixbuf* currpix = NULL;
			GdkWindow* _tmp7_;
			gint _tmp8_;
			gint _tmp9_;
			GdkPixbuf* _tmp10_;
			GdkX11Window* x11_w = NULL;
			GdkWindow* _tmp11_;
			GdkX11Window* _tmp12_;
			guint name_xid = 0U;
			GdkX11Window* _tmp13_;
			guint name_workspace = 0U;
			GdkX11Window* _tmp14_;
			gint* sizes = NULL;
			GdkPixbuf* _tmp15_;
			gint _tmp16_;
			gint _tmp17_;
			gint _tmp18_;
			gint* _tmp19_;
			gint sizes_length1;
			gint _sizes_size_;
			gchar* name = NULL;
			guint _tmp20_;
			gchar* _tmp21_;
			gchar* _tmp22_;
			guint _tmp23_;
			gchar* _tmp24_;
			gchar* _tmp25_;
			gchar* _tmp26_;
			gchar* _tmp27_;
			GdkPixbuf* _tmp28_;
#line 197 "/home/dad/Downloads/experimental/experimental/newpreviews_test/src/previews_creator.vala"
			_tmp5_ = gdk_match;
#line 197 "/home/dad/Downloads/experimental/experimental/newpreviews_test/src/previews_creator.vala"
			width = gdk_window_get_width (_tmp5_);
#line 198 "/home/dad/Downloads/experimental/experimental/newpreviews_test/src/previews_creator.vala"
			_tmp6_ = gdk_match;
#line 198 "/home/dad/Downloads/experimental/experimental/newpreviews_test/src/previews_creator.vala"
			height = gdk_window_get_height (_tmp6_);
#line 199 "/home/dad/Downloads/experimental/experimental/newpreviews_test/src/previews_creator.vala"
			_tmp7_ = gdk_match;
#line 199 "/home/dad/Downloads/experimental/experimental/newpreviews_test/src/previews_creator.vala"
			_tmp8_ = width;
#line 199 "/home/dad/Downloads/experimental/experimental/newpreviews_test/src/previews_creator.vala"
			_tmp9_ = height;
#line 199 "/home/dad/Downloads/experimental/experimental/newpreviews_test/src/previews_creator.vala"
			_tmp10_ = gdk_pixbuf_get_from_window (_tmp7_, 0, 0, _tmp8_, _tmp9_);
#line 199 "/home/dad/Downloads/experimental/experimental/newpreviews_test/src/previews_creator.vala"
			currpix = _tmp10_;
#line 203 "/home/dad/Downloads/experimental/experimental/newpreviews_test/src/previews_creator.vala"
			_tmp11_ = gdk_match;
#line 203 "/home/dad/Downloads/experimental/experimental/newpreviews_test/src/previews_creator.vala"
			_tmp12_ = _g_object_ref0 (G_TYPE_CHECK_INSTANCE_CAST (_tmp11_, gdk_x11_window_get_type (), GdkX11Window));
#line 203 "/home/dad/Downloads/experimental/experimental/newpreviews_test/src/previews_creator.vala"
			x11_w = _tmp12_;
#line 204 "/home/dad/Downloads/experimental/experimental/newpreviews_test/src/previews_creator.vala"
			_tmp13_ = x11_w;
#line 204 "/home/dad/Downloads/experimental/experimental/newpreviews_test/src/previews_creator.vala"
			name_xid = (guint) gdk_x11_window_get_xid (_tmp13_);
#line 205 "/home/dad/Downloads/experimental/experimental/newpreviews_test/src/previews_creator.vala"
			_tmp14_ = x11_w;
#line 205 "/home/dad/Downloads/experimental/experimental/newpreviews_test/src/previews_creator.vala"
			name_workspace = (guint) gdk_x11_window_get_desktop (_tmp14_);
#line 206 "/home/dad/Downloads/experimental/experimental/newpreviews_test/src/previews_creator.vala"
			_tmp15_ = currpix;
#line 206 "/home/dad/Downloads/experimental/experimental/newpreviews_test/src/previews_creator.vala"
			_tmp16_ = width;
#line 206 "/home/dad/Downloads/experimental/experimental/newpreviews_test/src/previews_creator.vala"
			_tmp17_ = height;
#line 206 "/home/dad/Downloads/experimental/experimental/newpreviews_test/src/previews_creator.vala"
			_tmp19_ = create_previews_determine_sizes (_tmp15_, (gdouble) _tmp16_, (gdouble) _tmp17_, &_tmp18_);
#line 206 "/home/dad/Downloads/experimental/experimental/newpreviews_test/src/previews_creator.vala"
			sizes = _tmp19_;
#line 206 "/home/dad/Downloads/experimental/experimental/newpreviews_test/src/previews_creator.vala"
			sizes_length1 = _tmp18_;
#line 206 "/home/dad/Downloads/experimental/experimental/newpreviews_test/src/previews_creator.vala"
			_sizes_size_ = sizes_length1;
#line 208 "/home/dad/Downloads/experimental/experimental/newpreviews_test/src/previews_creator.vala"
			_tmp20_ = name_xid;
#line 208 "/home/dad/Downloads/experimental/experimental/newpreviews_test/src/previews_creator.vala"
			_tmp21_ = g_strdup_printf ("%u", _tmp20_);
#line 208 "/home/dad/Downloads/experimental/experimental/newpreviews_test/src/previews_creator.vala"
			_tmp22_ = _tmp21_;
#line 208 "/home/dad/Downloads/experimental/experimental/newpreviews_test/src/previews_creator.vala"
			_tmp23_ = name_workspace;
#line 208 "/home/dad/Downloads/experimental/experimental/newpreviews_test/src/previews_creator.vala"
			_tmp24_ = g_strdup_printf ("%u", _tmp23_);
#line 208 "/home/dad/Downloads/experimental/experimental/newpreviews_test/src/previews_creator.vala"
			_tmp25_ = _tmp24_;
#line 208 "/home/dad/Downloads/experimental/experimental/newpreviews_test/src/previews_creator.vala"
			_tmp26_ = g_strconcat (_tmp22_, ".", _tmp25_, ".png", NULL);
#line 208 "/home/dad/Downloads/experimental/experimental/newpreviews_test/src/previews_creator.vala"
			_tmp27_ = _tmp26_;
#line 208 "/home/dad/Downloads/experimental/experimental/newpreviews_test/src/previews_creator.vala"
			_g_free0 (_tmp25_);
#line 208 "/home/dad/Downloads/experimental/experimental/newpreviews_test/src/previews_creator.vala"
			_g_free0 (_tmp22_);
#line 208 "/home/dad/Downloads/experimental/experimental/newpreviews_test/src/previews_creator.vala"
			name = _tmp27_;
#line 209 "/home/dad/Downloads/experimental/experimental/newpreviews_test/src/previews_creator.vala"
			_tmp28_ = currpix;
#line 209 "/home/dad/Downloads/experimental/experimental/newpreviews_test/src/previews_creator.vala"
			if (_tmp28_ != NULL) {
#line 1101 "previews_creator.c"
				{
					GdkPixbuf* _tmp29_;
					gint* _tmp30_;
					gint _tmp30__length1;
					gint _tmp31_;
					gint* _tmp32_;
					gint _tmp32__length1;
					gint _tmp33_;
					GdkPixbuf* _tmp34_;
					GdkPixbuf* _tmp35_;
					const gchar* _tmp36_;
					const gchar* _tmp37_;
					gchar* _tmp38_;
					gchar* _tmp39_;
#line 211 "/home/dad/Downloads/experimental/experimental/newpreviews_test/src/previews_creator.vala"
					_tmp29_ = currpix;
#line 211 "/home/dad/Downloads/experimental/experimental/newpreviews_test/src/previews_creator.vala"
					_tmp30_ = sizes;
#line 211 "/home/dad/Downloads/experimental/experimental/newpreviews_test/src/previews_creator.vala"
					_tmp30__length1 = sizes_length1;
#line 211 "/home/dad/Downloads/experimental/experimental/newpreviews_test/src/previews_creator.vala"
					_tmp31_ = _tmp30_[0];
#line 211 "/home/dad/Downloads/experimental/experimental/newpreviews_test/src/previews_creator.vala"
					_tmp32_ = sizes;
#line 211 "/home/dad/Downloads/experimental/experimental/newpreviews_test/src/previews_creator.vala"
					_tmp32__length1 = sizes_length1;
#line 211 "/home/dad/Downloads/experimental/experimental/newpreviews_test/src/previews_creator.vala"
					_tmp33_ = _tmp32_[1];
#line 211 "/home/dad/Downloads/experimental/experimental/newpreviews_test/src/previews_creator.vala"
					_tmp34_ = gdk_pixbuf_scale_simple (_tmp29_, _tmp31_, _tmp33_, GDK_INTERP_BILINEAR);
#line 211 "/home/dad/Downloads/experimental/experimental/newpreviews_test/src/previews_creator.vala"
					_tmp35_ = _tmp34_;
#line 211 "/home/dad/Downloads/experimental/experimental/newpreviews_test/src/previews_creator.vala"
					_tmp36_ = create_previews_previewspath;
#line 211 "/home/dad/Downloads/experimental/experimental/newpreviews_test/src/previews_creator.vala"
					_tmp37_ = name;
#line 211 "/home/dad/Downloads/experimental/experimental/newpreviews_test/src/previews_creator.vala"
					_tmp38_ = g_strconcat (_tmp36_, "/", _tmp37_, NULL);
#line 211 "/home/dad/Downloads/experimental/experimental/newpreviews_test/src/previews_creator.vala"
					_tmp39_ = _tmp38_;
#line 211 "/home/dad/Downloads/experimental/experimental/newpreviews_test/src/previews_creator.vala"
					gdk_pixbuf_save (_tmp35_, _tmp39_, "png", &_inner_error_, NULL);
#line 211 "/home/dad/Downloads/experimental/experimental/newpreviews_test/src/previews_creator.vala"
					_g_free0 (_tmp39_);
#line 211 "/home/dad/Downloads/experimental/experimental/newpreviews_test/src/previews_creator.vala"
					_g_object_unref0 (_tmp35_);
#line 211 "/home/dad/Downloads/experimental/experimental/newpreviews_test/src/previews_creator.vala"
					if (G_UNLIKELY (_inner_error_ != NULL)) {
#line 1150 "previews_creator.c"
						goto __catch2_g_error;
					}
				}
				goto __finally2;
				__catch2_g_error:
				{
					GError* e = NULL;
#line 210 "/home/dad/Downloads/experimental/experimental/newpreviews_test/src/previews_creator.vala"
					e = _inner_error_;
#line 210 "/home/dad/Downloads/experimental/experimental/newpreviews_test/src/previews_creator.vala"
					_inner_error_ = NULL;
#line 210 "/home/dad/Downloads/experimental/experimental/newpreviews_test/src/previews_creator.vala"
					_g_error_free0 (e);
#line 1164 "previews_creator.c"
				}
				__finally2:
#line 210 "/home/dad/Downloads/experimental/experimental/newpreviews_test/src/previews_creator.vala"
				if (G_UNLIKELY (_inner_error_ != NULL)) {
#line 210 "/home/dad/Downloads/experimental/experimental/newpreviews_test/src/previews_creator.vala"
					_g_free0 (name);
#line 210 "/home/dad/Downloads/experimental/experimental/newpreviews_test/src/previews_creator.vala"
					sizes = (g_free (sizes), NULL);
#line 210 "/home/dad/Downloads/experimental/experimental/newpreviews_test/src/previews_creator.vala"
					_g_object_unref0 (x11_w);
#line 210 "/home/dad/Downloads/experimental/experimental/newpreviews_test/src/previews_creator.vala"
					_g_object_unref0 (currpix);
#line 210 "/home/dad/Downloads/experimental/experimental/newpreviews_test/src/previews_creator.vala"
					_g_object_unref0 (gdk_match);
#line 210 "/home/dad/Downloads/experimental/experimental/newpreviews_test/src/previews_creator.vala"
					g_critical ("file %s: line %d: uncaught error: %s (%s, %d)", __FILE__, __LINE__, _inner_error_->message, g_quark_to_string (_inner_error_->domain), _inner_error_->code);
#line 210 "/home/dad/Downloads/experimental/experimental/newpreviews_test/src/previews_creator.vala"
					g_clear_error (&_inner_error_);
#line 210 "/home/dad/Downloads/experimental/experimental/newpreviews_test/src/previews_creator.vala"
					return;
#line 1185 "previews_creator.c"
				}
			}
#line 191 "/home/dad/Downloads/experimental/experimental/newpreviews_test/src/previews_creator.vala"
			_g_free0 (name);
#line 191 "/home/dad/Downloads/experimental/experimental/newpreviews_test/src/previews_creator.vala"
			sizes = (g_free (sizes), NULL);
#line 191 "/home/dad/Downloads/experimental/experimental/newpreviews_test/src/previews_creator.vala"
			_g_object_unref0 (x11_w);
#line 191 "/home/dad/Downloads/experimental/experimental/newpreviews_test/src/previews_creator.vala"
			_g_object_unref0 (currpix);
#line 1196 "previews_creator.c"
		}
#line 189 "/home/dad/Downloads/experimental/experimental/newpreviews_test/src/previews_creator.vala"
		_g_object_unref0 (gdk_match);
#line 1200 "previews_creator.c"
	}
}


static void
_vala_array_add1 (gchar** * array,
                  int* length,
                  int* size,
                  gchar* value)
{
#line 230 "/home/dad/Downloads/experimental/experimental/newpreviews_test/src/previews_creator.vala"
	if ((*length) == (*size)) {
#line 230 "/home/dad/Downloads/experimental/experimental/newpreviews_test/src/previews_creator.vala"
		*size = (*size) ? (2 * (*size)) : 4;
#line 230 "/home/dad/Downloads/experimental/experimental/newpreviews_test/src/previews_creator.vala"
		*array = g_renew (gchar*, *array, (*size) + 1);
#line 1217 "previews_creator.c"
	}
#line 230 "/home/dad/Downloads/experimental/experimental/newpreviews_test/src/previews_creator.vala"
	(*array)[(*length)++] = value;
#line 230 "/home/dad/Downloads/experimental/experimental/newpreviews_test/src/previews_creator.vala"
	(*array)[*length] = NULL;
#line 1223 "previews_creator.c"
}


gchar**
create_previews_get_currpreviews (int* result_length1)
{
	gchar** result = NULL;
	gchar** files = NULL;
	gchar** _tmp0_;
	gint files_length1;
	gint _files_size_;
	gchar** _tmp15_;
	gint _tmp15__length1;
	GError * _inner_error_ = NULL;
#line 224 "/home/dad/Downloads/experimental/experimental/newpreviews_test/src/previews_creator.vala"
	_tmp0_ = g_new0 (gchar*, 0 + 1);
#line 224 "/home/dad/Downloads/experimental/experimental/newpreviews_test/src/previews_creator.vala"
	files = _tmp0_;
#line 224 "/home/dad/Downloads/experimental/experimental/newpreviews_test/src/previews_creator.vala"
	files_length1 = 0;
#line 224 "/home/dad/Downloads/experimental/experimental/newpreviews_test/src/previews_creator.vala"
	_files_size_ = files_length1;
#line 1246 "previews_creator.c"
	{
		GDir* dr = NULL;
		const gchar* _tmp1_;
		GDir* _tmp2_;
		gchar* filename = NULL;
#line 226 "/home/dad/Downloads/experimental/experimental/newpreviews_test/src/previews_creator.vala"
		_tmp1_ = create_previews_previewspath;
#line 226 "/home/dad/Downloads/experimental/experimental/newpreviews_test/src/previews_creator.vala"
		_tmp2_ = g_dir_open (_tmp1_, (guint) 0, &_inner_error_);
#line 226 "/home/dad/Downloads/experimental/experimental/newpreviews_test/src/previews_creator.vala"
		dr = _tmp2_;
#line 226 "/home/dad/Downloads/experimental/experimental/newpreviews_test/src/previews_creator.vala"
		if (G_UNLIKELY (_inner_error_ != NULL)) {
#line 226 "/home/dad/Downloads/experimental/experimental/newpreviews_test/src/previews_creator.vala"
			if (_inner_error_->domain == G_FILE_ERROR) {
#line 1262 "previews_creator.c"
				goto __catch3_g_file_error;
			}
#line 226 "/home/dad/Downloads/experimental/experimental/newpreviews_test/src/previews_creator.vala"
			files = (_vala_array_free (files, files_length1, (GDestroyNotify) g_free), NULL);
#line 226 "/home/dad/Downloads/experimental/experimental/newpreviews_test/src/previews_creator.vala"
			g_critical ("file %s: line %d: unexpected error: %s (%s, %d)", __FILE__, __LINE__, _inner_error_->message, g_quark_to_string (_inner_error_->domain), _inner_error_->code);
#line 226 "/home/dad/Downloads/experimental/experimental/newpreviews_test/src/previews_creator.vala"
			g_clear_error (&_inner_error_);
#line 226 "/home/dad/Downloads/experimental/experimental/newpreviews_test/src/previews_creator.vala"
			return NULL;
#line 1273 "previews_creator.c"
		}
#line 227 "/home/dad/Downloads/experimental/experimental/newpreviews_test/src/previews_creator.vala"
		filename = NULL;
#line 228 "/home/dad/Downloads/experimental/experimental/newpreviews_test/src/previews_creator.vala"
		while (TRUE) {
#line 1279 "previews_creator.c"
			GDir* _tmp3_;
			const gchar* _tmp4_;
			gchar* _tmp5_;
			const gchar* _tmp6_;
			gchar* addpic = NULL;
			const gchar* _tmp7_;
			const gchar* _tmp8_;
			gchar* _tmp9_;
			gchar** _tmp10_;
			gint _tmp10__length1;
			const gchar* _tmp11_;
			gchar* _tmp12_;
#line 228 "/home/dad/Downloads/experimental/experimental/newpreviews_test/src/previews_creator.vala"
			_tmp3_ = dr;
#line 228 "/home/dad/Downloads/experimental/experimental/newpreviews_test/src/previews_creator.vala"
			_tmp4_ = g_dir_read_name (_tmp3_);
#line 228 "/home/dad/Downloads/experimental/experimental/newpreviews_test/src/previews_creator.vala"
			_tmp5_ = g_strdup (_tmp4_);
#line 228 "/home/dad/Downloads/experimental/experimental/newpreviews_test/src/previews_creator.vala"
			_g_free0 (filename);
#line 228 "/home/dad/Downloads/experimental/experimental/newpreviews_test/src/previews_creator.vala"
			filename = _tmp5_;
#line 228 "/home/dad/Downloads/experimental/experimental/newpreviews_test/src/previews_creator.vala"
			_tmp6_ = filename;
#line 228 "/home/dad/Downloads/experimental/experimental/newpreviews_test/src/previews_creator.vala"
			if (!(_tmp6_ != NULL)) {
#line 228 "/home/dad/Downloads/experimental/experimental/newpreviews_test/src/previews_creator.vala"
				break;
#line 1308 "previews_creator.c"
			}
#line 229 "/home/dad/Downloads/experimental/experimental/newpreviews_test/src/previews_creator.vala"
			_tmp7_ = create_previews_previewspath;
#line 229 "/home/dad/Downloads/experimental/experimental/newpreviews_test/src/previews_creator.vala"
			_tmp8_ = filename;
#line 229 "/home/dad/Downloads/experimental/experimental/newpreviews_test/src/previews_creator.vala"
			_tmp9_ = g_build_filename (_tmp7_, _tmp8_, NULL);
#line 229 "/home/dad/Downloads/experimental/experimental/newpreviews_test/src/previews_creator.vala"
			addpic = _tmp9_;
#line 230 "/home/dad/Downloads/experimental/experimental/newpreviews_test/src/previews_creator.vala"
			_tmp10_ = files;
#line 230 "/home/dad/Downloads/experimental/experimental/newpreviews_test/src/previews_creator.vala"
			_tmp10__length1 = files_length1;
#line 230 "/home/dad/Downloads/experimental/experimental/newpreviews_test/src/previews_creator.vala"
			_tmp11_ = addpic;
#line 230 "/home/dad/Downloads/experimental/experimental/newpreviews_test/src/previews_creator.vala"
			_tmp12_ = g_strdup (_tmp11_);
#line 230 "/home/dad/Downloads/experimental/experimental/newpreviews_test/src/previews_creator.vala"
			_vala_array_add1 (&files, &files_length1, &_files_size_, _tmp12_);
#line 228 "/home/dad/Downloads/experimental/experimental/newpreviews_test/src/previews_creator.vala"
			_g_free0 (addpic);
#line 1330 "previews_creator.c"
		}
#line 225 "/home/dad/Downloads/experimental/experimental/newpreviews_test/src/previews_creator.vala"
		_g_free0 (filename);
#line 225 "/home/dad/Downloads/experimental/experimental/newpreviews_test/src/previews_creator.vala"
		_g_dir_close0 (dr);
#line 1336 "previews_creator.c"
	}
	goto __finally3;
	__catch3_g_file_error:
	{
		GError* err = NULL;
		gchar** _tmp13_;
		gchar** _tmp14_;
		gint _tmp14__length1;
#line 225 "/home/dad/Downloads/experimental/experimental/newpreviews_test/src/previews_creator.vala"
		err = _inner_error_;
#line 225 "/home/dad/Downloads/experimental/experimental/newpreviews_test/src/previews_creator.vala"
		_inner_error_ = NULL;
#line 234 "/home/dad/Downloads/experimental/experimental/newpreviews_test/src/previews_creator.vala"
		_tmp13_ = g_new0 (gchar*, 0 + 1);
#line 234 "/home/dad/Downloads/experimental/experimental/newpreviews_test/src/previews_creator.vala"
		_tmp14_ = _tmp13_;
#line 234 "/home/dad/Downloads/experimental/experimental/newpreviews_test/src/previews_creator.vala"
		_tmp14__length1 = 0;
#line 234 "/home/dad/Downloads/experimental/experimental/newpreviews_test/src/previews_creator.vala"
		if (result_length1) {
#line 234 "/home/dad/Downloads/experimental/experimental/newpreviews_test/src/previews_creator.vala"
			*result_length1 = _tmp14__length1;
#line 1359 "previews_creator.c"
		}
#line 234 "/home/dad/Downloads/experimental/experimental/newpreviews_test/src/previews_creator.vala"
		result = _tmp14_;
#line 234 "/home/dad/Downloads/experimental/experimental/newpreviews_test/src/previews_creator.vala"
		_g_error_free0 (err);
#line 234 "/home/dad/Downloads/experimental/experimental/newpreviews_test/src/previews_creator.vala"
		files = (_vala_array_free (files, files_length1, (GDestroyNotify) g_free), NULL);
#line 234 "/home/dad/Downloads/experimental/experimental/newpreviews_test/src/previews_creator.vala"
		return result;
#line 1369 "previews_creator.c"
	}
	__finally3:
#line 225 "/home/dad/Downloads/experimental/experimental/newpreviews_test/src/previews_creator.vala"
	if (G_UNLIKELY (_inner_error_ != NULL)) {
#line 225 "/home/dad/Downloads/experimental/experimental/newpreviews_test/src/previews_creator.vala"
		files = (_vala_array_free (files, files_length1, (GDestroyNotify) g_free), NULL);
#line 225 "/home/dad/Downloads/experimental/experimental/newpreviews_test/src/previews_creator.vala"
		g_critical ("file %s: line %d: uncaught error: %s (%s, %d)", __FILE__, __LINE__, _inner_error_->message, g_quark_to_string (_inner_error_->domain), _inner_error_->code);
#line 225 "/home/dad/Downloads/experimental/experimental/newpreviews_test/src/previews_creator.vala"
		g_clear_error (&_inner_error_);
#line 225 "/home/dad/Downloads/experimental/experimental/newpreviews_test/src/previews_creator.vala"
		return NULL;
#line 1382 "previews_creator.c"
	}
#line 236 "/home/dad/Downloads/experimental/experimental/newpreviews_test/src/previews_creator.vala"
	_tmp15_ = files;
#line 236 "/home/dad/Downloads/experimental/experimental/newpreviews_test/src/previews_creator.vala"
	_tmp15__length1 = files_length1;
#line 236 "/home/dad/Downloads/experimental/experimental/newpreviews_test/src/previews_creator.vala"
	if (result_length1) {
#line 236 "/home/dad/Downloads/experimental/experimental/newpreviews_test/src/previews_creator.vala"
		*result_length1 = _tmp15__length1;
#line 1392 "previews_creator.c"
	}
#line 236 "/home/dad/Downloads/experimental/experimental/newpreviews_test/src/previews_creator.vala"
	result = _tmp15_;
#line 236 "/home/dad/Downloads/experimental/experimental/newpreviews_test/src/previews_creator.vala"
	return result;
#line 1398 "previews_creator.c"
}


static gboolean
string_contains (const gchar* self,
                 const gchar* needle)
{
	gboolean result = FALSE;
	gchar* _tmp0_;
#line 1417 "/usr/share/vala-0.40/vapi/glib-2.0.vapi"
	g_return_val_if_fail (self != NULL, FALSE);
#line 1417 "/usr/share/vala-0.40/vapi/glib-2.0.vapi"
	g_return_val_if_fail (needle != NULL, FALSE);
#line 1418 "/usr/share/vala-0.40/vapi/glib-2.0.vapi"
	_tmp0_ = strstr ((gchar*) self, (gchar*) needle);
#line 1418 "/usr/share/vala-0.40/vapi/glib-2.0.vapi"
	result = _tmp0_ != NULL;
#line 1418 "/usr/share/vala-0.40/vapi/glib-2.0.vapi"
	return result;
#line 1418 "previews_creator.c"
}


gboolean
create_previews_get_stringindex (const gchar* f,
                                 gchar** existing_xids,
                                 int existing_xids_length1)
{
	gboolean result = FALSE;
#line 239 "/home/dad/Downloads/experimental/experimental/newpreviews_test/src/previews_creator.vala"
	g_return_val_if_fail (f != NULL, FALSE);
#line 1430 "previews_creator.c"
	{
		gchar** xid_collection = NULL;
		gint xid_collection_length1 = 0;
		gint _xid_collection_size_ = 0;
		gint xid_it = 0;
#line 241 "/home/dad/Downloads/experimental/experimental/newpreviews_test/src/previews_creator.vala"
		xid_collection = existing_xids;
#line 241 "/home/dad/Downloads/experimental/experimental/newpreviews_test/src/previews_creator.vala"
		xid_collection_length1 = existing_xids_length1;
#line 241 "/home/dad/Downloads/experimental/experimental/newpreviews_test/src/previews_creator.vala"
		for (xid_it = 0; xid_it < existing_xids_length1; xid_it = xid_it + 1) {
#line 1442 "previews_creator.c"
			gchar* _tmp0_;
			gchar* xid = NULL;
#line 241 "/home/dad/Downloads/experimental/experimental/newpreviews_test/src/previews_creator.vala"
			_tmp0_ = g_strdup (xid_collection[xid_it]);
#line 241 "/home/dad/Downloads/experimental/experimental/newpreviews_test/src/previews_creator.vala"
			xid = _tmp0_;
#line 1449 "previews_creator.c"
			{
				const gchar* _tmp1_;
#line 242 "/home/dad/Downloads/experimental/experimental/newpreviews_test/src/previews_creator.vala"
				_tmp1_ = xid;
#line 242 "/home/dad/Downloads/experimental/experimental/newpreviews_test/src/previews_creator.vala"
				if (string_contains (f, _tmp1_)) {
#line 243 "/home/dad/Downloads/experimental/experimental/newpreviews_test/src/previews_creator.vala"
					result = TRUE;
#line 243 "/home/dad/Downloads/experimental/experimental/newpreviews_test/src/previews_creator.vala"
					_g_free0 (xid);
#line 243 "/home/dad/Downloads/experimental/experimental/newpreviews_test/src/previews_creator.vala"
					return result;
#line 1462 "previews_creator.c"
				}
#line 241 "/home/dad/Downloads/experimental/experimental/newpreviews_test/src/previews_creator.vala"
				_g_free0 (xid);
#line 1466 "previews_creator.c"
			}
		}
	}
#line 246 "/home/dad/Downloads/experimental/experimental/newpreviews_test/src/previews_creator.vala"
	result = FALSE;
#line 246 "/home/dad/Downloads/experimental/experimental/newpreviews_test/src/previews_creator.vala"
	return result;
#line 1474 "previews_creator.c"
}


static const gchar*
string_to_string (const gchar* self)
{
	const gchar* result = NULL;
#line 1456 "/usr/share/vala-0.40/vapi/glib-2.0.vapi"
	g_return_val_if_fail (self != NULL, NULL);
#line 1457 "/usr/share/vala-0.40/vapi/glib-2.0.vapi"
	result = self;
#line 1457 "/usr/share/vala-0.40/vapi/glib-2.0.vapi"
	return result;
#line 1488 "previews_creator.c"
}


static void
_vala_array_add2 (gchar** * array,
                  int* length,
                  int* size,
                  gchar* value)
{
#line 260 "/home/dad/Downloads/experimental/experimental/newpreviews_test/src/previews_creator.vala"
	if ((*length) == (*size)) {
#line 260 "/home/dad/Downloads/experimental/experimental/newpreviews_test/src/previews_creator.vala"
		*size = (*size) ? (2 * (*size)) : 4;
#line 260 "/home/dad/Downloads/experimental/experimental/newpreviews_test/src/previews_creator.vala"
		*array = g_renew (gchar*, *array, (*size) + 1);
#line 1504 "previews_creator.c"
	}
#line 260 "/home/dad/Downloads/experimental/experimental/newpreviews_test/src/previews_creator.vala"
	(*array)[(*length)++] = value;
#line 260 "/home/dad/Downloads/experimental/experimental/newpreviews_test/src/previews_creator.vala"
	(*array)[*length] = NULL;
#line 1510 "previews_creator.c"
}


void
create_previews_cleanup (void)
{
	gchar** filenames = NULL;
	gint _tmp0_;
	gchar** _tmp1_;
	gint filenames_length1;
	gint _filenames_size_;
	GList* latest_list = NULL;
	WnckScreen* _tmp2_;
	GList* _tmp3_;
	gchar** latest_xids = NULL;
	gchar** _tmp4_;
	gint latest_xids_length1;
	gint _latest_xids_size_;
	GList* _tmp5_;
	gchar** _tmp16_;
	gint _tmp16__length1;
	GError * _inner_error_ = NULL;
#line 252 "/home/dad/Downloads/experimental/experimental/newpreviews_test/src/previews_creator.vala"
	_tmp1_ = create_previews_get_currpreviews (&_tmp0_);
#line 252 "/home/dad/Downloads/experimental/experimental/newpreviews_test/src/previews_creator.vala"
	filenames = _tmp1_;
#line 252 "/home/dad/Downloads/experimental/experimental/newpreviews_test/src/previews_creator.vala"
	filenames_length1 = _tmp0_;
#line 252 "/home/dad/Downloads/experimental/experimental/newpreviews_test/src/previews_creator.vala"
	_filenames_size_ = filenames_length1;
#line 254 "/home/dad/Downloads/experimental/experimental/newpreviews_test/src/previews_creator.vala"
	_tmp2_ = create_previews_wnck_scr;
#line 254 "/home/dad/Downloads/experimental/experimental/newpreviews_test/src/previews_creator.vala"
	_tmp3_ = wnck_screen_get_windows (_tmp2_);
#line 254 "/home/dad/Downloads/experimental/experimental/newpreviews_test/src/previews_creator.vala"
	latest_list = _tmp3_;
#line 255 "/home/dad/Downloads/experimental/experimental/newpreviews_test/src/previews_creator.vala"
	_tmp4_ = g_new0 (gchar*, 0 + 1);
#line 255 "/home/dad/Downloads/experimental/experimental/newpreviews_test/src/previews_creator.vala"
	latest_xids = _tmp4_;
#line 255 "/home/dad/Downloads/experimental/experimental/newpreviews_test/src/previews_creator.vala"
	latest_xids_length1 = 0;
#line 255 "/home/dad/Downloads/experimental/experimental/newpreviews_test/src/previews_creator.vala"
	_latest_xids_size_ = latest_xids_length1;
#line 256 "/home/dad/Downloads/experimental/experimental/newpreviews_test/src/previews_creator.vala"
	_tmp5_ = latest_list;
#line 1557 "previews_creator.c"
	{
		GList* w_collection = NULL;
		GList* w_it = NULL;
#line 256 "/home/dad/Downloads/experimental/experimental/newpreviews_test/src/previews_creator.vala"
		w_collection = _tmp5_;
#line 256 "/home/dad/Downloads/experimental/experimental/newpreviews_test/src/previews_creator.vala"
		for (w_it = w_collection; w_it != NULL; w_it = w_it->next) {
#line 1565 "previews_creator.c"
			WnckWindow* _tmp6_;
			WnckWindow* w = NULL;
#line 256 "/home/dad/Downloads/experimental/experimental/newpreviews_test/src/previews_creator.vala"
			_tmp6_ = _g_object_ref0 ((WnckWindow*) w_it->data);
#line 256 "/home/dad/Downloads/experimental/experimental/newpreviews_test/src/previews_creator.vala"
			w = _tmp6_;
#line 1572 "previews_creator.c"
			{
				gulong xid = 0UL;
				WnckWindow* _tmp7_;
				gchar* name_xid = NULL;
				gulong _tmp8_;
				gchar* _tmp9_;
				gchar* lookup = NULL;
				const gchar* _tmp10_;
				const gchar* _tmp11_;
				gchar* _tmp12_;
				gchar** _tmp13_;
				gint _tmp13__length1;
				const gchar* _tmp14_;
				gchar* _tmp15_;
#line 257 "/home/dad/Downloads/experimental/experimental/newpreviews_test/src/previews_creator.vala"
				_tmp7_ = w;
#line 257 "/home/dad/Downloads/experimental/experimental/newpreviews_test/src/previews_creator.vala"
				xid = wnck_window_get_xid (_tmp7_);
#line 258 "/home/dad/Downloads/experimental/experimental/newpreviews_test/src/previews_creator.vala"
				_tmp8_ = xid;
#line 258 "/home/dad/Downloads/experimental/experimental/newpreviews_test/src/previews_creator.vala"
				_tmp9_ = g_strdup_printf ("%lu", _tmp8_);
#line 258 "/home/dad/Downloads/experimental/experimental/newpreviews_test/src/previews_creator.vala"
				name_xid = _tmp9_;
#line 259 "/home/dad/Downloads/experimental/experimental/newpreviews_test/src/previews_creator.vala"
				_tmp10_ = name_xid;
#line 259 "/home/dad/Downloads/experimental/experimental/newpreviews_test/src/previews_creator.vala"
				_tmp11_ = string_to_string (_tmp10_);
#line 259 "/home/dad/Downloads/experimental/experimental/newpreviews_test/src/previews_creator.vala"
				_tmp12_ = g_strdup (_tmp11_);
#line 259 "/home/dad/Downloads/experimental/experimental/newpreviews_test/src/previews_creator.vala"
				lookup = _tmp12_;
#line 260 "/home/dad/Downloads/experimental/experimental/newpreviews_test/src/previews_creator.vala"
				_tmp13_ = latest_xids;
#line 260 "/home/dad/Downloads/experimental/experimental/newpreviews_test/src/previews_creator.vala"
				_tmp13__length1 = latest_xids_length1;
#line 260 "/home/dad/Downloads/experimental/experimental/newpreviews_test/src/previews_creator.vala"
				_tmp14_ = lookup;
#line 260 "/home/dad/Downloads/experimental/experimental/newpreviews_test/src/previews_creator.vala"
				_tmp15_ = g_strdup (_tmp14_);
#line 260 "/home/dad/Downloads/experimental/experimental/newpreviews_test/src/previews_creator.vala"
				_vala_array_add2 (&latest_xids, &latest_xids_length1, &_latest_xids_size_, _tmp15_);
#line 256 "/home/dad/Downloads/experimental/experimental/newpreviews_test/src/previews_creator.vala"
				_g_free0 (lookup);
#line 256 "/home/dad/Downloads/experimental/experimental/newpreviews_test/src/previews_creator.vala"
				_g_free0 (name_xid);
#line 256 "/home/dad/Downloads/experimental/experimental/newpreviews_test/src/previews_creator.vala"
				_g_object_unref0 (w);
#line 1621 "previews_creator.c"
			}
		}
	}
#line 262 "/home/dad/Downloads/experimental/experimental/newpreviews_test/src/previews_creator.vala"
	_tmp16_ = filenames;
#line 262 "/home/dad/Downloads/experimental/experimental/newpreviews_test/src/previews_creator.vala"
	_tmp16__length1 = filenames_length1;
#line 1629 "previews_creator.c"
	{
		gchar** f_collection = NULL;
		gint f_collection_length1 = 0;
		gint _f_collection_size_ = 0;
		gint f_it = 0;
#line 262 "/home/dad/Downloads/experimental/experimental/newpreviews_test/src/previews_creator.vala"
		f_collection = _tmp16_;
#line 262 "/home/dad/Downloads/experimental/experimental/newpreviews_test/src/previews_creator.vala"
		f_collection_length1 = _tmp16__length1;
#line 262 "/home/dad/Downloads/experimental/experimental/newpreviews_test/src/previews_creator.vala"
		for (f_it = 0; f_it < _tmp16__length1; f_it = f_it + 1) {
#line 1641 "previews_creator.c"
			gchar* _tmp17_;
			gchar* f = NULL;
#line 262 "/home/dad/Downloads/experimental/experimental/newpreviews_test/src/previews_creator.vala"
			_tmp17_ = g_strdup (f_collection[f_it]);
#line 262 "/home/dad/Downloads/experimental/experimental/newpreviews_test/src/previews_creator.vala"
			f = _tmp17_;
#line 1648 "previews_creator.c"
			{
				gboolean keep = FALSE;
				const gchar* _tmp18_;
				gchar** _tmp19_;
				gint _tmp19__length1;
				gboolean _tmp20_;
#line 263 "/home/dad/Downloads/experimental/experimental/newpreviews_test/src/previews_creator.vala"
				_tmp18_ = f;
#line 263 "/home/dad/Downloads/experimental/experimental/newpreviews_test/src/previews_creator.vala"
				_tmp19_ = latest_xids;
#line 263 "/home/dad/Downloads/experimental/experimental/newpreviews_test/src/previews_creator.vala"
				_tmp19__length1 = latest_xids_length1;
#line 263 "/home/dad/Downloads/experimental/experimental/newpreviews_test/src/previews_creator.vala"
				keep = create_previews_get_stringindex (_tmp18_, _tmp19_, _tmp19__length1);
#line 264 "/home/dad/Downloads/experimental/experimental/newpreviews_test/src/previews_creator.vala"
				_tmp20_ = keep;
#line 264 "/home/dad/Downloads/experimental/experimental/newpreviews_test/src/previews_creator.vala"
				if (!_tmp20_) {
#line 1667 "previews_creator.c"
					GFile* file = NULL;
					const gchar* _tmp21_;
					GFile* _tmp22_;
#line 265 "/home/dad/Downloads/experimental/experimental/newpreviews_test/src/previews_creator.vala"
					_tmp21_ = f;
#line 265 "/home/dad/Downloads/experimental/experimental/newpreviews_test/src/previews_creator.vala"
					_tmp22_ = g_file_new_for_path (_tmp21_);
#line 265 "/home/dad/Downloads/experimental/experimental/newpreviews_test/src/previews_creator.vala"
					file = _tmp22_;
#line 1677 "previews_creator.c"
					{
						GFile* _tmp23_;
#line 267 "/home/dad/Downloads/experimental/experimental/newpreviews_test/src/previews_creator.vala"
						_tmp23_ = file;
#line 267 "/home/dad/Downloads/experimental/experimental/newpreviews_test/src/previews_creator.vala"
						g_file_delete (_tmp23_, NULL, &_inner_error_);
#line 267 "/home/dad/Downloads/experimental/experimental/newpreviews_test/src/previews_creator.vala"
						if (G_UNLIKELY (_inner_error_ != NULL)) {
#line 1686 "previews_creator.c"
							goto __catch4_g_error;
						}
					}
					goto __finally4;
					__catch4_g_error:
					{
						GError* e = NULL;
#line 266 "/home/dad/Downloads/experimental/experimental/newpreviews_test/src/previews_creator.vala"
						e = _inner_error_;
#line 266 "/home/dad/Downloads/experimental/experimental/newpreviews_test/src/previews_creator.vala"
						_inner_error_ = NULL;
#line 266 "/home/dad/Downloads/experimental/experimental/newpreviews_test/src/previews_creator.vala"
						_g_error_free0 (e);
#line 1700 "previews_creator.c"
					}
					__finally4:
#line 266 "/home/dad/Downloads/experimental/experimental/newpreviews_test/src/previews_creator.vala"
					if (G_UNLIKELY (_inner_error_ != NULL)) {
#line 266 "/home/dad/Downloads/experimental/experimental/newpreviews_test/src/previews_creator.vala"
						_g_object_unref0 (file);
#line 266 "/home/dad/Downloads/experimental/experimental/newpreviews_test/src/previews_creator.vala"
						_g_free0 (f);
#line 266 "/home/dad/Downloads/experimental/experimental/newpreviews_test/src/previews_creator.vala"
						latest_xids = (_vala_array_free (latest_xids, latest_xids_length1, (GDestroyNotify) g_free), NULL);
#line 266 "/home/dad/Downloads/experimental/experimental/newpreviews_test/src/previews_creator.vala"
						filenames = (_vala_array_free (filenames, filenames_length1, (GDestroyNotify) g_free), NULL);
#line 266 "/home/dad/Downloads/experimental/experimental/newpreviews_test/src/previews_creator.vala"
						g_critical ("file %s: line %d: uncaught error: %s (%s, %d)", __FILE__, __LINE__, _inner_error_->message, g_quark_to_string (_inner_error_->domain), _inner_error_->code);
#line 266 "/home/dad/Downloads/experimental/experimental/newpreviews_test/src/previews_creator.vala"
						g_clear_error (&_inner_error_);
#line 266 "/home/dad/Downloads/experimental/experimental/newpreviews_test/src/previews_creator.vala"
						return;
#line 1719 "previews_creator.c"
					}
#line 264 "/home/dad/Downloads/experimental/experimental/newpreviews_test/src/previews_creator.vala"
					_g_object_unref0 (file);
#line 1723 "previews_creator.c"
				}
#line 262 "/home/dad/Downloads/experimental/experimental/newpreviews_test/src/previews_creator.vala"
				_g_free0 (f);
#line 1727 "previews_creator.c"
			}
		}
	}
#line 249 "/home/dad/Downloads/experimental/experimental/newpreviews_test/src/previews_creator.vala"
	latest_xids = (_vala_array_free (latest_xids, latest_xids_length1, (GDestroyNotify) g_free), NULL);
#line 249 "/home/dad/Downloads/experimental/experimental/newpreviews_test/src/previews_creator.vala"
	filenames = (_vala_array_free (filenames, filenames_length1, (GDestroyNotify) g_free), NULL);
#line 1735 "previews_creator.c"
}


static void
_vala_array_destroy (gpointer array,
                     gint array_length,
                     GDestroyNotify destroy_func)
{
	if ((array != NULL) && (destroy_func != NULL)) {
		int i;
		for (i = 0; i < array_length; i = i + 1) {
			if (((gpointer*) array)[i] != NULL) {
				destroy_func (((gpointer*) array)[i]);
			}
		}
	}
}


static void
_vala_array_free (gpointer array,
                  gint array_length,
                  GDestroyNotify destroy_func)
{
	_vala_array_destroy (array, array_length, destroy_func);
	g_free (array);
}



