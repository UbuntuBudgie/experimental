/* previews_triggers.c generated by valac 0.40.8, the Vala compiler
 * generated from previews_triggers.vala, do not modify */

/*
Budgie WindowPreviews
Author: Jacob Vlijm
Copyright Â© 2017-2019 Ubuntu Budgie Developers
Website=https://ubuntubudgie.org
This program is free software: you can redistribute it and/or modify it under
the terms of the GNU General Public License as published by the Free Software
Foundation, either version 3 of the License, or any later version. This
program is distributed in the hope that it will be useful, but WITHOUT ANY
WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR
A PARTICULAR PURPOSE. See the GNU General Public License for more details. You
should have received a copy of the GNU General Public License along with this
program.  If not, see <https://www.gnu.org/licenses/>.
*/


#include <glib.h>
#include <glib-object.h>
#include <stdlib.h>
#include <string.h>
#include <gio/gio.h>

#define _g_free0(var) (var = (g_free (var), NULL))
#define _g_object_unref0(var) ((var == NULL) ? NULL : (var = (g_object_unref (var), NULL)))
#define _g_error_free0(var) ((var == NULL) ? NULL : (var = (g_error_free (var), NULL)))



void previews_triggers_main (gchar** args,
                             int args_length1);
gboolean previews_triggers_check_args (gchar** args,
                                       int args_length1,
                                       const gchar* arg);
void previews_triggers_create_trigger (GFile* trigger);


static gpointer
_g_object_ref0 (gpointer self)
{
#line 53 "/home/dad/Downloads/experimental/experimental/newpreviews_test/src/previews_triggers.vala"
	return self ? g_object_ref (self) : NULL;
#line 46 "previews_triggers.c"
}


void
previews_triggers_main (gchar** args,
                        int args_length1)
{
	gchar* user = NULL;
	const gchar* _tmp0_;
	gchar* _tmp1_;
	GFile* allappstrigger = NULL;
	const gchar* _tmp2_;
	gchar* _tmp3_;
	gchar* _tmp4_;
	GFile* _tmp5_;
	GFile* _tmp6_;
	GFile* nexttrigger = NULL;
	const gchar* _tmp7_;
	gchar* _tmp8_;
	gchar* _tmp9_;
	GFile* _tmp10_;
	GFile* _tmp11_;
	GFile* previoustrigger = NULL;
	const gchar* _tmp12_;
	gchar* _tmp13_;
	gchar* _tmp14_;
	GFile* _tmp15_;
	GFile* _tmp16_;
	GFile* triggercurrent = NULL;
	const gchar* _tmp17_;
	gchar* _tmp18_;
	gchar* _tmp19_;
	GFile* _tmp20_;
	GFile* _tmp21_;
	GFile* trg = NULL;
	GFile* _tmp22_;
	GFile* _tmp23_;
	gboolean _tmp24_ = FALSE;
	GFile* _tmp25_;
	GFile* _tmp35_;
#line 38 "/home/dad/Downloads/experimental/experimental/newpreviews_test/src/previews_triggers.vala"
	_tmp0_ = g_get_user_name ();
#line 38 "/home/dad/Downloads/experimental/experimental/newpreviews_test/src/previews_triggers.vala"
	_tmp1_ = g_strdup (_tmp0_);
#line 38 "/home/dad/Downloads/experimental/experimental/newpreviews_test/src/previews_triggers.vala"
	user = _tmp1_;
#line 40 "/home/dad/Downloads/experimental/experimental/newpreviews_test/src/previews_triggers.vala"
	_tmp2_ = user;
#line 40 "/home/dad/Downloads/experimental/experimental/newpreviews_test/src/previews_triggers.vala"
	_tmp3_ = g_strconcat ("/tmp/", _tmp2_, "_prvtrigger_all", NULL);
#line 40 "/home/dad/Downloads/experimental/experimental/newpreviews_test/src/previews_triggers.vala"
	_tmp4_ = _tmp3_;
#line 40 "/home/dad/Downloads/experimental/experimental/newpreviews_test/src/previews_triggers.vala"
	_tmp5_ = g_file_new_for_path (_tmp4_);
#line 40 "/home/dad/Downloads/experimental/experimental/newpreviews_test/src/previews_triggers.vala"
	_tmp6_ = _tmp5_;
#line 40 "/home/dad/Downloads/experimental/experimental/newpreviews_test/src/previews_triggers.vala"
	_g_free0 (_tmp4_);
#line 40 "/home/dad/Downloads/experimental/experimental/newpreviews_test/src/previews_triggers.vala"
	allappstrigger = _tmp6_;
#line 43 "/home/dad/Downloads/experimental/experimental/newpreviews_test/src/previews_triggers.vala"
	_tmp7_ = user;
#line 43 "/home/dad/Downloads/experimental/experimental/newpreviews_test/src/previews_triggers.vala"
	_tmp8_ = g_strconcat ("/tmp/", _tmp7_, "_nexttrigger", NULL);
#line 43 "/home/dad/Downloads/experimental/experimental/newpreviews_test/src/previews_triggers.vala"
	_tmp9_ = _tmp8_;
#line 43 "/home/dad/Downloads/experimental/experimental/newpreviews_test/src/previews_triggers.vala"
	_tmp10_ = g_file_new_for_path (_tmp9_);
#line 43 "/home/dad/Downloads/experimental/experimental/newpreviews_test/src/previews_triggers.vala"
	_tmp11_ = _tmp10_;
#line 43 "/home/dad/Downloads/experimental/experimental/newpreviews_test/src/previews_triggers.vala"
	_g_free0 (_tmp9_);
#line 43 "/home/dad/Downloads/experimental/experimental/newpreviews_test/src/previews_triggers.vala"
	nexttrigger = _tmp11_;
#line 46 "/home/dad/Downloads/experimental/experimental/newpreviews_test/src/previews_triggers.vala"
	_tmp12_ = user;
#line 46 "/home/dad/Downloads/experimental/experimental/newpreviews_test/src/previews_triggers.vala"
	_tmp13_ = g_strconcat ("/tmp/", _tmp12_, "_previoustrigger", NULL);
#line 46 "/home/dad/Downloads/experimental/experimental/newpreviews_test/src/previews_triggers.vala"
	_tmp14_ = _tmp13_;
#line 46 "/home/dad/Downloads/experimental/experimental/newpreviews_test/src/previews_triggers.vala"
	_tmp15_ = g_file_new_for_path (_tmp14_);
#line 46 "/home/dad/Downloads/experimental/experimental/newpreviews_test/src/previews_triggers.vala"
	_tmp16_ = _tmp15_;
#line 46 "/home/dad/Downloads/experimental/experimental/newpreviews_test/src/previews_triggers.vala"
	_g_free0 (_tmp14_);
#line 46 "/home/dad/Downloads/experimental/experimental/newpreviews_test/src/previews_triggers.vala"
	previoustrigger = _tmp16_;
#line 49 "/home/dad/Downloads/experimental/experimental/newpreviews_test/src/previews_triggers.vala"
	_tmp17_ = user;
#line 49 "/home/dad/Downloads/experimental/experimental/newpreviews_test/src/previews_triggers.vala"
	_tmp18_ = g_strconcat ("/tmp/", _tmp17_, "_prvtrigger_current", NULL);
#line 49 "/home/dad/Downloads/experimental/experimental/newpreviews_test/src/previews_triggers.vala"
	_tmp19_ = _tmp18_;
#line 49 "/home/dad/Downloads/experimental/experimental/newpreviews_test/src/previews_triggers.vala"
	_tmp20_ = g_file_new_for_path (_tmp19_);
#line 49 "/home/dad/Downloads/experimental/experimental/newpreviews_test/src/previews_triggers.vala"
	_tmp21_ = _tmp20_;
#line 49 "/home/dad/Downloads/experimental/experimental/newpreviews_test/src/previews_triggers.vala"
	_g_free0 (_tmp19_);
#line 49 "/home/dad/Downloads/experimental/experimental/newpreviews_test/src/previews_triggers.vala"
	triggercurrent = _tmp21_;
#line 53 "/home/dad/Downloads/experimental/experimental/newpreviews_test/src/previews_triggers.vala"
	_tmp22_ = nexttrigger;
#line 53 "/home/dad/Downloads/experimental/experimental/newpreviews_test/src/previews_triggers.vala"
	_tmp23_ = _g_object_ref0 (_tmp22_);
#line 53 "/home/dad/Downloads/experimental/experimental/newpreviews_test/src/previews_triggers.vala"
	trg = _tmp23_;
#line 54 "/home/dad/Downloads/experimental/experimental/newpreviews_test/src/previews_triggers.vala"
	_tmp25_ = allappstrigger;
#line 54 "/home/dad/Downloads/experimental/experimental/newpreviews_test/src/previews_triggers.vala"
	if (g_file_query_exists (_tmp25_, NULL)) {
#line 54 "/home/dad/Downloads/experimental/experimental/newpreviews_test/src/previews_triggers.vala"
		_tmp24_ = TRUE;
#line 161 "previews_triggers.c"
	} else {
		GFile* _tmp26_;
#line 54 "/home/dad/Downloads/experimental/experimental/newpreviews_test/src/previews_triggers.vala"
		_tmp26_ = triggercurrent;
#line 54 "/home/dad/Downloads/experimental/experimental/newpreviews_test/src/previews_triggers.vala"
		_tmp24_ = g_file_query_exists (_tmp26_, NULL);
#line 168 "previews_triggers.c"
	}
#line 54 "/home/dad/Downloads/experimental/experimental/newpreviews_test/src/previews_triggers.vala"
	if (_tmp24_) {
#line 172 "previews_triggers.c"
		GFile* _tmp27_;
		GFile* _tmp28_;
#line 55 "/home/dad/Downloads/experimental/experimental/newpreviews_test/src/previews_triggers.vala"
		_tmp27_ = nexttrigger;
#line 55 "/home/dad/Downloads/experimental/experimental/newpreviews_test/src/previews_triggers.vala"
		_tmp28_ = _g_object_ref0 (_tmp27_);
#line 55 "/home/dad/Downloads/experimental/experimental/newpreviews_test/src/previews_triggers.vala"
		_g_object_unref0 (trg);
#line 55 "/home/dad/Downloads/experimental/experimental/newpreviews_test/src/previews_triggers.vala"
		trg = _tmp28_;
#line 56 "/home/dad/Downloads/experimental/experimental/newpreviews_test/src/previews_triggers.vala"
		if (previews_triggers_check_args (args, args_length1, "previous")) {
#line 185 "previews_triggers.c"
			GFile* _tmp29_;
			GFile* _tmp30_;
#line 57 "/home/dad/Downloads/experimental/experimental/newpreviews_test/src/previews_triggers.vala"
			_tmp29_ = previoustrigger;
#line 57 "/home/dad/Downloads/experimental/experimental/newpreviews_test/src/previews_triggers.vala"
			_tmp30_ = _g_object_ref0 (_tmp29_);
#line 57 "/home/dad/Downloads/experimental/experimental/newpreviews_test/src/previews_triggers.vala"
			_g_object_unref0 (trg);
#line 57 "/home/dad/Downloads/experimental/experimental/newpreviews_test/src/previews_triggers.vala"
			trg = _tmp30_;
#line 196 "previews_triggers.c"
		}
	} else {
		GFile* _tmp31_;
		GFile* _tmp32_;
#line 61 "/home/dad/Downloads/experimental/experimental/newpreviews_test/src/previews_triggers.vala"
		_tmp31_ = allappstrigger;
#line 61 "/home/dad/Downloads/experimental/experimental/newpreviews_test/src/previews_triggers.vala"
		_tmp32_ = _g_object_ref0 (_tmp31_);
#line 61 "/home/dad/Downloads/experimental/experimental/newpreviews_test/src/previews_triggers.vala"
		_g_object_unref0 (trg);
#line 61 "/home/dad/Downloads/experimental/experimental/newpreviews_test/src/previews_triggers.vala"
		trg = _tmp32_;
#line 62 "/home/dad/Downloads/experimental/experimental/newpreviews_test/src/previews_triggers.vala"
		if (previews_triggers_check_args (args, args_length1, "current")) {
#line 211 "previews_triggers.c"
			GFile* _tmp33_;
			GFile* _tmp34_;
#line 63 "/home/dad/Downloads/experimental/experimental/newpreviews_test/src/previews_triggers.vala"
			_tmp33_ = triggercurrent;
#line 63 "/home/dad/Downloads/experimental/experimental/newpreviews_test/src/previews_triggers.vala"
			_tmp34_ = _g_object_ref0 (_tmp33_);
#line 63 "/home/dad/Downloads/experimental/experimental/newpreviews_test/src/previews_triggers.vala"
			_g_object_unref0 (trg);
#line 63 "/home/dad/Downloads/experimental/experimental/newpreviews_test/src/previews_triggers.vala"
			trg = _tmp34_;
#line 222 "previews_triggers.c"
		}
	}
#line 66 "/home/dad/Downloads/experimental/experimental/newpreviews_test/src/previews_triggers.vala"
	_tmp35_ = trg;
#line 66 "/home/dad/Downloads/experimental/experimental/newpreviews_test/src/previews_triggers.vala"
	previews_triggers_create_trigger (_tmp35_);
#line 35 "/home/dad/Downloads/experimental/experimental/newpreviews_test/src/previews_triggers.vala"
	_g_object_unref0 (trg);
#line 35 "/home/dad/Downloads/experimental/experimental/newpreviews_test/src/previews_triggers.vala"
	_g_object_unref0 (triggercurrent);
#line 35 "/home/dad/Downloads/experimental/experimental/newpreviews_test/src/previews_triggers.vala"
	_g_object_unref0 (previoustrigger);
#line 35 "/home/dad/Downloads/experimental/experimental/newpreviews_test/src/previews_triggers.vala"
	_g_object_unref0 (nexttrigger);
#line 35 "/home/dad/Downloads/experimental/experimental/newpreviews_test/src/previews_triggers.vala"
	_g_object_unref0 (allappstrigger);
#line 35 "/home/dad/Downloads/experimental/experimental/newpreviews_test/src/previews_triggers.vala"
	_g_free0 (user);
#line 241 "previews_triggers.c"
}


int
main (int argc,
      char ** argv)
{
#line 35 "/home/dad/Downloads/experimental/experimental/newpreviews_test/src/previews_triggers.vala"
	previews_triggers_main (argv, argc);
#line 35 "/home/dad/Downloads/experimental/experimental/newpreviews_test/src/previews_triggers.vala"
	return 0;
#line 253 "previews_triggers.c"
}


gboolean
previews_triggers_check_args (gchar** args,
                              int args_length1,
                              const gchar* arg)
{
	gboolean result = FALSE;
#line 69 "/home/dad/Downloads/experimental/experimental/newpreviews_test/src/previews_triggers.vala"
	g_return_val_if_fail (arg != NULL, FALSE);
#line 265 "previews_triggers.c"
	{
		gchar** s_collection = NULL;
		gint s_collection_length1 = 0;
		gint _s_collection_size_ = 0;
		gint s_it = 0;
#line 70 "/home/dad/Downloads/experimental/experimental/newpreviews_test/src/previews_triggers.vala"
		s_collection = args;
#line 70 "/home/dad/Downloads/experimental/experimental/newpreviews_test/src/previews_triggers.vala"
		s_collection_length1 = args_length1;
#line 70 "/home/dad/Downloads/experimental/experimental/newpreviews_test/src/previews_triggers.vala"
		for (s_it = 0; s_it < args_length1; s_it = s_it + 1) {
#line 277 "previews_triggers.c"
			gchar* _tmp0_;
			gchar* s = NULL;
#line 70 "/home/dad/Downloads/experimental/experimental/newpreviews_test/src/previews_triggers.vala"
			_tmp0_ = g_strdup (s_collection[s_it]);
#line 70 "/home/dad/Downloads/experimental/experimental/newpreviews_test/src/previews_triggers.vala"
			s = _tmp0_;
#line 284 "previews_triggers.c"
			{
				const gchar* _tmp1_;
#line 71 "/home/dad/Downloads/experimental/experimental/newpreviews_test/src/previews_triggers.vala"
				_tmp1_ = s;
#line 71 "/home/dad/Downloads/experimental/experimental/newpreviews_test/src/previews_triggers.vala"
				if (g_strcmp0 (_tmp1_, arg) == 0) {
#line 72 "/home/dad/Downloads/experimental/experimental/newpreviews_test/src/previews_triggers.vala"
					result = TRUE;
#line 72 "/home/dad/Downloads/experimental/experimental/newpreviews_test/src/previews_triggers.vala"
					_g_free0 (s);
#line 72 "/home/dad/Downloads/experimental/experimental/newpreviews_test/src/previews_triggers.vala"
					return result;
#line 297 "previews_triggers.c"
				}
#line 70 "/home/dad/Downloads/experimental/experimental/newpreviews_test/src/previews_triggers.vala"
				_g_free0 (s);
#line 301 "previews_triggers.c"
			}
		}
	}
#line 75 "/home/dad/Downloads/experimental/experimental/newpreviews_test/src/previews_triggers.vala"
	result = FALSE;
#line 75 "/home/dad/Downloads/experimental/experimental/newpreviews_test/src/previews_triggers.vala"
	return result;
#line 309 "previews_triggers.c"
}


static guint8*
string_get_data (const gchar* self,
                 int* result_length1)
{
	guint8* result;
	guint8* res = NULL;
	gint res_length1;
	gint _res_size_;
	gint _tmp0_;
	gint _tmp1_;
	gint _tmp2_;
	guint8* _tmp3_;
	gint _tmp3__length1;
	guint8* _tmp4_;
	gint _tmp4__length1;
#line 1442 "/usr/share/vala-0.40/vapi/glib-2.0.vapi"
	g_return_val_if_fail (self != NULL, NULL);
#line 1443 "/usr/share/vala-0.40/vapi/glib-2.0.vapi"
	res = (guint8*) self;
#line 1443 "/usr/share/vala-0.40/vapi/glib-2.0.vapi"
	res_length1 = -1;
#line 1443 "/usr/share/vala-0.40/vapi/glib-2.0.vapi"
	_res_size_ = res_length1;
#line 1444 "/usr/share/vala-0.40/vapi/glib-2.0.vapi"
	_tmp0_ = strlen (self);
#line 1444 "/usr/share/vala-0.40/vapi/glib-2.0.vapi"
	_tmp1_ = _tmp0_;
#line 1444 "/usr/share/vala-0.40/vapi/glib-2.0.vapi"
	res_length1 = (gint) _tmp1_;
#line 1444 "/usr/share/vala-0.40/vapi/glib-2.0.vapi"
	_tmp2_ = res_length1;
#line 1445 "/usr/share/vala-0.40/vapi/glib-2.0.vapi"
	_tmp3_ = res;
#line 1445 "/usr/share/vala-0.40/vapi/glib-2.0.vapi"
	_tmp3__length1 = res_length1;
#line 1445 "/usr/share/vala-0.40/vapi/glib-2.0.vapi"
	_tmp4_ = _tmp3_;
#line 1445 "/usr/share/vala-0.40/vapi/glib-2.0.vapi"
	_tmp4__length1 = _tmp3__length1;
#line 1445 "/usr/share/vala-0.40/vapi/glib-2.0.vapi"
	if (result_length1) {
#line 1445 "/usr/share/vala-0.40/vapi/glib-2.0.vapi"
		*result_length1 = _tmp4__length1;
#line 356 "previews_triggers.c"
	}
#line 1445 "/usr/share/vala-0.40/vapi/glib-2.0.vapi"
	result = _tmp4_;
#line 1445 "/usr/share/vala-0.40/vapi/glib-2.0.vapi"
	return result;
#line 362 "previews_triggers.c"
}


void
previews_triggers_create_trigger (GFile* trigger)
{
	GError * _inner_error_ = NULL;
#line 78 "/home/dad/Downloads/experimental/experimental/newpreviews_test/src/previews_triggers.vala"
	g_return_if_fail (trigger != NULL);
#line 372 "previews_triggers.c"
	{
		GFileOutputStream* createtrigger = NULL;
		GFileOutputStream* _tmp0_;
		GFileOutputStream* _tmp1_;
		guint8* _tmp2_;
		gint _tmp2__length1;
		guint8* _tmp3_;
		gint _tmp3__length1;
#line 80 "/home/dad/Downloads/experimental/experimental/newpreviews_test/src/previews_triggers.vala"
		_tmp0_ = g_file_create (trigger, G_FILE_CREATE_PRIVATE, NULL, &_inner_error_);
#line 80 "/home/dad/Downloads/experimental/experimental/newpreviews_test/src/previews_triggers.vala"
		createtrigger = _tmp0_;
#line 80 "/home/dad/Downloads/experimental/experimental/newpreviews_test/src/previews_triggers.vala"
		if (G_UNLIKELY (_inner_error_ != NULL)) {
#line 387 "previews_triggers.c"
			goto __catch0_g_error;
		}
#line 83 "/home/dad/Downloads/experimental/experimental/newpreviews_test/src/previews_triggers.vala"
		_tmp1_ = createtrigger;
#line 83 "/home/dad/Downloads/experimental/experimental/newpreviews_test/src/previews_triggers.vala"
		_tmp2_ = string_get_data ("", &_tmp2__length1);
#line 83 "/home/dad/Downloads/experimental/experimental/newpreviews_test/src/previews_triggers.vala"
		_tmp3_ = _tmp2_;
#line 83 "/home/dad/Downloads/experimental/experimental/newpreviews_test/src/previews_triggers.vala"
		_tmp3__length1 = _tmp2__length1;
#line 83 "/home/dad/Downloads/experimental/experimental/newpreviews_test/src/previews_triggers.vala"
		g_output_stream_write ((GOutputStream*) _tmp1_, _tmp3_, (gsize) _tmp3__length1, NULL, &_inner_error_);
#line 83 "/home/dad/Downloads/experimental/experimental/newpreviews_test/src/previews_triggers.vala"
		if (G_UNLIKELY (_inner_error_ != NULL)) {
#line 83 "/home/dad/Downloads/experimental/experimental/newpreviews_test/src/previews_triggers.vala"
			_g_object_unref0 (createtrigger);
#line 404 "previews_triggers.c"
			goto __catch0_g_error;
		}
#line 79 "/home/dad/Downloads/experimental/experimental/newpreviews_test/src/previews_triggers.vala"
		_g_object_unref0 (createtrigger);
#line 409 "previews_triggers.c"
	}
	goto __finally0;
	__catch0_g_error:
	{
		GError* e = NULL;
#line 79 "/home/dad/Downloads/experimental/experimental/newpreviews_test/src/previews_triggers.vala"
		e = _inner_error_;
#line 79 "/home/dad/Downloads/experimental/experimental/newpreviews_test/src/previews_triggers.vala"
		_inner_error_ = NULL;
#line 79 "/home/dad/Downloads/experimental/experimental/newpreviews_test/src/previews_triggers.vala"
		_g_error_free0 (e);
#line 421 "previews_triggers.c"
	}
	__finally0:
#line 79 "/home/dad/Downloads/experimental/experimental/newpreviews_test/src/previews_triggers.vala"
	if (G_UNLIKELY (_inner_error_ != NULL)) {
#line 79 "/home/dad/Downloads/experimental/experimental/newpreviews_test/src/previews_triggers.vala"
		g_critical ("file %s: line %d: uncaught error: %s (%s, %d)", __FILE__, __LINE__, _inner_error_->message, g_quark_to_string (_inner_error_->domain), _inner_error_->code);
#line 79 "/home/dad/Downloads/experimental/experimental/newpreviews_test/src/previews_triggers.vala"
		g_clear_error (&_inner_error_);
#line 79 "/home/dad/Downloads/experimental/experimental/newpreviews_test/src/previews_triggers.vala"
		return;
#line 432 "previews_triggers.c"
	}
}



